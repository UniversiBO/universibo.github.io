<html>
<head>
<title>File Source for Smarty.class.php</title>
<link rel="stylesheet" type="text/css" href="../media/style.css">
</head>
<body>

<table border="0" cellspacing="0" cellpadding="0" height="48" width="100%">
  <tr>
    <td class="header_top">Smarty</td>
  </tr>
  <tr><td class="header_line"><img src="../media/empty.png" width="1" height="1" border="0" alt=""  /></td></tr>
  <tr>
    <td class="header_menu">
  		  [ <a href="../classtrees_Smarty.html" class="menu">class tree: Smarty</a> ]
		  [ <a href="../elementindex_Smarty.html" class="menu">index: Smarty</a> ]
		  [ <a href="../elementindex.html" class="menu">all elements</a> ]
    </td>
  </tr>
  <tr><td class="header_line"><img src="../media/empty.png" width="1" height="1" border="0" alt=""  /></td></tr>
</table>

<table width="100%" border="0" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="200" class="menu">
	<div id="todolist">
			<p><a href="../todolist.html">Todo List</a></p>
	</div>
      <b>Packages:</b><br />
              <a href="../li_undefined_package.html">undefined_package</a><br />
              <a href="../li_DB.html">DB</a><br />
              <a href="../li_framework.html">framework</a><br />
              <a href="../li_kronos.html">kronos</a><br />
              <a href="../li_PHPMailer.html">PHPMailer</a><br />
              <a href="../li_PHPUnit.html">PHPUnit</a><br />
              <a href="../li_Smarty.html">Smarty</a><br />
              <a href="../li_universibo.html">universibo</a><br />
              <a href="../li_universibo_tests.html">universibo_tests</a><br />
            <br /><br />
                  
      
          </td>
    <td>
      <table cellpadding="10" cellspacing="0" width="100%" border="0"><tr><td valign="top">

<h1 align="center">Source for file Smarty.class.php</h1>
<p>Documentation is available at <a href="../Smarty/_universibo2_framework_smarty_Smarty_class_php.html">Smarty.class.php</a></p>
<pre><a name="a1"></a><br />1     <strong>&lt;?php</strong><a name="a2"></a><br />2     <font color="#009999">/**</font><a name="a3"></a><br />3     <font color="#009999"> * Project:     Smarty: the PHP compiling template engine</font><a name="a4"></a><br />4     <font color="#009999"> * File:        Smarty.class.php</font><a name="a5"></a><br />5     <font color="#009999"> *</font><a name="a6"></a><br />6     <font color="#009999"> * This library is free software; you can redistribute it and/or</font><a name="a7"></a><br />7     <font color="#009999"> * modify it under the terms of the GNU Lesser General Public</font><a name="a8"></a><br />8     <font color="#009999"> * License as published by the Free Software Foundation; either</font><a name="a9"></a><br />9     <font color="#009999"> * version 2.1 of the License, or (at your option) any later version.</font><a name="a10"></a><br />10    <font color="#009999"> *</font><a name="a11"></a><br />11    <font color="#009999"> * This library is distributed in the hope that it will be useful,</font><a name="a12"></a><br />12    <font color="#009999"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</font><a name="a13"></a><br />13    <font color="#009999"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU</font><a name="a14"></a><br />14    <font color="#009999"> * Lesser General Public License for more details.</font><a name="a15"></a><br />15    <font color="#009999"> *</font><a name="a16"></a><br />16    <font color="#009999"> * You should have received a copy of the GNU Lesser General Public</font><a name="a17"></a><br />17    <font color="#009999"> * License along with this library; if not, write to the Free Software</font><a name="a18"></a><br />18    <font color="#009999"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</font><a name="a19"></a><br />19    <font color="#009999"> *</font><a name="a20"></a><br />20    <font color="#009999"> * For questions, help, comments, discussion, etc., please join the</font><a name="a21"></a><br />21    <font color="#009999"> * Smarty mailing list. Send a blank e-mail to</font><a name="a22"></a><br />22    <font color="#009999"> * smarty-general-subscribe@lists.php.net</font><a name="a23"></a><br />23    <font color="#009999"> *</font><a name="a24"></a><br />24    <font color="#009999"> * You may contact the authors of Smarty by e-mail at:</font><a name="a25"></a><br />25    <font color="#009999"> * monte@ispi.net</font><a name="a26"></a><br />26    <font color="#009999"> * andrei@php.net</font><a name="a27"></a><br />27    <font color="#009999"> *</font><a name="a28"></a><br />28    <font color="#009999"> * Or, write to:</font><a name="a29"></a><br />29    <font color="#009999"> * Monte Ohrt</font><a name="a30"></a><br />30    <font color="#009999"> * Director of Technology, ispi</font><a name="a31"></a><br />31    <font color="#009999"> * 237 S. 70th suite 220</font><a name="a32"></a><br />32    <font color="#009999"> * Lincoln, NE 68510</font><a name="a33"></a><br />33    <font color="#009999"> *</font><a name="a34"></a><br />34    <font color="#009999"> * The latest version of Smarty can be obtained from:</font><a name="a35"></a><br />35    <font color="#009999"> * http://smarty.php.net/</font><a name="a36"></a><br />36    <font color="#009999"> *</font><a name="a37"></a><br />37    <font color="#009999"> *</font><font color="#009999"> </font><strong><font color = "#0099FF">@link</font></strong><font color="#009999"> http://smarty.php.net/</font><a name="a38"></a><br />38    <font color="#009999"> *</font><font color="#009999"> </font><strong><font color = "#0099FF">@copyright</font></strong><font color="#009999"> 2001,2002 ispi of Lincoln, Inc.</font><a name="a39"></a><br />39    <font color="#009999"> *</font><font color="#009999"> </font><strong><font color = "#0099FF">@author</font></strong><font color="#009999"> Monte Ohrt &lt;monte@ispi.net&gt;</font><a name="a40"></a><br />40    <font color="#009999"> *</font><font color="#009999"> </font><strong><font color = "#0099FF">@author</font></strong><font color="#009999"> Andrei Zmievski &lt;andrei@php.net&gt;</font><a name="a41"></a><br />41    <font color="#009999"> *</font><font color="#009999"> </font><strong><font color = "#0099FF">@package</font></strong><font color="#009999"> Smarty</font><a name="a42"></a><br />42    <font color="#009999"> *</font><font color="#009999"> </font><strong><font color = "#0099FF">@version</font></strong><font color="#009999"> 2.5.0</font><a name="a43"></a><br />43    <font color="#009999"> */</font><a name="a44"></a><br />44    <a name="a45"></a><br />45    <font color="green">/* $Id: Smarty.class.php,v 1.1 2003/07/21 10:41:50 brain_79 Exp $ */</font><a name="a46"></a><br />46    <a name="a47"></a><br />47    <font color="#009999">/**</font><a name="a48"></a><br />48    <font color="#009999"> * set SMARTY_DIR to absolute path to Smarty library files.</font><a name="a49"></a><br />49    <font color="#009999"> * if not defined, include_path will be used.</font><a name="a50"></a><br />50    <font color="#009999"> */</font><a name="a51"></a><br />51    <a name="a52"></a><br />52    <a href="http://www.php.net/define">define</a><strong>(</strong><font color="#66cccc">'DIR_SEP'</font><strong>,</strong> DIRECTORY_SEPARATOR<strong>)</strong>;<a name="a53"></a><br />53    <a name="a54"></a><br />54    <font color="#009999">/**</font><a name="a55"></a><br />55    <font color="#009999"> * Sets SMARTY_DIR only if user application has not already defined it</font><a name="a56"></a><br />56    <font color="#009999"> */</font><a name="a57"></a><br />57    <font color="blue">if</font> <strong>(</strong><strong>!</strong><a href="http://www.php.net/defined">defined</a><strong>(</strong><font color="#66cccc">'SMARTY_DIR'</font><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a58"></a><br />58        <a href="http://www.php.net/define">define</a><strong>(</strong><font color="#66cccc">'SMARTY_DIR'</font><strong>,</strong> dirname<strong>(</strong>__FILE__<strong>)</strong> . DIR_SEP<strong>)</strong>;<a name="a59"></a><br />59    <strong>}</strong><a name="a60"></a><br />60    <a name="a61"></a><br />61    <a href="http://www.php.net/define">define</a><strong>(</strong><font color="#66cccc">'SMARTY_PHP_PASSTHRU'</font><strong>,</strong>   0<strong>)</strong>;<a name="a62"></a><br />62    <a href="http://www.php.net/define">define</a><strong>(</strong><font color="#66cccc">'SMARTY_PHP_QUOTE'</font><strong>,</strong>      1<strong>)</strong>;<a name="a63"></a><br />63    <a href="http://www.php.net/define">define</a><strong>(</strong><font color="#66cccc">'SMARTY_PHP_REMOVE'</font><strong>,</strong>     2<strong>)</strong>;<a name="a64"></a><br />64    <a href="http://www.php.net/define">define</a><strong>(</strong><font color="#66cccc">'SMARTY_PHP_ALLOW'</font><strong>,</strong>      3<strong>)</strong>;<a name="a65"></a><br />65    <a name="a66"></a><br />66    <font color="#009999">/**</font><a name="a67"></a><br />67    <font color="#009999"> *</font><font color="#009999"> </font><strong><font color = "#0099FF">@package</font></strong><font color="#009999"> Smarty</font><a name="a68"></a><br />68    <font color="#009999"> */</font><a name="a69"></a><br />69    <font color="blue">class</font> <a href="../Smarty/Smarty.html">Smarty</a><a name="a70"></a><br />70    <strong>{</strong><a name="a71"></a><br />71        <font color="blue">/**#@+</font color="blue"><a name="a72"></a><br />72    <font color="blue">     * Smarty Configuration Section</font color="blue"><a name="a73"></a><br />73    <font color="blue">     */</font color="blue"><a name="a74"></a><br />74    <a name="a75"></a><br />75        <font color="#009999">/**</font><a name="a76"></a><br />76    <font color="#009999">     * The name of the directory where templates are located.</font><a name="a77"></a><br />77    <font color="#009999">     * </font><a name="a78"></a><br />78    <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>string </em><a name="a79"></a><br />79    <font color="#009999">     */</font><a name="a80"></a><br />80        <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$template_dir">$template_dir</a>    =  <font color="#66cccc">'templates'</font>;<a name="a81"></a><br />81    <a name="a82"></a><br />82        <font color="#009999">/**</font><a name="a83"></a><br />83    <font color="#009999">     * The directory where compiled templates are located.</font><a name="a84"></a><br />84    <font color="#009999">     * </font><a name="a85"></a><br />85    <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>string </em><a name="a86"></a><br />86    <font color="#009999">     */</font><a name="a87"></a><br />87        <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$compile_dir">$compile_dir</a>     =  <font color="#66cccc">'templates_c'</font>;<a name="a88"></a><br />88    <a name="a89"></a><br />89        <font color="#009999">/**</font><a name="a90"></a><br />90    <font color="#009999">     * The directory where config files are located.</font><a name="a91"></a><br />91    <font color="#009999">     * </font><a name="a92"></a><br />92    <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>string </em><a name="a93"></a><br />93    <font color="#009999">     */</font><a name="a94"></a><br />94        <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$config_dir">$config_dir</a>      =  <font color="#66cccc">'configs'</font>;<a name="a95"></a><br />95    <a name="a96"></a><br />96        <font color="#009999">/**</font><a name="a97"></a><br />97    <font color="#009999">     * An array of directories searched for plugins.</font><a name="a98"></a><br />98    <font color="#009999">     * </font><a name="a99"></a><br />99    <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>array </em><a name="a100"></a><br />100   <font color="#009999">     */</font><a name="a101"></a><br />101       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$plugins_dir">$plugins_dir</a>     =  array<strong>(</strong><font color="#66cccc">'plugins'</font><strong>)</strong>;<a name="a102"></a><br />102   <a name="a103"></a><br />103       <font color="#009999">/**</font><a name="a104"></a><br />104   <font color="#009999">     * If debugging is enabled, a debug console window will display</font><a name="a105"></a><br />105   <font color="#009999">     * when the page loads (make sure your browser allows unrequested</font><a name="a106"></a><br />106   <font color="#009999">     * popup windows)</font><a name="a107"></a><br />107   <font color="#009999">     * </font><a name="a108"></a><br />108   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>boolean </em><a name="a109"></a><br />109   <font color="#009999">     */</font><a name="a110"></a><br />110       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$debugging">$debugging</a>       =  false;<a name="a111"></a><br />111   <a name="a112"></a><br />112       <font color="#009999">/**</font><a name="a113"></a><br />113   <font color="#009999">     * This is the path to the debug console template. If not set,</font><a name="a114"></a><br />114   <font color="#009999">     * the default one will be used.</font><a name="a115"></a><br />115   <font color="#009999">     * </font><a name="a116"></a><br />116   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>string </em><a name="a117"></a><br />117   <font color="#009999">     */</font><a name="a118"></a><br />118       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$debug_tpl">$debug_tpl</a>       =  <font color="#66cccc">''</font>;<a name="a119"></a><br />119   <a name="a120"></a><br />120       <font color="#009999">/**</font><a name="a121"></a><br />121   <font color="#009999">     * This determines if debugging is enable-able from the browser.</font><a name="a122"></a><br />122   <font color="#009999">     * &lt;ul&gt;</font><a name="a123"></a><br />123   <font color="#009999">     *  &lt;li&gt;NONE =&gt; no debugging control allowed&lt;/li&gt;</font><a name="a124"></a><br />124   <font color="#009999">     *  &lt;li&gt;URL =&gt; enable debugging when SMARTY_DEBUG is found in the URL.&lt;/li&gt;</font><a name="a125"></a><br />125   <font color="#009999">     * &lt;/ul&gt;</font><a name="a126"></a><br />126   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@link</font></strong><font color="#009999"> http://www.foo.dom/index.php?SMARTY_DEBUG</font><a name="a127"></a><br />127   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>string </em><a name="a128"></a><br />128   <font color="#009999">     */</font><a name="a129"></a><br />129       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$debugging_ctrl">$debugging_ctrl</a>  =  <font color="#66cccc">'NONE'</font>;<a name="a130"></a><br />130   <a name="a131"></a><br />131       <font color="#009999">/**</font><a name="a132"></a><br />132   <font color="#009999">     * This tells Smarty whether to check for recompiling or not. Recompiling</font><a name="a133"></a><br />133   <font color="#009999">     * does not need to happen unless a template or config file is changed.</font><a name="a134"></a><br />134   <font color="#009999">     * Typically you enable this during development, and disable for</font><a name="a135"></a><br />135   <font color="#009999">     * production.</font><a name="a136"></a><br />136   <font color="#009999">     * </font><a name="a137"></a><br />137   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>boolean </em><a name="a138"></a><br />138   <font color="#009999">     */</font><a name="a139"></a><br />139       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$compile_check">$compile_check</a>   =  true;<a name="a140"></a><br />140   <a name="a141"></a><br />141       <font color="#009999">/**</font><a name="a142"></a><br />142   <font color="#009999">     * This forces templates to compile every time. Useful for development</font><a name="a143"></a><br />143   <font color="#009999">     * or debugging.</font><a name="a144"></a><br />144   <font color="#009999">     * </font><a name="a145"></a><br />145   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>boolean </em><a name="a146"></a><br />146   <font color="#009999">     */</font><a name="a147"></a><br />147       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$force_compile">$force_compile</a>   =  false;<a name="a148"></a><br />148   <a name="a149"></a><br />149       <font color="#009999">/**</font><a name="a150"></a><br />150   <font color="#009999">     * This enables template caching.</font><a name="a151"></a><br />151   <font color="#009999">     * &lt;ul&gt;</font><a name="a152"></a><br />152   <font color="#009999">     *  &lt;li&gt;0 = no caching&lt;/li&gt;</font><a name="a153"></a><br />153   <font color="#009999">     *  &lt;li&gt;1 = use class cache_lifetime value&lt;/li&gt;</font><a name="a154"></a><br />154   <font color="#009999">     *  &lt;li &gt;2 = use cache_lifetime in cache file&lt;/li&gt;</font><a name="a155"></a><br />155   <font color="#009999">     * &lt;/ul&gt;</font><a name="a156"></a><br />156   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>integer </em><a name="a157"></a><br />157   <font color="#009999">     */</font><a name="a158"></a><br />158       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$caching">$caching</a>         =  0;<a name="a159"></a><br />159   <a name="a160"></a><br />160       <font color="#009999">/**</font><a name="a161"></a><br />161   <font color="#009999">     * The name of the directory for cache files.</font><a name="a162"></a><br />162   <font color="#009999">     * </font><a name="a163"></a><br />163   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>string </em><a name="a164"></a><br />164   <font color="#009999">     */</font><a name="a165"></a><br />165       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$cache_dir">$cache_dir</a>       =  <font color="#66cccc">'cache'</font>;<a name="a166"></a><br />166   <a name="a167"></a><br />167       <font color="#009999">/**</font><a name="a168"></a><br />168   <font color="#009999">     * This is the number of seconds cached content will persist.</font><a name="a169"></a><br />169   <font color="#009999">     * &lt;ul&gt;</font><a name="a170"></a><br />170   <font color="#009999">     *  &lt;li&gt;0 = always regenerate cache&lt;/li&gt;</font><a name="a171"></a><br />171   <font color="#009999">     *  &lt;li&gt;-1 = never expires&lt;/li&gt;</font><a name="a172"></a><br />172   <font color="#009999">     * &lt;/ul&gt;</font><a name="a173"></a><br />173   <font color="#009999">     * </font><a name="a174"></a><br />174   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>integer </em><a name="a175"></a><br />175   <font color="#009999">     */</font><a name="a176"></a><br />176       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$cache_lifetime">$cache_lifetime</a>  =  3600;<a name="a177"></a><br />177   <a name="a178"></a><br />178       <font color="#009999">/**</font><a name="a179"></a><br />179   <font color="#009999">     * Only used when $caching is enabled. If true, then If-Modified-Since headers</font><a name="a180"></a><br />180   <font color="#009999">     * are respected with cached content, and appropriate HTTP headers are sent.</font><a name="a181"></a><br />181   <font color="#009999">     * This way repeated hits to a cached page do not send the entire page to the</font><a name="a182"></a><br />182   <font color="#009999">     * client every time.</font><a name="a183"></a><br />183   <font color="#009999">     * </font><a name="a184"></a><br />184   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>boolean </em><a name="a185"></a><br />185   <font color="#009999">     */</font><a name="a186"></a><br />186       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$cache_modified_check">$cache_modified_check</a> = false;<a name="a187"></a><br />187   <a name="a188"></a><br />188       <font color="#009999">/**</font><a name="a189"></a><br />189   <font color="#009999">     * This determines how Smarty handles &lt;?php ?&gt; tags in templates.</font><a name="a190"></a><br />190   <font color="#009999">     * possible values:</font><a name="a191"></a><br />191   <font color="#009999">     * &lt;ul&gt;</font><a name="a192"></a><br />192   <font color="#009999">     *  &lt;li&gt;SMARTY_PHP_PASSTHRU -&gt; print tags as plain text&lt;/li&gt;</font><a name="a193"></a><br />193   <font color="#009999">     *  &lt;li&gt;SMARTY_PHP_QUOTE    -&gt; escape tags as entities&lt;/li&gt;</font><a name="a194"></a><br />194   <font color="#009999">     *  &lt;li&gt;SMARTY_PHP_REMOVE   -&gt; remove php tags&lt;/li&gt;</font><a name="a195"></a><br />195   <font color="#009999">     *  &lt;li&gt;SMARTY_PHP_ALLOW    -&gt; execute php tags&lt;/li&gt;</font><a name="a196"></a><br />196   <font color="#009999">     * &lt;/ul&gt;</font><a name="a197"></a><br />197   <font color="#009999">     *</font><a name="a198"></a><br />198   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>integer </em><a name="a199"></a><br />199   <font color="#009999">     */</font><a name="a200"></a><br />200       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$php_handling">$php_handling</a>    =  SMARTY_PHP_PASSTHRU;<a name="a201"></a><br />201   <a name="a202"></a><br />202       <font color="#009999">/**</font><a name="a203"></a><br />203   <font color="#009999">     * This enables template security. When enabled, many things are restricted</font><a name="a204"></a><br />204   <font color="#009999">     * in the templates that normally would go unchecked. This is useful when</font><a name="a205"></a><br />205   <font color="#009999">     * untrusted parties are editing templates and you want a reasonable level</font><a name="a206"></a><br />206   <font color="#009999">     * of security. (no direct execution of PHP in templates for example)</font><a name="a207"></a><br />207   <font color="#009999">     * </font><a name="a208"></a><br />208   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>boolean </em><a name="a209"></a><br />209   <font color="#009999">     */</font><a name="a210"></a><br />210       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$security">$security</a>       =   false;<a name="a211"></a><br />211   <a name="a212"></a><br />212       <font color="#009999">/**</font><a name="a213"></a><br />213   <font color="#009999">     * This is the list of template directories that are considered secure. This</font><a name="a214"></a><br />214   <font color="#009999">     * is used only if </font><em><font color="#0099FF">{@link $security}</font></em><font color="#009999"> is enabled. One directory per array</font><a name="a215"></a><br />215   <font color="#009999">     * element.  </font><em><font color="#0099FF">{@link $template_dir}</font></em><font color="#009999"> is in this list implicitly.</font><a name="a216"></a><br />216   <font color="#009999">     * </font><a name="a217"></a><br />217   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>array </em><a name="a218"></a><br />218   <font color="#009999">     */</font><a name="a219"></a><br />219       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$secure_dir">$secure_dir</a>     =   array<strong>(</strong><strong>)</strong>;<a name="a220"></a><br />220   <a name="a221"></a><br />221       <font color="#009999">/**</font><a name="a222"></a><br />222   <font color="#009999">     * These are the security settings for Smarty. They are used only when</font><a name="a223"></a><br />223   <font color="#009999">     * </font><em><font color="#0099FF">{@link $security}</font></em><font color="#009999"> is enabled.</font><a name="a224"></a><br />224   <font color="#009999">     * </font><a name="a225"></a><br />225   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>array </em><a name="a226"></a><br />226   <font color="#009999">     */</font><a name="a227"></a><br />227       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$security_settings">$security_settings</a>  = array<strong>(</strong><a name="a228"></a><br />228                                       <font color="#66cccc">'PHP_HANDLING'</font>    =&gt; false<strong>,</strong><a name="a229"></a><br />229                                       <font color="#66cccc">'IF_FUNCS'</font>        =&gt; array<strong>(</strong><font color="#66cccc">'array'</font><strong>,</strong> <font color="#66cccc">'list'</font><strong>,</strong><a name="a230"></a><br />230                                                                  <font color="#66cccc">'isset'</font><strong>,</strong> <font color="#66cccc">'empty'</font><strong>,</strong><a name="a231"></a><br />231                                                                  <font color="#66cccc">'count'</font><strong>,</strong> <font color="#66cccc">'sizeof'</font><strong>,</strong><a name="a232"></a><br />232                                                                  <font color="#66cccc">'in_array'</font><strong>,</strong> <font color="#66cccc">'is_array'</font><strong>,</strong><a name="a233"></a><br />233                                                                  <font color="#66cccc">'true'</font><strong>,</strong><font color="#66cccc">'false'</font><strong>)</strong><strong>,</strong><a name="a234"></a><br />234                                       <font color="#66cccc">'INCLUDE_ANY'</font>     =&gt; false<strong>,</strong><a name="a235"></a><br />235                                       <font color="#66cccc">'PHP_TAGS'</font>        =&gt; false<strong>,</strong><a name="a236"></a><br />236                                       <font color="#66cccc">'MODIFIER_FUNCS'</font>  =&gt; array<strong>(</strong><font color="#66cccc">'count'</font><strong>)</strong><strong>,</strong><a name="a237"></a><br />237                                       <font color="#66cccc">'ALLOW_CONSTANTS'</font> =&gt; false<a name="a238"></a><br />238                                      <strong>)</strong>;<a name="a239"></a><br />239   <a name="a240"></a><br />240       <font color="#009999">/**</font><a name="a241"></a><br />241   <font color="#009999">     * This is an array of directories where trusted php scripts reside.</font><a name="a242"></a><br />242   <font color="#009999">     * </font><em><font color="#0099FF">{@link $security}</font></em><font color="#009999"> is disabled during their inclusion/execution.</font><a name="a243"></a><br />243   <font color="#009999">     *</font><a name="a244"></a><br />244   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>array </em><a name="a245"></a><br />245   <font color="#009999">     */</font><a name="a246"></a><br />246       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$trusted_dir">$trusted_dir</a>        = array<strong>(</strong><strong>)</strong>;<a name="a247"></a><br />247   <a name="a248"></a><br />248       <font color="#009999">/**</font><a name="a249"></a><br />249   <font color="#009999">     * The left delimiter used for the template tags.</font><a name="a250"></a><br />250   <font color="#009999">     * </font><a name="a251"></a><br />251   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>string </em><a name="a252"></a><br />252   <font color="#009999">     */</font><a name="a253"></a><br />253       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$left_delimiter">$left_delimiter</a>  =  <font color="#66cccc">'{'</font>;<a name="a254"></a><br />254   <a name="a255"></a><br />255       <font color="#009999">/**</font><a name="a256"></a><br />256   <font color="#009999">     * The right delimiter used for the template tags.</font><a name="a257"></a><br />257   <font color="#009999">     * </font><a name="a258"></a><br />258   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>string </em><a name="a259"></a><br />259   <font color="#009999">     */</font><a name="a260"></a><br />260       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$right_delimiter">$right_delimiter</a> =  <font color="#66cccc">'}'</font>;<a name="a261"></a><br />261   <a name="a262"></a><br />262       <font color="#009999">/**</font><a name="a263"></a><br />263   <font color="#009999">     * The order in which request variables are registered, similar to</font><a name="a264"></a><br />264   <font color="#009999">     * variables_order in php.ini E = Environment, G = GET, P = POST,</font><a name="a265"></a><br />265   <font color="#009999">     * C = Cookies, S = Server</font><a name="a266"></a><br />266   <font color="#009999">     * </font><a name="a267"></a><br />267   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>string </em><a name="a268"></a><br />268   <font color="#009999">     */</font><a name="a269"></a><br />269       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$request_vars_order">$request_vars_order</a>    = <font color="#66cccc">&quot;EGPCS&quot;</font>; <a name="a270"></a><br />270   <a name="a271"></a><br />271       <font color="#009999">/**</font><a name="a272"></a><br />272   <font color="#009999">     * Set this if you want different sets of compiled files for the same</font><a name="a273"></a><br />273   <font color="#009999">     * templates. This is useful for things like different languages.</font><a name="a274"></a><br />274   <font color="#009999">     * Instead of creating separate sets of templates per language, you</font><a name="a275"></a><br />275   <font color="#009999">     * set different compile_ids like 'en' and 'de'.</font><a name="a276"></a><br />276   <font color="#009999">     *</font><a name="a277"></a><br />277   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>string </em><a name="a278"></a><br />278   <font color="#009999">     */</font><a name="a279"></a><br />279       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$compile_id">$compile_id</a>            = null;<a name="a280"></a><br />280   <a name="a281"></a><br />281       <font color="#009999">/**</font><a name="a282"></a><br />282   <font color="#009999">     * This tells Smarty whether or not to use sub dirs in the cache/ and</font><a name="a283"></a><br />283   <font color="#009999">     * templates_c/ directories. sub directories better organized, but</font><a name="a284"></a><br />284   <font color="#009999">     * may not work well with PHP safe mode enabled.</font><a name="a285"></a><br />285   <font color="#009999">     * </font><a name="a286"></a><br />286   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>boolean </em><a name="a287"></a><br />287   <font color="#009999">     * </font><a name="a288"></a><br />288   <font color="#009999">     */</font><a name="a289"></a><br />289       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$use_sub_dirs">$use_sub_dirs</a>          = true;<a name="a290"></a><br />290   <a name="a291"></a><br />291       <font color="#009999">/**</font><a name="a292"></a><br />292   <font color="#009999">     * This is a list of the modifiers to apply to all template variables.</font><a name="a293"></a><br />293   <font color="#009999">     * Put each modifier in a separate array element in the order you want</font><a name="a294"></a><br />294   <font color="#009999">     * them applied. example: &lt;code&gt;array('escape:&quot;htmlall&quot;');&lt;/code&gt;</font><a name="a295"></a><br />295   <font color="#009999">     *</font><a name="a296"></a><br />296   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>array </em><a name="a297"></a><br />297   <font color="#009999">     */</font><a name="a298"></a><br />298       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$default_modifiers">$default_modifiers</a>        = array<strong>(</strong><strong>)</strong>;<a name="a299"></a><br />299   <a name="a300"></a><br />300       <font color="#009999">/**</font><a name="a301"></a><br />301   <font color="#009999">     * The function used for cache file handling. If not set, built-in caching is used.</font><a name="a302"></a><br />302   <font color="#009999">     * </font><a name="a303"></a><br />303   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>null</em><font color="#009999">|</font><em>string</em><font color="#009999"></font><font color="#009999">function name</font><a name="a304"></a><br />304   <font color="#009999">     */</font><a name="a305"></a><br />305       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$cache_handler_func">$cache_handler_func</a>   = null;<a name="a306"></a><br />306        <a name="a307"></a><br />307       <font color="#009999">/**</font><a name="a308"></a><br />308   <font color="#009999">     * These are the variables from the globals array that are</font><a name="a309"></a><br />309   <font color="#009999">     * assigned to all templates automatically. This isn't really</font><a name="a310"></a><br />310   <font color="#009999">     * necessary any more, you can use the $smarty var to access them</font><a name="a311"></a><br />311   <font color="#009999">     * directly.</font><a name="a312"></a><br />312   <font color="#009999">     * </font><a name="a313"></a><br />313   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>array </em><a name="a314"></a><br />314   <font color="#009999">     */</font><a name="a315"></a><br />315       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$global_assign">$global_assign</a>   =  array<strong>(</strong><font color="#66cccc">'HTTP_SERVER_VARS'</font> =&gt; array<strong>(</strong><font color="#66cccc">'SCRIPT_NAME'</font><strong>)</strong><strong>)</strong>;<a name="a316"></a><br />316   <a name="a317"></a><br />317       <font color="#009999">/**</font><a name="a318"></a><br />318   <font color="#009999">     * The value of &quot;undefined&quot;. Leave it alone :-)</font><a name="a319"></a><br />319   <font color="#009999">     * </font><a name="a320"></a><br />320   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>null </em><a name="a321"></a><br />321   <font color="#009999">     */</font><a name="a322"></a><br />322       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$undefined">$undefined</a>       =  null;<a name="a323"></a><br />323   <a name="a324"></a><br />324       <font color="#009999">/**</font><a name="a325"></a><br />325   <font color="#009999">     * This indicates which filters are automatically loaded into Smarty.</font><a name="a326"></a><br />326   <font color="#009999">     * </font><a name="a327"></a><br />327   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>array </em><font color="#009999"></font><font color="#009999">array of filter names</font><a name="a328"></a><br />328   <font color="#009999">     */</font><a name="a329"></a><br />329       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$autoload_filters">$autoload_filters</a> = array<strong>(</strong><strong>)</strong>;<a name="a330"></a><br />330   <a name="a331"></a><br />331       <font color="blue">/**#@+</font color="blue"><a name="a332"></a><br />332   <font color="blue">     *</font color="blue"><font color="blue"> </font color="blue"><strong><font color = "#0099FF">@var </font></strong><font color="blue"></font color="blue"><em>boolean </em><a name="a333"></a><br />333   <font color="blue">     */</font color="blue">     <a name="a334"></a><br />334       <font color="#009999">/**</font><a name="a335"></a><br />335   <font color="#009999">     * This tells if config file vars of the same name overwrite each other or not.</font><a name="a336"></a><br />336   <font color="#009999">     * if disabled, same name variables are accumulated in an array.</font><a name="a337"></a><br />337   <font color="#009999">     */</font><a name="a338"></a><br />338       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$config_overwrite">$config_overwrite</a> = true;<a name="a339"></a><br />339   <a name="a340"></a><br />340       <font color="#009999">/**</font><a name="a341"></a><br />341   <font color="#009999">     * This tells whether or not to automatically booleanize config file variables.</font><a name="a342"></a><br />342   <font color="#009999">     * If enabled, then the strings &quot;on&quot;, &quot;true&quot;, and &quot;yes&quot; are treated as boolean</font><a name="a343"></a><br />343   <font color="#009999">     * true, and &quot;off&quot;, &quot;false&quot; and &quot;no&quot; are treated as boolean false.</font><a name="a344"></a><br />344   <font color="#009999">     */</font><a name="a345"></a><br />345       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$config_booleanize">$config_booleanize</a> = true;<a name="a346"></a><br />346   <a name="a347"></a><br />347       <font color="#009999">/**</font><a name="a348"></a><br />348   <font color="#009999">     * This tells whether hidden sections [.foobar] are readable from the</font><a name="a349"></a><br />349   <font color="#009999">     * tempalates or not. Normally you would never allow this since that is</font><a name="a350"></a><br />350   <font color="#009999">     * the point behind hidden sections: the application can access them, but</font><a name="a351"></a><br />351   <font color="#009999">     * the templates cannot.</font><a name="a352"></a><br />352   <font color="#009999">     */</font><a name="a353"></a><br />353       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$config_read_hidden">$config_read_hidden</a> = false;<a name="a354"></a><br />354   <a name="a355"></a><br />355       <font color="#009999">/**</font><a name="a356"></a><br />356   <font color="#009999">     * This tells whether or not automatically fix newlines in config files.</font><a name="a357"></a><br />357   <font color="#009999">     * It basically converts \r (mac) or \r\n (dos) to \n</font><a name="a358"></a><br />358   <font color="#009999">     */</font><a name="a359"></a><br />359       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$config_fix_newlines">$config_fix_newlines</a> = true;<a name="a360"></a><br />360       <strong><font color="blue">/**#@-*/</font></strong><a name="a361"></a><br />361        <a name="a362"></a><br />362       <font color="#009999">/**</font><a name="a363"></a><br />363   <font color="#009999">     * If a template cannot be found, this PHP function will be executed.</font><a name="a364"></a><br />364   <font color="#009999">     * Useful for creating templates on-the-fly or other special action.</font><a name="a365"></a><br />365   <font color="#009999">     * </font><a name="a366"></a><br />366   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><font color="#009999">function name</font><a name="a367"></a><br />367   <font color="#009999">     */</font><a name="a368"></a><br />368       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$default_template_handler_func">$default_template_handler_func</a> = <font color="#66cccc">''</font>;<a name="a369"></a><br />369   <a name="a370"></a><br />370       <font color="#009999">/**</font><a name="a371"></a><br />371   <font color="#009999">     * The file that contains the compiler class. This can a full</font><a name="a372"></a><br />372   <font color="#009999">     * pathname, or relative to the php_include path.</font><a name="a373"></a><br />373   <font color="#009999">     * </font><a name="a374"></a><br />374   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>string </em><a name="a375"></a><br />375   <font color="#009999">     */</font><a name="a376"></a><br />376       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$compiler_file">$compiler_file</a>        =    <font color="#66cccc">'Smarty_Compiler.class.php'</font>;<a name="a377"></a><br />377   <a name="a378"></a><br />378       <font color="#009999">/**</font><a name="a379"></a><br />379   <font color="#009999">     * The class used for compiling templates.</font><a name="a380"></a><br />380   <font color="#009999">     * </font><a name="a381"></a><br />381   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>string </em><a name="a382"></a><br />382   <font color="#009999">     */</font><a name="a383"></a><br />383       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$compiler_class">$compiler_class</a>        =   <font color="#66cccc">'Smarty_Compiler'</font>;<a name="a384"></a><br />384   <a name="a385"></a><br />385       <font color="#009999">/**</font><a name="a386"></a><br />386   <font color="#009999">     * The class used to load config vars.</font><a name="a387"></a><br />387   <font color="#009999">     *</font><a name="a388"></a><br />388   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>string </em><a name="a389"></a><br />389   <font color="#009999">     */</font><a name="a390"></a><br />390       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$config_class">$config_class</a>          =   <font color="#66cccc">'Config_File'</font>;<a name="a391"></a><br />391   <a name="a392"></a><br />392   <font color="blue">/**#@+</font color="blue"><a name="a393"></a><br />393   <font color="blue"> * END Smarty Configuration Section</font color="blue"><a name="a394"></a><br />394   <font color="blue"> * There should be no need to touch anything below this line.</font color="blue"><a name="a395"></a><br />395   <font color="blue"> *</font color="blue"><font color="blue"> </font color="blue"><strong><font color = "#0099FF">@access</font></strong><font color="blue"> private</font color="blue"><a name="a396"></a><br />396   <font color="blue"> */</font color="blue"><a name="a397"></a><br />397       <font color="#009999">/**</font><a name="a398"></a><br />398   <font color="#009999">     * error messages. true/false</font><a name="a399"></a><br />399   <font color="#009999">     *</font><a name="a400"></a><br />400   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>boolean </em><a name="a401"></a><br />401   <font color="#009999">     */</font><a name="a402"></a><br />402       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$_error_msg">$_error_msg</a>            = false;<a name="a403"></a><br />403   <a name="a404"></a><br />404       <font color="#009999">/**</font><a name="a405"></a><br />405   <font color="#009999">     * where assigned template vars are kept</font><a name="a406"></a><br />406   <font color="#009999">     *</font><a name="a407"></a><br />407   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>array </em><a name="a408"></a><br />408   <font color="#009999">     */</font><a name="a409"></a><br />409       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$_tpl_vars">$_tpl_vars</a>             = array<strong>(</strong><strong>)</strong>;<a name="a410"></a><br />410   <a name="a411"></a><br />411       <font color="#009999">/**</font><a name="a412"></a><br />412   <font color="#009999">     * stores run-time $smarty.* vars</font><a name="a413"></a><br />413   <font color="#009999">     *</font><a name="a414"></a><br />414   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>null</em><font color="#009999">|</font><em>array</em><a name="a415"></a><br />415   <font color="#009999">     */</font><a name="a416"></a><br />416       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$_smarty_vars">$_smarty_vars</a>          = null;<a name="a417"></a><br />417   <a name="a418"></a><br />418       <font color="#009999">/**</font><a name="a419"></a><br />419   <font color="#009999">     * keeps track of sections</font><a name="a420"></a><br />420   <font color="#009999">     *</font><a name="a421"></a><br />421   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>array </em><a name="a422"></a><br />422   <font color="#009999">     */</font><a name="a423"></a><br />423       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$_sections">$_sections</a>             = array<strong>(</strong><strong>)</strong>;<a name="a424"></a><br />424   <a name="a425"></a><br />425       <font color="#009999">/**</font><a name="a426"></a><br />426   <font color="#009999">     * keeps track of foreach blocks</font><a name="a427"></a><br />427   <font color="#009999">     *</font><a name="a428"></a><br />428   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>array </em><a name="a429"></a><br />429   <font color="#009999">     */</font><a name="a430"></a><br />430       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$_foreach">$_foreach</a>              = array<strong>(</strong><strong>)</strong>;<a name="a431"></a><br />431   <a name="a432"></a><br />432       <font color="#009999">/**</font><a name="a433"></a><br />433   <font color="#009999">     * keeps track of tag hierarchy</font><a name="a434"></a><br />434   <font color="#009999">     *</font><a name="a435"></a><br />435   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>array </em><a name="a436"></a><br />436   <font color="#009999">     */</font><a name="a437"></a><br />437       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$_tag_stack">$_tag_stack</a>            = array<strong>(</strong><strong>)</strong>;<a name="a438"></a><br />438   <a name="a439"></a><br />439       <font color="#009999">/**</font><a name="a440"></a><br />440   <font color="#009999">     * configuration object</font><a name="a441"></a><br />441   <font color="#009999">     *</font><a name="a442"></a><br />442   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>Config_file </em><a name="a443"></a><br />443   <font color="#009999">     */</font><a name="a444"></a><br />444       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$_conf_obj">$_conf_obj</a>             = null;<a name="a445"></a><br />445   <a name="a446"></a><br />446       <font color="#009999">/**</font><a name="a447"></a><br />447   <font color="#009999">     * loaded configuration settings</font><a name="a448"></a><br />448   <font color="#009999">     *</font><a name="a449"></a><br />449   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>array </em><a name="a450"></a><br />450   <font color="#009999">     */</font><a name="a451"></a><br />451       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$_config">$_config</a>               = array<strong>(</strong>array<strong>(</strong><font color="#66cccc">'vars'</font>  =&gt; array<strong>(</strong><strong>)</strong><strong>,</strong> <font color="#66cccc">'files'</font> =&gt; array<strong>(</strong><strong>)</strong><strong>)</strong><strong>)</strong>;<a name="a452"></a><br />452   <a name="a453"></a><br />453       <font color="#009999">/**</font><a name="a454"></a><br />454   <font color="#009999">     * md5 checksum of the string 'Smarty'</font><a name="a455"></a><br />455   <font color="#009999">     *</font><a name="a456"></a><br />456   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>string </em><a name="a457"></a><br />457   <font color="#009999">     */</font><a name="a458"></a><br />458       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$_smarty_md5">$_smarty_md5</a>           = <font color="#66cccc">'f8d698aea36fcbead2b9d5359ffca76f'</font>;<a name="a459"></a><br />459   <a name="a460"></a><br />460       <font color="#009999">/**</font><a name="a461"></a><br />461   <font color="#009999">     * Smarty version number</font><a name="a462"></a><br />462   <font color="#009999">     *</font><a name="a463"></a><br />463   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>string </em><a name="a464"></a><br />464   <font color="#009999">     */</font><a name="a465"></a><br />465       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$_version">$_version</a>              = <font color="#66cccc">'2.5.0'</font>;<a name="a466"></a><br />466   <a name="a467"></a><br />467       <font color="#009999">/**</font><a name="a468"></a><br />468   <font color="#009999">     * current template inclusion depth</font><a name="a469"></a><br />469   <font color="#009999">     *</font><a name="a470"></a><br />470   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>integer </em><a name="a471"></a><br />471   <font color="#009999">     */</font><a name="a472"></a><br />472       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$_inclusion_depth">$_inclusion_depth</a>      = 0;<a name="a473"></a><br />473   <a name="a474"></a><br />474       <font color="#009999">/**</font><a name="a475"></a><br />475   <font color="#009999">     * for different compiled templates</font><a name="a476"></a><br />476   <font color="#009999">     *</font><a name="a477"></a><br />477   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>string </em><a name="a478"></a><br />478   <font color="#009999">     */</font><a name="a479"></a><br />479       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$_compile_id">$_compile_id</a>           = null;<a name="a480"></a><br />480   <a name="a481"></a><br />481       <font color="#009999">/**</font><a name="a482"></a><br />482   <font color="#009999">     * text in URL to enable debug mode</font><a name="a483"></a><br />483   <font color="#009999">     *</font><a name="a484"></a><br />484   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>string </em><a name="a485"></a><br />485   <font color="#009999">     */</font><a name="a486"></a><br />486       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$_smarty_debug_id">$_smarty_debug_id</a>      = <font color="#66cccc">'SMARTY_DEBUG'</font>;<a name="a487"></a><br />487   <a name="a488"></a><br />488       <font color="#009999">/**</font><a name="a489"></a><br />489   <font color="#009999">     * debugging information for debug console</font><a name="a490"></a><br />490   <font color="#009999">     *</font><a name="a491"></a><br />491   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>array </em><a name="a492"></a><br />492   <font color="#009999">     */</font><a name="a493"></a><br />493       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$_smarty_debug_info">$_smarty_debug_info</a>    = array<strong>(</strong><strong>)</strong>;<a name="a494"></a><br />494   <a name="a495"></a><br />495       <font color="#009999">/**</font><a name="a496"></a><br />496   <font color="#009999">     * info that makes up a cache file</font><a name="a497"></a><br />497   <font color="#009999">     *</font><a name="a498"></a><br />498   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>array </em><a name="a499"></a><br />499   <font color="#009999">     */</font><a name="a500"></a><br />500       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$_cache_info">$_cache_info</a>           = array<strong>(</strong><strong>)</strong>;<a name="a501"></a><br />501   <a name="a502"></a><br />502       <font color="#009999">/**</font><a name="a503"></a><br />503   <font color="#009999">     * default file permissions</font><a name="a504"></a><br />504   <font color="#009999">     *</font><a name="a505"></a><br />505   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>integer </em><a name="a506"></a><br />506   <font color="#009999">     */</font><a name="a507"></a><br />507       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$_file_perms">$_file_perms</a>           = 0644;<a name="a508"></a><br />508   <a name="a509"></a><br />509       <font color="#009999">/**</font><a name="a510"></a><br />510   <font color="#009999">     * default dir permissions</font><a name="a511"></a><br />511   <font color="#009999">     *</font><a name="a512"></a><br />512   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>integer </em><a name="a513"></a><br />513   <font color="#009999">     */</font><a name="a514"></a><br />514       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$_dir_perms">$_dir_perms</a>               = 0771;<a name="a515"></a><br />515   <a name="a516"></a><br />516       <font color="#009999">/**</font><a name="a517"></a><br />517   <font color="#009999">     * registered objects</font><a name="a518"></a><br />518   <font color="#009999">     *</font><a name="a519"></a><br />519   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>array </em><a name="a520"></a><br />520   <font color="#009999">     */</font><a name="a521"></a><br />521       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$_reg_objects">$_reg_objects</a>           = array<strong>(</strong><strong>)</strong>;<a name="a522"></a><br />522   <a name="a523"></a><br />523       <font color="#009999">/**</font><a name="a524"></a><br />524   <font color="#009999">     * table keeping track of plugins</font><a name="a525"></a><br />525   <font color="#009999">     *</font><a name="a526"></a><br />526   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@var </font></strong><font color="#009999"></font><em>array </em><a name="a527"></a><br />527   <font color="#009999">     */</font><a name="a528"></a><br />528       <font color="blue">var</font> <a href="../Smarty/Smarty.html#var$_plugins">$_plugins</a>              = array<strong>(</strong><a name="a529"></a><br />529                                          <font color="#66cccc">'modifier'</font>      =&gt; array<strong>(</strong><strong>)</strong><strong>,</strong><a name="a530"></a><br />530                                          <font color="#66cccc">'function'</font>      =&gt; array<strong>(</strong><strong>)</strong><strong>,</strong><a name="a531"></a><br />531                                          <font color="#66cccc">'block'</font>         =&gt; array<strong>(</strong><strong>)</strong><strong>,</strong><a name="a532"></a><br />532                                          <font color="#66cccc">'compiler'</font>      =&gt; array<strong>(</strong><strong>)</strong><strong>,</strong><a name="a533"></a><br />533                                          <font color="#66cccc">'prefilter'</font>     =&gt; array<strong>(</strong><strong>)</strong><strong>,</strong><a name="a534"></a><br />534                                          <font color="#66cccc">'postfilter'</font>    =&gt; array<strong>(</strong><strong>)</strong><strong>,</strong><a name="a535"></a><br />535                                          <font color="#66cccc">'outputfilter'</font>  =&gt; array<strong>(</strong><strong>)</strong><strong>,</strong><a name="a536"></a><br />536                                          <font color="#66cccc">'resource'</font>      =&gt; array<strong>(</strong><strong>)</strong><strong>,</strong><a name="a537"></a><br />537                                          <font color="#66cccc">'insert'</font>        =&gt; array<strong>(</strong><strong>)</strong><strong>)</strong>;<a name="a538"></a><br />538   <a name="a539"></a><br />539       <strong><font color="blue">/**#@-*/</font></strong><a name="a540"></a><br />540       <font color="#009999">/**</font><a name="a541"></a><br />541   <font color="#009999">     * The class constructor.</font><a name="a542"></a><br />542   <font color="#009999">     *</font><a name="a543"></a><br />543   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@uses</font></strong><font color="#009999"> $global_assign uses </font><em><font color="#0099FF">{@link assign()}</font></em><font color="#009999"> to assign each corresponding</font><a name="a544"></a><br />544   <font color="#009999">     *</font><font color="#009999"> </font><font color="#009999">                      value from $GLOBALS to the template vars</font><a name="a545"></a><br />545   <font color="#009999">     */</font><a name="a546"></a><br />546       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodSmarty">Smarty</a><strong>(</strong><strong>)</strong><a name="a547"></a><br />547       <strong>{</strong><a name="a548"></a><br />548           <font color="blue">foreach</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$global_assign">global_assign</a> as <strong>$key</strong> =&gt; <strong>$var_name</strong><strong>)</strong> <strong>{</strong><a name="a549"></a><br />549               <font color="blue">if</font> <strong>(</strong><a href="http://www.php.net/is_array">is_array</a><strong>(</strong><strong>$var_name</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a550"></a><br />550                   <font color="blue">foreach</font> <strong>(</strong><strong>$var_name</strong> as <strong>$var</strong><strong>)</strong> <strong>{</strong><a name="a551"></a><br />551                       <font color="blue">if</font> <strong>(</strong>isset<strong>(</strong><strong>$GLOBALS</strong><strong>[</strong><strong>$key</strong><strong>]</strong><strong>[</strong><strong>$var</strong><strong>]</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a552"></a><br />552                           <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#methodassign">assign</a><strong>(</strong><strong>$var</strong><strong>,</strong> <strong>$GLOBALS</strong><strong>[</strong><strong>$key</strong><strong>]</strong><strong>[</strong><strong>$var</strong><strong>]</strong><strong>)</strong>;<a name="a553"></a><br />553                       <strong>}</strong> else <strong>{</strong><a name="a554"></a><br />554                           <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#methodassign">assign</a><strong>(</strong><strong>$var</strong><strong>,</strong> <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$undefined">undefined</a><strong>)</strong>;<a name="a555"></a><br />555                       <strong>}</strong><a name="a556"></a><br />556                   <strong>}</strong><a name="a557"></a><br />557               <strong>}</strong> else <strong>{</strong><a name="a558"></a><br />558                   <font color="blue">if</font> <strong>(</strong>isset<strong>(</strong><strong>$GLOBALS</strong><strong>[</strong><strong>$var_name</strong><strong>]</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a559"></a><br />559                       <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#methodassign">assign</a><strong>(</strong><strong>$var_name</strong><strong>,</strong> <strong>$GLOBALS</strong><strong>[</strong><strong>$var_name</strong><strong>]</strong><strong>)</strong>;<a name="a560"></a><br />560                   <strong>}</strong> else <strong>{</strong><a name="a561"></a><br />561                       <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#methodassign">assign</a><strong>(</strong><strong>$var_name</strong><strong>,</strong> <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$undefined">undefined</a><strong>)</strong>;<a name="a562"></a><br />562                   <strong>}</strong><a name="a563"></a><br />563               <strong>}</strong><a name="a564"></a><br />564           <strong>}</strong><a name="a565"></a><br />565       <strong>}</strong><a name="a566"></a><br />566   <a name="a567"></a><br />567   <a name="a568"></a><br />568       <font color="#009999">/**</font><a name="a569"></a><br />569   <font color="#009999">     * assigns values to template variables</font><a name="a570"></a><br />570   <font color="#009999">     *</font><a name="a571"></a><br />571   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>array</em><font color="#009999">|</font><em>string</em><strong>$tpl_var </strong><font color="#009999">the template variable name(s)</font><a name="a572"></a><br />572   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>mixed </em><font color="#009999"></font><strong>$value </strong><font color="#009999">the value to assign</font><a name="a573"></a><br />573   <font color="#009999">     */</font><a name="a574"></a><br />574       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodassign">assign</a><strong>(</strong><strong>$tpl_var</strong><strong>,</strong> <strong>$value</strong> = null<strong>)</strong><a name="a575"></a><br />575       <strong>{</strong><a name="a576"></a><br />576           <font color="blue">if</font> <strong>(</strong><a href="http://www.php.net/is_array">is_array</a><strong>(</strong><strong>$tpl_var</strong><strong>)</strong><strong>)</strong><strong>{</strong><a name="a577"></a><br />577               <font color="blue">foreach</font> <strong>(</strong><strong>$tpl_var</strong> as <strong>$key</strong> =&gt; <strong>$val</strong><strong>)</strong> <strong>{</strong><a name="a578"></a><br />578                   <font color="blue">if</font> <strong>(</strong><strong>$key</strong> != <font color="#66cccc">''</font><strong>)</strong> <strong>{</strong><a name="a579"></a><br />579                       <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_tpl_vars">_tpl_vars</a><strong>[</strong><strong>$key</strong><strong>]</strong> = <strong>$val</strong>;<a name="a580"></a><br />580                   <strong>}</strong><a name="a581"></a><br />581               <strong>}</strong><a name="a582"></a><br />582           <strong>}</strong> else <strong>{</strong><a name="a583"></a><br />583               <font color="blue">if</font> <strong>(</strong><strong>$tpl_var</strong> != <font color="#66cccc">''</font><strong>)</strong><a name="a584"></a><br />584                   <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_tpl_vars">_tpl_vars</a><strong>[</strong><strong>$tpl_var</strong><strong>]</strong> = <strong>$value</strong>;<a name="a585"></a><br />585           <strong>}</strong><a name="a586"></a><br />586       <strong>}</strong><a name="a587"></a><br />587   <a name="a588"></a><br />588       <font color="#009999">/**</font><a name="a589"></a><br />589   <font color="#009999">     * assigns values to template variables by reference</font><a name="a590"></a><br />590   <font color="#009999">     *</font><a name="a591"></a><br />591   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$tpl_var </strong><font color="#009999">the template variable name</font><a name="a592"></a><br />592   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>mixed </em><font color="#009999"></font><strong>$value </strong><font color="#009999">the referenced value to assign</font><a name="a593"></a><br />593   <font color="#009999">     */</font>    <a name="a594"></a><br />594       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodassign_by_ref">assign_by_ref</a><strong>(</strong><strong>$tpl_var</strong><strong>,</strong> <strong>&amp;</strong><strong>$value</strong><strong>)</strong><a name="a595"></a><br />595       <strong>{</strong><a name="a596"></a><br />596           <font color="blue">if</font> <strong>(</strong><strong>$tpl_var</strong> != <font color="#66cccc">''</font><strong>)</strong><a name="a597"></a><br />597               <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_tpl_vars">_tpl_vars</a><strong>[</strong><strong>$tpl_var</strong><strong>]</strong> = <strong>&amp;</strong><strong>$value</strong>;<a name="a598"></a><br />598       <strong>}</strong><a name="a599"></a><br />599       <a name="a600"></a><br />600       <font color="#009999">/**</font><a name="a601"></a><br />601   <font color="#009999">     * appends values to template variables</font><a name="a602"></a><br />602   <font color="#009999">     *</font><a name="a603"></a><br />603   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>array</em><font color="#009999">|</font><em>string</em><strong>$tpl_var </strong><font color="#009999">the template variable name(s)</font><a name="a604"></a><br />604   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>mixed </em><font color="#009999"></font><strong>$value </strong><font color="#009999">the value to append</font><a name="a605"></a><br />605   <font color="#009999">     */</font>    <a name="a606"></a><br />606       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodappend">append</a><strong>(</strong><strong>$tpl_var</strong><strong>,</strong> <strong>$value</strong>=null<strong>,</strong> <strong>$merge</strong>=false<strong>)</strong><a name="a607"></a><br />607       <strong>{</strong><a name="a608"></a><br />608           <font color="blue">if</font> <strong>(</strong><a href="http://www.php.net/is_array">is_array</a><strong>(</strong><strong>$tpl_var</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a609"></a><br />609               <font color="green">// $tpl_var is an array, ignore $value</font><a name="a610"></a><br />610               <font color="blue">foreach</font> <strong>(</strong><strong>$tpl_var</strong> as <strong>$_key</strong> =&gt; <strong>$_val</strong><strong>)</strong> <strong>{</strong><a name="a611"></a><br />611                   <font color="blue">if</font> <strong>(</strong><strong>$_key</strong> != <font color="#66cccc">''</font><strong>)</strong> <strong>{</strong><a name="a612"></a><br />612                       <font color="blue">if</font><strong>(</strong><strong>!</strong><strong>@</strong><a href="http://www.php.net/is_array">is_array</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_tpl_vars">_tpl_vars</a><strong>[</strong><strong>$_key</strong><strong>]</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a613"></a><br />613                           <a href="http://www.php.net/settype">settype</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_tpl_vars">_tpl_vars</a><strong>[</strong><strong>$_key</strong><strong>]</strong><strong>,</strong><font color="#66cccc">'array'</font><strong>)</strong>;<a name="a614"></a><br />614                       <strong>}</strong><a name="a615"></a><br />615                       <font color="blue">if</font><strong>(</strong><strong>$merge</strong> &amp;&amp; <a href="http://www.php.net/is_array">is_array</a><strong>(</strong><strong>$_val</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a616"></a><br />616                           <font color="blue">foreach</font><strong>(</strong><strong>$_val</strong> as <strong>$_mkey</strong> =&gt; <strong>$_mval</strong><strong>)</strong> <strong>{</strong><a name="a617"></a><br />617                               <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_tpl_vars">_tpl_vars</a><strong>[</strong><strong>$_key</strong><strong>]</strong><strong>[</strong><strong>$_mkey</strong><strong>]</strong> = <strong>$_mval</strong>;<a name="a618"></a><br />618                           <strong>}</strong><a name="a619"></a><br />619                       <strong>}</strong> else <strong>{</strong><a name="a620"></a><br />620                           <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_tpl_vars">_tpl_vars</a><strong>[</strong><strong>$_key</strong><strong>]</strong><strong>[</strong><strong>]</strong> = <strong>$_val</strong>;<a name="a621"></a><br />621                       <strong>}</strong><a name="a622"></a><br />622                   <strong>}</strong><a name="a623"></a><br />623               <strong>}</strong><a name="a624"></a><br />624           <strong>}</strong> else <strong>{</strong><a name="a625"></a><br />625               <font color="blue">if</font> <strong>(</strong><strong>$tpl_var</strong> != <font color="#66cccc">''</font> &amp;&amp; isset<strong>(</strong><strong>$value</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a626"></a><br />626                   <font color="blue">if</font><strong>(</strong><strong>!</strong><strong>@</strong><a href="http://www.php.net/is_array">is_array</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_tpl_vars">_tpl_vars</a><strong>[</strong><strong>$tpl_var</strong><strong>]</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a627"></a><br />627                       <a href="http://www.php.net/settype">settype</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_tpl_vars">_tpl_vars</a><strong>[</strong><strong>$tpl_var</strong><strong>]</strong><strong>,</strong><font color="#66cccc">'array'</font><strong>)</strong>;<a name="a628"></a><br />628                   <strong>}</strong><a name="a629"></a><br />629                   <font color="blue">if</font><strong>(</strong><strong>$merge</strong> &amp;&amp; <a href="http://www.php.net/is_array">is_array</a><strong>(</strong><strong>$value</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a630"></a><br />630                       <font color="blue">foreach</font><strong>(</strong><strong>$value</strong> as <strong>$_mkey</strong> =&gt; <strong>$_mval</strong><strong>)</strong> <strong>{</strong><a name="a631"></a><br />631                           <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_tpl_vars">_tpl_vars</a><strong>[</strong><strong>$tpl_var</strong><strong>]</strong><strong>[</strong><strong>$_mkey</strong><strong>]</strong> = <strong>$_mval</strong>;<a name="a632"></a><br />632                       <strong>}</strong><a name="a633"></a><br />633                   <strong>}</strong> else <strong>{</strong><a name="a634"></a><br />634                       <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_tpl_vars">_tpl_vars</a><strong>[</strong><strong>$tpl_var</strong><strong>]</strong><strong>[</strong><strong>]</strong> = <strong>$value</strong>;<a name="a635"></a><br />635                   <strong>}</strong><a name="a636"></a><br />636               <strong>}</strong><a name="a637"></a><br />637           <strong>}</strong><a name="a638"></a><br />638       <strong>}</strong><a name="a639"></a><br />639   <a name="a640"></a><br />640       <font color="#009999">/**</font><a name="a641"></a><br />641   <font color="#009999">     * appends values to template variables by reference</font><a name="a642"></a><br />642   <font color="#009999">     *</font><a name="a643"></a><br />643   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$tpl_var </strong><font color="#009999">the template variable name</font><a name="a644"></a><br />644   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>mixed </em><font color="#009999"></font><strong>$value </strong><font color="#009999">the referenced value to append</font><a name="a645"></a><br />645   <font color="#009999">     */</font>    <a name="a646"></a><br />646       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodappend_by_ref">append_by_ref</a><strong>(</strong><strong>$tpl_var</strong><strong>,</strong> <strong>&amp;</strong><strong>$value</strong><strong>,</strong> <strong>$merge</strong>=false<strong>)</strong><a name="a647"></a><br />647       <strong>{</strong><a name="a648"></a><br />648           <font color="blue">if</font> <strong>(</strong><strong>$tpl_var</strong> != <font color="#66cccc">''</font> &amp;&amp; isset<strong>(</strong><strong>$value</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a649"></a><br />649               <font color="blue">if</font><strong>(</strong><strong>!</strong><strong>@</strong><a href="http://www.php.net/is_array">is_array</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_tpl_vars">_tpl_vars</a><strong>[</strong><strong>$tpl_var</strong><strong>]</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a650"></a><br />650                <a href="http://www.php.net/settype">settype</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_tpl_vars">_tpl_vars</a><strong>[</strong><strong>$tpl_var</strong><strong>]</strong><strong>,</strong><font color="#66cccc">'array'</font><strong>)</strong>;<a name="a651"></a><br />651               <strong>}</strong><a name="a652"></a><br />652               <font color="blue">if</font> <strong>(</strong><strong>$merge</strong> &amp;&amp; <a href="http://www.php.net/is_array">is_array</a><strong>(</strong><strong>$value</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a653"></a><br />653                   <font color="blue">foreach</font><strong>(</strong><strong>$value</strong> as <strong>$_key</strong> =&gt; <strong>$_val</strong><strong>)</strong> <strong>{</strong><a name="a654"></a><br />654                       <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_tpl_vars">_tpl_vars</a><strong>[</strong><strong>$tpl_var</strong><strong>]</strong><strong>[</strong><strong>$_key</strong><strong>]</strong> = <strong>&amp;</strong><strong>$value</strong><strong>[</strong><strong>$_key</strong><strong>]</strong>;<a name="a655"></a><br />655                   <strong>}</strong><a name="a656"></a><br />656               <strong>}</strong> else <strong>{</strong><a name="a657"></a><br />657                   <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_tpl_vars">_tpl_vars</a><strong>[</strong><strong>$tpl_var</strong><strong>]</strong><strong>[</strong><strong>]</strong> = <strong>&amp;</strong><strong>$value</strong>;<a name="a658"></a><br />658               <strong>}</strong><a name="a659"></a><br />659           <strong>}</strong><a name="a660"></a><br />660       <strong>}</strong><a name="a661"></a><br />661   <a name="a662"></a><br />662   <a name="a663"></a><br />663       <font color="#009999">/**</font><a name="a664"></a><br />664   <font color="#009999">     * clear the given assigned template variable.</font><a name="a665"></a><br />665   <font color="#009999">     *</font><a name="a666"></a><br />666   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$tpl_var </strong><font color="#009999">the template variable to clear</font><a name="a667"></a><br />667   <font color="#009999">     */</font>    <a name="a668"></a><br />668       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodclear_assign">clear_assign</a><strong>(</strong><strong>$tpl_var</strong><strong>)</strong><a name="a669"></a><br />669       <strong>{</strong><a name="a670"></a><br />670           <font color="blue">if</font> <strong>(</strong><a href="http://www.php.net/is_array">is_array</a><strong>(</strong><strong>$tpl_var</strong><strong>)</strong><strong>)</strong><a name="a671"></a><br />671               <font color="blue">foreach</font> <strong>(</strong><strong>$tpl_var</strong> as <strong>$curr_var</strong><strong>)</strong><a name="a672"></a><br />672                   unset<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_tpl_vars">_tpl_vars</a><strong>[</strong><strong>$curr_var</strong><strong>]</strong><strong>)</strong>;<a name="a673"></a><br />673           else<a name="a674"></a><br />674               unset<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_tpl_vars">_tpl_vars</a><strong>[</strong><strong>$tpl_var</strong><strong>]</strong><strong>)</strong>;<a name="a675"></a><br />675       <strong>}</strong><a name="a676"></a><br />676   <a name="a677"></a><br />677   <a name="a678"></a><br />678       <font color="#009999">/**</font><a name="a679"></a><br />679   <font color="#009999">     * Registers custom function to be used in templates</font><a name="a680"></a><br />680   <font color="#009999">     *</font><a name="a681"></a><br />681   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$function </strong><font color="#009999">the name of the template function</font><a name="a682"></a><br />682   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$function_impl </strong><font color="#009999">the name of the PHP function to register</font><a name="a683"></a><br />683   <font color="#009999">     */</font>    <a name="a684"></a><br />684       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodregister_function">register_function</a><strong>(</strong><strong>$function</strong><strong>,</strong> <strong>$function_impl</strong><strong>)</strong><a name="a685"></a><br />685       <strong>{</strong><a name="a686"></a><br />686           <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'function'</font><strong>]</strong><strong>[</strong><strong>$function</strong><strong>]</strong> =<a name="a687"></a><br />687               array<strong>(</strong><strong>$function_impl</strong><strong>,</strong> null<strong>,</strong> null<strong>,</strong> false<strong>)</strong>;<a name="a688"></a><br />688       <strong>}</strong><a name="a689"></a><br />689   <a name="a690"></a><br />690       <font color="#009999">/**</font><a name="a691"></a><br />691   <font color="#009999">     * Unregisters custom function</font><a name="a692"></a><br />692   <font color="#009999">     *</font><a name="a693"></a><br />693   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$function </strong><font color="#009999">name of template function</font><a name="a694"></a><br />694   <font color="#009999">     */</font>    <a name="a695"></a><br />695       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodunregister_function">unregister_function</a><strong>(</strong><strong>$function</strong><strong>)</strong><a name="a696"></a><br />696       <strong>{</strong><a name="a697"></a><br />697           unset<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'function'</font><strong>]</strong><strong>[</strong><strong>$function</strong><strong>]</strong><strong>)</strong>;<a name="a698"></a><br />698       <strong>}</strong><a name="a699"></a><br />699   <a name="a700"></a><br />700       <font color="#009999">/**</font><a name="a701"></a><br />701   <font color="#009999">     * Registers object to be used in templates</font><a name="a702"></a><br />702   <font color="#009999">     *</font><a name="a703"></a><br />703   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$object </strong><font color="#009999">name of template object</font><a name="a704"></a><br />704   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>object </em><font color="#009999"></font><strong>&amp;$object_impl </strong><font color="#009999">the referenced PHP object to register</font><a name="a705"></a><br />705   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>null</em><font color="#009999">|</font><em>array</em><strong>$allowed </strong><font color="#009999">list of allowed methods (empty = all)</font><a name="a706"></a><br />706   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>boolean </em><font color="#009999"></font><strong>$smarty_args </strong><font color="#009999">smarty argument format, else traditional</font><a name="a707"></a><br />707   <font color="#009999">     */</font>    <a name="a708"></a><br />708       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodregister_object">register_object</a><strong>(</strong><strong>$object</strong><strong>,</strong> <strong>&amp;</strong><strong>$object_impl</strong><strong>,</strong> <strong>$allowed</strong> = array<strong>(</strong><strong>)</strong><strong>,</strong> <strong>$smarty_args</strong> = true<strong>)</strong><a name="a709"></a><br />709       <strong>{</strong><a name="a710"></a><br />710           <a href="http://www.php.net/settype">settype</a><strong>(</strong><strong>$allowed</strong><strong>,</strong> <font color="#66cccc">'array'</font><strong>)</strong>;        <a name="a711"></a><br />711           <a href="http://www.php.net/settype">settype</a><strong>(</strong><strong>$smarty_args</strong><strong>,</strong> <font color="#66cccc">'boolean'</font><strong>)</strong>;        <a name="a712"></a><br />712           <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_reg_objects">_reg_objects</a><strong>[</strong><strong>$object</strong><strong>]</strong> =<a name="a713"></a><br />713               array<strong>(</strong><strong>&amp;</strong><strong>$object_impl</strong><strong>,</strong> <strong>$allowed</strong><strong>,</strong> <strong>$smarty_args</strong><strong>)</strong>;<a name="a714"></a><br />714       <strong>}</strong><a name="a715"></a><br />715   <a name="a716"></a><br />716       <font color="#009999">/**</font><a name="a717"></a><br />717   <font color="#009999">     * Unregisters object</font><a name="a718"></a><br />718   <font color="#009999">     *</font><a name="a719"></a><br />719   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$object </strong><font color="#009999">name of template object</font><a name="a720"></a><br />720   <font color="#009999">     */</font>    <a name="a721"></a><br />721       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodunregister_object">unregister_object</a><strong>(</strong><strong>$object</strong><strong>)</strong><a name="a722"></a><br />722       <strong>{</strong><a name="a723"></a><br />723           unset<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_reg_objects">_reg_objects</a><strong>[</strong><strong>$object</strong><strong>]</strong><strong>)</strong>;<a name="a724"></a><br />724       <strong>}</strong><a name="a725"></a><br />725       <a name="a726"></a><br />726       <a name="a727"></a><br />727       <font color="#009999">/**</font><a name="a728"></a><br />728   <font color="#009999">     * Registers block function to be used in templates</font><a name="a729"></a><br />729   <font color="#009999">     *</font><a name="a730"></a><br />730   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$block </strong><font color="#009999">name of template block</font><a name="a731"></a><br />731   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$block_impl </strong><font color="#009999">PHP function to register</font><a name="a732"></a><br />732   <font color="#009999">     */</font>    <a name="a733"></a><br />733       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodregister_block">register_block</a><strong>(</strong><strong>$block</strong><strong>,</strong> <strong>$block_impl</strong><strong>)</strong><a name="a734"></a><br />734       <strong>{</strong><a name="a735"></a><br />735           <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'block'</font><strong>]</strong><strong>[</strong><strong>$block</strong><strong>]</strong> =<a name="a736"></a><br />736               array<strong>(</strong><strong>$block_impl</strong><strong>,</strong> null<strong>,</strong> null<strong>,</strong> false<strong>)</strong>;<a name="a737"></a><br />737       <strong>}</strong><a name="a738"></a><br />738   <a name="a739"></a><br />739       <font color="#009999">/**</font><a name="a740"></a><br />740   <font color="#009999">     * Unregisters block function</font><a name="a741"></a><br />741   <font color="#009999">     *</font><a name="a742"></a><br />742   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$block </strong><font color="#009999">name of template function</font><a name="a743"></a><br />743   <font color="#009999">     */</font>    <a name="a744"></a><br />744       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodunregister_block">unregister_block</a><strong>(</strong><strong>$block</strong><strong>)</strong><a name="a745"></a><br />745       <strong>{</strong><a name="a746"></a><br />746           unset<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'block'</font><strong>]</strong><strong>[</strong><strong>$block</strong><strong>]</strong><strong>)</strong>;<a name="a747"></a><br />747       <strong>}</strong><a name="a748"></a><br />748   <a name="a749"></a><br />749       <font color="#009999">/**</font><a name="a750"></a><br />750   <font color="#009999">     * Registers compiler function</font><a name="a751"></a><br />751   <font color="#009999">     *</font><a name="a752"></a><br />752   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$function </strong><font color="#009999">name of template function</font><a name="a753"></a><br />753   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$function_impl </strong><font color="#009999">name of PHP function to register</font><a name="a754"></a><br />754   <font color="#009999">     */</font>    <a name="a755"></a><br />755       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodregister_compiler_function">register_compiler_function</a><strong>(</strong><strong>$function</strong><strong>,</strong> <strong>$function_impl</strong><strong>)</strong><a name="a756"></a><br />756       <strong>{</strong><a name="a757"></a><br />757           <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'compiler'</font><strong>]</strong><strong>[</strong><strong>$function</strong><strong>]</strong> =<a name="a758"></a><br />758               array<strong>(</strong><strong>$function_impl</strong><strong>,</strong> null<strong>,</strong> null<strong>,</strong> false<strong>)</strong>;<a name="a759"></a><br />759       <strong>}</strong><a name="a760"></a><br />760   <a name="a761"></a><br />761       <font color="#009999">/**</font><a name="a762"></a><br />762   <font color="#009999">     * Unregisters compiler function</font><a name="a763"></a><br />763   <font color="#009999">     *</font><a name="a764"></a><br />764   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$function </strong><font color="#009999">name of template function</font><a name="a765"></a><br />765   <font color="#009999">     */</font>    <a name="a766"></a><br />766       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodunregister_compiler_function">unregister_compiler_function</a><strong>(</strong><strong>$function</strong><strong>)</strong><a name="a767"></a><br />767       <strong>{</strong><a name="a768"></a><br />768           unset<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'compiler'</font><strong>]</strong><strong>[</strong><strong>$function</strong><strong>]</strong><strong>)</strong>;<a name="a769"></a><br />769       <strong>}</strong><a name="a770"></a><br />770   <a name="a771"></a><br />771       <font color="#009999">/**</font><a name="a772"></a><br />772   <font color="#009999">     * Registers modifier to be used in templates</font><a name="a773"></a><br />773   <font color="#009999">     *</font><a name="a774"></a><br />774   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$modifier </strong><font color="#009999">name of template modifier</font><a name="a775"></a><br />775   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$modifier_impl </strong><font color="#009999">name of PHP function to register</font><a name="a776"></a><br />776   <font color="#009999">     */</font>    <a name="a777"></a><br />777       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodregister_modifier">register_modifier</a><strong>(</strong><strong>$modifier</strong><strong>,</strong> <strong>$modifier_impl</strong><strong>)</strong><a name="a778"></a><br />778       <strong>{</strong><a name="a779"></a><br />779           <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'modifier'</font><strong>]</strong><strong>[</strong><strong>$modifier</strong><strong>]</strong> =<a name="a780"></a><br />780               array<strong>(</strong><strong>$modifier_impl</strong><strong>,</strong> null<strong>,</strong> null<strong>,</strong> false<strong>)</strong>;<a name="a781"></a><br />781       <strong>}</strong><a name="a782"></a><br />782   <a name="a783"></a><br />783       <font color="#009999">/**</font><a name="a784"></a><br />784   <font color="#009999">     * Unregisters modifier</font><a name="a785"></a><br />785   <font color="#009999">     *</font><a name="a786"></a><br />786   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$modifier </strong><font color="#009999">name of template modifier</font><a name="a787"></a><br />787   <font color="#009999">     */</font>    <a name="a788"></a><br />788       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodunregister_modifier">unregister_modifier</a><strong>(</strong><strong>$modifier</strong><strong>)</strong><a name="a789"></a><br />789       <strong>{</strong><a name="a790"></a><br />790           unset<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'modifier'</font><strong>]</strong><strong>[</strong><strong>$modifier</strong><strong>]</strong><strong>)</strong>;<a name="a791"></a><br />791       <strong>}</strong><a name="a792"></a><br />792   <a name="a793"></a><br />793       <font color="#009999">/**</font><a name="a794"></a><br />794   <font color="#009999">     * Registers a resource to fetch a template</font><a name="a795"></a><br />795   <font color="#009999">     *</font><a name="a796"></a><br />796   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$type </strong><font color="#009999">name of resource</font><a name="a797"></a><br />797   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>array </em><font color="#009999"></font><strong>$functions </strong><font color="#009999">array of functions to handle resource</font><a name="a798"></a><br />798   <font color="#009999">     */</font>    <a name="a799"></a><br />799       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodregister_resource">register_resource</a><strong>(</strong><strong>$type</strong><strong>,</strong> <strong>$functions</strong><strong>)</strong><a name="a800"></a><br />800       <strong>{</strong><a name="a801"></a><br />801           <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'resource'</font><strong>]</strong><strong>[</strong><strong>$type</strong><strong>]</strong> =<a name="a802"></a><br />802               array<strong>(</strong>(array)<strong>$functions</strong><strong>,</strong> false<strong>)</strong>;<a name="a803"></a><br />803       <strong>}</strong><a name="a804"></a><br />804   <a name="a805"></a><br />805       <font color="#009999">/**</font><a name="a806"></a><br />806   <font color="#009999">     * Unregisters a resource</font><a name="a807"></a><br />807   <font color="#009999">     *</font><a name="a808"></a><br />808   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$type </strong><font color="#009999">name of resource</font><a name="a809"></a><br />809   <font color="#009999">     */</font>    <a name="a810"></a><br />810       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodunregister_resource">unregister_resource</a><strong>(</strong><strong>$type</strong><strong>)</strong><a name="a811"></a><br />811       <strong>{</strong><a name="a812"></a><br />812           unset<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'resource'</font><strong>]</strong><strong>[</strong><strong>$type</strong><strong>]</strong><strong>)</strong>;<a name="a813"></a><br />813       <strong>}</strong><a name="a814"></a><br />814   <a name="a815"></a><br />815       <font color="#009999">/**</font><a name="a816"></a><br />816   <font color="#009999">     * Registers a prefilter function to apply</font><a name="a817"></a><br />817   <font color="#009999">     * to a template before compiling</font><a name="a818"></a><br />818   <font color="#009999">     *</font><a name="a819"></a><br />819   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$function </strong><font color="#009999">name of PHP function to register</font><a name="a820"></a><br />820   <font color="#009999">     */</font>    <a name="a821"></a><br />821       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodregister_prefilter">register_prefilter</a><strong>(</strong><strong>$function</strong><strong>)</strong><a name="a822"></a><br />822       <strong>{</strong><a name="a823"></a><br />823           <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'prefilter'</font><strong>]</strong><strong>[</strong><strong>$function</strong><strong>]</strong><a name="a824"></a><br />824               = array<strong>(</strong><strong>$function</strong><strong>,</strong> null<strong>,</strong> null<strong>,</strong> false<strong>)</strong>;<a name="a825"></a><br />825       <strong>}</strong><a name="a826"></a><br />826   <a name="a827"></a><br />827       <font color="#009999">/**</font><a name="a828"></a><br />828   <font color="#009999">     * Unregisters a prefilter function</font><a name="a829"></a><br />829   <font color="#009999">     *</font><a name="a830"></a><br />830   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$function </strong><font color="#009999">name of PHP function</font><a name="a831"></a><br />831   <font color="#009999">     */</font>    <a name="a832"></a><br />832       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodunregister_prefilter">unregister_prefilter</a><strong>(</strong><strong>$function</strong><strong>)</strong><a name="a833"></a><br />833       <strong>{</strong><a name="a834"></a><br />834           unset<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'prefilter'</font><strong>]</strong><strong>[</strong><strong>$function</strong><strong>]</strong><strong>)</strong>;<a name="a835"></a><br />835       <strong>}</strong><a name="a836"></a><br />836   <a name="a837"></a><br />837       <font color="#009999">/**</font><a name="a838"></a><br />838   <font color="#009999">     * Registers a postfilter function to apply</font><a name="a839"></a><br />839   <font color="#009999">     * to a compiled template after compilation</font><a name="a840"></a><br />840   <font color="#009999">     *</font><a name="a841"></a><br />841   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$function </strong><font color="#009999">name of PHP function to register</font><a name="a842"></a><br />842   <font color="#009999">     */</font>    <a name="a843"></a><br />843       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodregister_postfilter">register_postfilter</a><strong>(</strong><strong>$function</strong><strong>)</strong><a name="a844"></a><br />844       <strong>{</strong><a name="a845"></a><br />845           <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'postfilter'</font><strong>]</strong><strong>[</strong><strong>$function</strong><strong>]</strong><a name="a846"></a><br />846               = array<strong>(</strong><strong>$function</strong><strong>,</strong> null<strong>,</strong> null<strong>,</strong> false<strong>)</strong>;<a name="a847"></a><br />847       <strong>}</strong><a name="a848"></a><br />848   <a name="a849"></a><br />849       <font color="#009999">/**</font><a name="a850"></a><br />850   <font color="#009999">     * Unregisters a postfilter function</font><a name="a851"></a><br />851   <font color="#009999">     *</font><a name="a852"></a><br />852   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$function </strong><font color="#009999">name of PHP function</font><a name="a853"></a><br />853   <font color="#009999">     */</font>    <a name="a854"></a><br />854       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodunregister_postfilter">unregister_postfilter</a><strong>(</strong><strong>$function</strong><strong>)</strong><a name="a855"></a><br />855       <strong>{</strong><a name="a856"></a><br />856           unset<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'postfilter'</font><strong>]</strong><strong>[</strong><strong>$function</strong><strong>]</strong><strong>)</strong>;<a name="a857"></a><br />857       <strong>}</strong><a name="a858"></a><br />858   <a name="a859"></a><br />859       <font color="#009999">/**</font><a name="a860"></a><br />860   <font color="#009999">     * Registers an output filter function to apply</font><a name="a861"></a><br />861   <font color="#009999">     * to a template output</font><a name="a862"></a><br />862   <font color="#009999">     *</font><a name="a863"></a><br />863   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$function </strong><font color="#009999">name of PHP function</font><a name="a864"></a><br />864   <font color="#009999">     */</font>    <a name="a865"></a><br />865       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodregister_outputfilter">register_outputfilter</a><strong>(</strong><strong>$function</strong><strong>)</strong><a name="a866"></a><br />866       <strong>{</strong><a name="a867"></a><br />867           <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'outputfilter'</font><strong>]</strong><strong>[</strong><strong>$function</strong><strong>]</strong><a name="a868"></a><br />868               = array<strong>(</strong><strong>$function</strong><strong>,</strong> null<strong>,</strong> null<strong>,</strong> false<strong>)</strong>;<a name="a869"></a><br />869       <strong>}</strong><a name="a870"></a><br />870   <a name="a871"></a><br />871       <font color="#009999">/**</font><a name="a872"></a><br />872   <font color="#009999">     * Unregisters an outputfilter function</font><a name="a873"></a><br />873   <font color="#009999">     *</font><a name="a874"></a><br />874   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$function </strong><font color="#009999">name of PHP function</font><a name="a875"></a><br />875   <font color="#009999">     */</font>    <a name="a876"></a><br />876       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodunregister_outputfilter">unregister_outputfilter</a><strong>(</strong><strong>$function</strong><strong>)</strong><a name="a877"></a><br />877       <strong>{</strong><a name="a878"></a><br />878           unset<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'outputfilter'</font><strong>]</strong><strong>[</strong><strong>$function</strong><strong>]</strong><strong>)</strong>;<a name="a879"></a><br />879       <strong>}</strong>    <a name="a880"></a><br />880       <a name="a881"></a><br />881       <font color="#009999">/**</font><a name="a882"></a><br />882   <font color="#009999">     * load a filter of specified type and name</font><a name="a883"></a><br />883   <font color="#009999">     *</font><a name="a884"></a><br />884   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$type </strong><font color="#009999">filter type</font><a name="a885"></a><br />885   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$name </strong><font color="#009999">filter name</font><a name="a886"></a><br />886   <font color="#009999">     */</font>    <a name="a887"></a><br />887       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodload_filter">load_filter</a><strong>(</strong><strong>$type</strong><strong>,</strong> <strong>$name</strong><strong>)</strong><a name="a888"></a><br />888       <strong>{</strong><a name="a889"></a><br />889           <font color="blue">switch</font> <strong>(</strong><strong>$type</strong><strong>)</strong> <strong>{</strong><a name="a890"></a><br />890               case <font color="#66cccc">'output'</font>:<a name="a891"></a><br />891                   <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_load_plugins">_load_plugins</a><strong>(</strong>array<strong>(</strong>array<strong>(</strong><strong>$type</strong> . <font color="#66cccc">'filter'</font><strong>,</strong> <strong>$name</strong><strong>,</strong> null<strong>,</strong> null<strong>,</strong> false<strong>)</strong><strong>)</strong><strong>)</strong>;<a name="a892"></a><br />892                   break;<a name="a893"></a><br />893   <a name="a894"></a><br />894               case <font color="#66cccc">'pre'</font>:<a name="a895"></a><br />895               case <font color="#66cccc">'post'</font>:<a name="a896"></a><br />896                   <font color="blue">if</font> <strong>(</strong><strong>!</strong>isset<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><strong>$type</strong> . <font color="#66cccc">'filter'</font><strong>]</strong><strong>[</strong><strong>$name</strong><strong>]</strong><strong>)</strong><strong>)</strong><a name="a897"></a><br />897                       <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><strong>$type</strong> . <font color="#66cccc">'filter'</font><strong>]</strong><strong>[</strong><strong>$name</strong><strong>]</strong> = false;<a name="a898"></a><br />898                   break;<a name="a899"></a><br />899           <strong>}</strong><a name="a900"></a><br />900       <strong>}</strong><a name="a901"></a><br />901   <a name="a902"></a><br />902       <font color="#009999">/**</font><a name="a903"></a><br />903   <font color="#009999">     * clear cached content for the given template and cache id</font><a name="a904"></a><br />904   <font color="#009999">     *</font><a name="a905"></a><br />905   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$tpl_file </strong><font color="#009999">name of template file</font><a name="a906"></a><br />906   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$cache_id </strong><font color="#009999">name of cache_id</font><a name="a907"></a><br />907   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$compile_id </strong><font color="#009999">name of compile_id</font><a name="a908"></a><br />908   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$exp_time </strong><font color="#009999">expiration time</font><a name="a909"></a><br />909   <font color="#009999">     */</font>    <a name="a910"></a><br />910       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodclear_cache">clear_cache</a><strong>(</strong><strong>$tpl_file</strong> = null<strong>,</strong> <strong>$cache_id</strong> = null<strong>,</strong> <strong>$compile_id</strong> = null<strong>,</strong> <strong>$exp_time</strong> = null<strong>)</strong><a name="a911"></a><br />911       <strong>{</strong><a name="a912"></a><br />912           <a name="a913"></a><br />913           <font color="blue">if</font> <strong>(</strong><strong>!</strong>isset<strong>(</strong><strong>$compile_id</strong><strong>)</strong><strong>)</strong><a name="a914"></a><br />914               <strong>$compile_id</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$compile_id">compile_id</a>;<a name="a915"></a><br />915   <a name="a916"></a><br />916       <font color="blue">if</font> <strong>(</strong><strong>!</strong>isset<strong>(</strong><strong>$tpl_file</strong><strong>)</strong><strong>)</strong><a name="a917"></a><br />917           <strong>$compile_id</strong> = null;<a name="a918"></a><br />918   <a name="a919"></a><br />919       <strong>$_auto_id</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_auto_id">_get_auto_id</a><strong>(</strong><strong>$cache_id</strong><strong>,</strong> <strong>$compile_id</strong><strong>)</strong>;<a name="a920"></a><br />920   <a name="a921"></a><br />921           <font color="blue">if</font> <strong>(</strong><strong>!</strong>empty<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$cache_handler_func">cache_handler_func</a><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a922"></a><br />922               <strong>$_funcname</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$cache_handler_func">cache_handler_func</a>;<a name="a923"></a><br />923               <font color="blue">return</font> <strong>$_funcname</strong><strong>(</strong><font color="#66cccc">'clear'</font><strong>,</strong> <strong>$this</strong><strong>,</strong> <strong>$dummy</strong><strong>,</strong> <strong>$tpl_file</strong><strong>,</strong> <strong>$cache_id</strong><strong>,</strong> <strong>$compile_id</strong><strong>)</strong>;<a name="a924"></a><br />924           <strong>}</strong> else <strong>{</strong><a name="a925"></a><br />925               <font color="blue">return</font> <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_rm_auto">_rm_auto</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$cache_dir">cache_dir</a><strong>,</strong> <strong>$tpl_file</strong><strong>,</strong> <strong>$_auto_id</strong><strong>,</strong> <strong>$exp_time</strong><strong>)</strong>;<a name="a926"></a><br />926           <strong>}</strong><a name="a927"></a><br />927           <a name="a928"></a><br />928       <strong>}</strong><a name="a929"></a><br />929   <a name="a930"></a><br />930   <a name="a931"></a><br />931       <font color="#009999">/**</font><a name="a932"></a><br />932   <font color="#009999">     * clear the entire contents of cache (all templates)</font><a name="a933"></a><br />933   <font color="#009999">     *</font><a name="a934"></a><br />934   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$exp_time </strong><font color="#009999">expire time</font><a name="a935"></a><br />935   <font color="#009999">     */</font>    <a name="a936"></a><br />936       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodclear_all_cache">clear_all_cache</a><strong>(</strong><strong>$exp_time</strong> = null<strong>)</strong><a name="a937"></a><br />937       <strong>{</strong><a name="a938"></a><br />938           <font color="blue">if</font> <strong>(</strong><strong>!</strong>empty<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$cache_handler_func">cache_handler_func</a><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a939"></a><br />939               <strong>$funcname</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$cache_handler_func">cache_handler_func</a>;<a name="a940"></a><br />940               <font color="blue">return</font> <strong>$funcname</strong><strong>(</strong><font color="#66cccc">'clear'</font><strong>,</strong> <strong>$this</strong><strong>,</strong> <strong>$dummy</strong><strong>)</strong>;<a name="a941"></a><br />941           <strong>}</strong> else <strong>{</strong><a name="a942"></a><br />942               <font color="blue">return</font> <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_rm_auto">_rm_auto</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$cache_dir">cache_dir</a><strong>,</strong>null<strong>,</strong>null<strong>,</strong><strong>$exp_time</strong><strong>)</strong>;<a name="a943"></a><br />943           <strong>}</strong><a name="a944"></a><br />944       <strong>}</strong><a name="a945"></a><br />945   <a name="a946"></a><br />946   <a name="a947"></a><br />947       <font color="#009999">/**</font><a name="a948"></a><br />948   <font color="#009999">     * test to see if valid cache exists for this template</font><a name="a949"></a><br />949   <font color="#009999">     *</font><a name="a950"></a><br />950   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$tpl_file </strong><font color="#009999">name of template file</font><a name="a951"></a><br />951   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$cache_id </strong><a name="a952"></a><br />952   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$compile_id </strong><a name="a953"></a><br />953   <font color="#009999">     */</font>    <a name="a954"></a><br />954       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodis_cached">is_cached</a><strong>(</strong><strong>$tpl_file</strong><strong>,</strong> <strong>$cache_id</strong> = null<strong>,</strong> <strong>$compile_id</strong> = null<strong>)</strong><a name="a955"></a><br />955       <strong>{</strong><a name="a956"></a><br />956           <font color="blue">if</font> <strong>(</strong><strong>!</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$caching">caching</a><strong>)</strong><a name="a957"></a><br />957               <font color="blue">return</font> false;<a name="a958"></a><br />958   <a name="a959"></a><br />959           <font color="blue">if</font> <strong>(</strong><strong>!</strong>isset<strong>(</strong><strong>$compile_id</strong><strong>)</strong><strong>)</strong><a name="a960"></a><br />960               <strong>$compile_id</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$compile_id">compile_id</a>;<a name="a961"></a><br />961   <a name="a962"></a><br />962           <font color="blue">return</font> <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_read_cache_file">_read_cache_file</a><strong>(</strong><strong>$tpl_file</strong><strong>,</strong> <strong>$cache_id</strong><strong>,</strong> <strong>$compile_id</strong><strong>,</strong> <strong>$results</strong><strong>)</strong>;<a name="a963"></a><br />963       <strong>}</strong><a name="a964"></a><br />964   <a name="a965"></a><br />965   <a name="a966"></a><br />966       <font color="#009999">/**</font><a name="a967"></a><br />967   <font color="#009999">     * clear all the assigned template variables.</font><a name="a968"></a><br />968   <font color="#009999">     *</font><a name="a969"></a><br />969   <font color="#009999">     */</font>    <a name="a970"></a><br />970       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodclear_all_assign">clear_all_assign</a><strong>(</strong><strong>)</strong><a name="a971"></a><br />971       <strong>{</strong><a name="a972"></a><br />972           <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_tpl_vars">_tpl_vars</a> = array<strong>(</strong><strong>)</strong>;<a name="a973"></a><br />973       <strong>}</strong><a name="a974"></a><br />974   <a name="a975"></a><br />975       <font color="#009999">/**</font><a name="a976"></a><br />976   <font color="#009999">     * clears compiled version of specified template resource,</font><a name="a977"></a><br />977   <font color="#009999">     * or all compiled template files if one is not specified.</font><a name="a978"></a><br />978   <font color="#009999">     * This function is for advanced use only, not normally needed.</font><a name="a979"></a><br />979   <font color="#009999">     *</font><a name="a980"></a><br />980   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$tpl_file </strong><a name="a981"></a><br />981   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$compile_id </strong><a name="a982"></a><br />982   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$exp_time </strong><a name="a983"></a><br />983   <font color="#009999">     */</font>    <a name="a984"></a><br />984       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodclear_compiled_tpl">clear_compiled_tpl</a><strong>(</strong><strong>$tpl_file</strong> = null<strong>,</strong> <strong>$compile_id</strong> = null<strong>,</strong> <strong>$exp_time</strong> = null<strong>)</strong><a name="a985"></a><br />985       <strong>{</strong><a name="a986"></a><br />986           <font color="blue">if</font> <strong>(</strong><strong>!</strong>isset<strong>(</strong><strong>$compile_id</strong><strong>)</strong><strong>)</strong><a name="a987"></a><br />987               <strong>$compile_id</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$compile_id">compile_id</a>;<a name="a988"></a><br />988           <font color="blue">return</font> <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_rm_auto">_rm_auto</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$compile_dir">compile_dir</a><strong>,</strong> <strong>$tpl_file</strong><strong>,</strong> <strong>$compile_id</strong><strong>,</strong> <strong>$exp_time</strong><strong>)</strong>;<a name="a989"></a><br />989       <strong>}</strong><a name="a990"></a><br />990   <a name="a991"></a><br />991       <font color="#009999">/**</font><a name="a992"></a><br />992   <font color="#009999">     * Checks whether requested template exists.</font><a name="a993"></a><br />993   <font color="#009999">     *</font><a name="a994"></a><br />994   <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$tpl_file </strong><a name="a995"></a><br />995   <font color="#009999">     */</font>    <a name="a996"></a><br />996       <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodtemplate_exists">template_exists</a><strong>(</strong><strong>$tpl_file</strong><strong>)</strong><a name="a997"></a><br />997       <strong>{</strong><a name="a998"></a><br />998           <font color="blue">return</font> <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_fetch_template_info">_fetch_template_info</a><strong>(</strong><strong>$tpl_file</strong><strong>,</strong> <strong>$source</strong><strong>,</strong> <strong>$timestamp</strong><strong>,</strong> true<strong>,</strong> true<strong>)</strong>;<a name="a999"></a><br />999       <strong>}</strong><a name="a1000"></a><br />1000  <a name="a1001"></a><br />1001      <font color="#009999">/**</font><a name="a1002"></a><br />1002  <font color="#009999">     * Returns an array containing template variables</font><a name="a1003"></a><br />1003  <font color="#009999">     *</font><a name="a1004"></a><br />1004  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$name </strong><a name="a1005"></a><br />1005  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$type </strong><a name="a1006"></a><br />1006  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@return </font></strong><font color="#009999"></font><em>mixed </em><a name="a1007"></a><br />1007  <font color="#009999">     */</font>    <a name="a1008"></a><br />1008      <font color="blue">function</font> <strong>&amp;</strong><a href="../Smarty/Smarty.html#methodget_template_vars">get_template_vars</a><strong>(</strong><strong>$name</strong>=null<strong>)</strong><a name="a1009"></a><br />1009      <strong>{</strong><a name="a1010"></a><br />1010          <font color="blue">if</font><strong>(</strong><strong>!</strong>isset<strong>(</strong><strong>$name</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1011"></a><br />1011              <font color="blue">return</font> <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_tpl_vars">_tpl_vars</a>;<a name="a1012"></a><br />1012          <strong>}</strong><a name="a1013"></a><br />1013          <font color="blue">if</font><strong>(</strong>isset<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_tpl_vars">_tpl_vars</a><strong>[</strong><strong>$name</strong><strong>]</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1014"></a><br />1014              <font color="blue">return</font> <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_tpl_vars">_tpl_vars</a><strong>[</strong><strong>$name</strong><strong>]</strong>;<a name="a1015"></a><br />1015          <strong>}</strong><a name="a1016"></a><br />1016      <strong>}</strong><a name="a1017"></a><br />1017  <a name="a1018"></a><br />1018      <font color="#009999">/**</font><a name="a1019"></a><br />1019  <font color="#009999">     * Returns an array containing config variables</font><a name="a1020"></a><br />1020  <font color="#009999">     *</font><a name="a1021"></a><br />1021  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$name </strong><a name="a1022"></a><br />1022  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$type </strong><a name="a1023"></a><br />1023  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@return </font></strong><font color="#009999"></font><em>mixed </em><a name="a1024"></a><br />1024  <font color="#009999">     */</font>    <a name="a1025"></a><br />1025      <font color="blue">function</font> <strong>&amp;</strong><a href="../Smarty/Smarty.html#methodget_config_vars">get_config_vars</a><strong>(</strong><strong>$name</strong>=null<strong>)</strong><a name="a1026"></a><br />1026      <strong>{</strong><a name="a1027"></a><br />1027          <font color="blue">if</font><strong>(</strong><strong>!</strong>isset<strong>(</strong><strong>$name</strong><strong>)</strong> &amp;&amp; <a href="http://www.php.net/is_array">is_array</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_config">_config</a><strong>[</strong>0<strong>]</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1028"></a><br />1028              <font color="blue">return</font> <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_config">_config</a><strong>[</strong>0<strong>]</strong><strong>[</strong><font color="#66cccc">'vars'</font><strong>]</strong>;<a name="a1029"></a><br />1029          <strong>}</strong> else <font color="blue">if</font><strong>(</strong>isset<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_config">_config</a><strong>[</strong>0<strong>]</strong><strong>[</strong><font color="#66cccc">'vars'</font><strong>]</strong><strong>[</strong><strong>$name</strong><strong>]</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1030"></a><br />1030              <font color="blue">return</font> <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_config">_config</a><strong>[</strong>0<strong>]</strong><strong>[</strong><font color="#66cccc">'vars'</font><strong>]</strong><strong>[</strong><strong>$name</strong><strong>]</strong>;<a name="a1031"></a><br />1031          <strong>}</strong><a name="a1032"></a><br />1032      <strong>}</strong><a name="a1033"></a><br />1033  <a name="a1034"></a><br />1034      <font color="#009999">/**</font><a name="a1035"></a><br />1035  <font color="#009999">     * trigger Smarty error</font><a name="a1036"></a><br />1036  <font color="#009999">     *</font><a name="a1037"></a><br />1037  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$error_msg </strong><a name="a1038"></a><br />1038  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>integer </em><font color="#009999"></font><strong>$error_type </strong><a name="a1039"></a><br />1039  <font color="#009999">     */</font>    <a name="a1040"></a><br />1040      <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodtrigger_error">trigger_error</a><strong>(</strong><strong>$error_msg</strong><strong>,</strong> <strong>$error_type</strong> = E_USER_WARNING<strong>)</strong><a name="a1041"></a><br />1041      <strong>{</strong><a name="a1042"></a><br />1042          <a href="../Smarty/Smarty.html#methodtrigger_error">trigger_error</a><strong>(</strong>&quot;<font color="#66cccc">Smarty error: <strong>$error_msg</strong></font>&quot;<strong>,</strong> <strong>$error_type</strong><strong>)</strong>;<a name="a1043"></a><br />1043      <strong>}</strong><a name="a1044"></a><br />1044  <a name="a1045"></a><br />1045  <a name="a1046"></a><br />1046      <font color="#009999">/**</font><a name="a1047"></a><br />1047  <font color="#009999">     * executes &amp; displays the template results</font><a name="a1048"></a><br />1048  <font color="#009999">     *</font><a name="a1049"></a><br />1049  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$tpl_file </strong><a name="a1050"></a><br />1050  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$cache_id </strong><a name="a1051"></a><br />1051  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$compile_id </strong><a name="a1052"></a><br />1052  <font color="#009999">     */</font>    <a name="a1053"></a><br />1053      <font color="blue">function</font> <a href="../Smarty/Smarty.html#methoddisplay">display</a><strong>(</strong><strong>$tpl_file</strong><strong>,</strong> <strong>$cache_id</strong> = null<strong>,</strong> <strong>$compile_id</strong> = null<strong>)</strong><a name="a1054"></a><br />1054      <strong>{</strong><a name="a1055"></a><br />1055          <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#methodfetch">fetch</a><strong>(</strong><strong>$tpl_file</strong><strong>,</strong> <strong>$cache_id</strong><strong>,</strong> <strong>$compile_id</strong><strong>,</strong> true<strong>)</strong>;<a name="a1056"></a><br />1056      <strong>}</strong><a name="a1057"></a><br />1057  <a name="a1058"></a><br />1058      <font color="#009999">/**</font><a name="a1059"></a><br />1059  <font color="#009999">     * executes &amp; returns or displays the template results</font><a name="a1060"></a><br />1060  <font color="#009999">     *</font><a name="a1061"></a><br />1061  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$tpl_file </strong><a name="a1062"></a><br />1062  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$cache_id </strong><a name="a1063"></a><br />1063  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$compile_id </strong><a name="a1064"></a><br />1064  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>boolean </em><font color="#009999"></font><strong>$display </strong><a name="a1065"></a><br />1065  <font color="#009999">     */</font><a name="a1066"></a><br />1066      <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodfetch">fetch</a><strong>(</strong><strong>$tpl_file</strong><strong>,</strong> <strong>$cache_id</strong> = null<strong>,</strong> <strong>$compile_id</strong> = null<strong>,</strong> <strong>$display</strong> = false<strong>)</strong><a name="a1067"></a><br />1067      <strong>{</strong><a name="a1068"></a><br />1068          <strong>$_smarty_old_error_level</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$debugging">debugging</a> ? <a href="http://www.php.net/error_reporting">error_reporting</a><strong>(</strong><strong>)</strong> : <a href="http://www.php.net/error_reporting">error_reporting</a><strong>(</strong><a href="http://www.php.net/error_reporting">error_reporting</a><strong>(</strong><strong>)</strong> <strong>&amp;</strong> ~E_NOTICE<strong>)</strong>;<a name="a1069"></a><br />1069  <a name="a1070"></a><br />1070          <font color="blue">if</font><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$security">security</a> &amp;&amp; <strong>!</strong><a href="http://www.php.net/in_array">in_array</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$template_dir">template_dir</a><strong>,</strong> <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$secure_dir">secure_dir</a><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1071"></a><br />1071              <font color="green">// add template_dir to secure_dir array</font><a name="a1072"></a><br />1072              <a href="http://www.php.net/array_unshift">array_unshift</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$secure_dir">secure_dir</a><strong>,</strong> <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$template_dir">template_dir</a><strong>)</strong>;<a name="a1073"></a><br />1073          <strong>}</strong><a name="a1074"></a><br />1074  <a name="a1075"></a><br />1075          <font color="blue">if</font> <strong>(</strong><strong>!</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$debugging">debugging</a> &amp;&amp; <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$debugging_ctrl">debugging_ctrl</a> == <font color="#66cccc">'URL'</font><a name="a1076"></a><br />1076                 &amp;&amp; <a href="http://www.php.net/strstr">strstr</a><strong>(</strong><strong>$GLOBALS</strong><strong>[</strong><font color="#66cccc">'HTTP_SERVER_VARS'</font><strong>]</strong><strong>[</strong><font color="#66cccc">'QUERY_STRING'</font><strong>]</strong><strong>,</strong> <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_smarty_debug_id">_smarty_debug_id</a><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1077"></a><br />1077              <font color="green">// enable debugging from URL</font><a name="a1078"></a><br />1078              <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$debugging">debugging</a> = true;<a name="a1079"></a><br />1079          <strong>}</strong>        <a name="a1080"></a><br />1080          <a name="a1081"></a><br />1081          <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$debugging">debugging</a><strong>)</strong> <strong>{</strong><a name="a1082"></a><br />1082              <font color="green">// capture time for debugging info</font><a name="a1083"></a><br />1083              <strong>$debug_start_time</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_microtime">_get_microtime</a><strong>(</strong><strong>)</strong>;<a name="a1084"></a><br />1084              <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_smarty_debug_info">_smarty_debug_info</a><strong>[</strong><strong>]</strong> = array<strong>(</strong><font color="#66cccc">'type'</font>      =&gt; <font color="#66cccc">'template'</font><strong>,</strong><a name="a1085"></a><br />1085                                                  <font color="#66cccc">'filename'</font>  =&gt; <strong>$tpl_file</strong><strong>,</strong><a name="a1086"></a><br />1086                                                  <font color="#66cccc">'depth'</font>     =&gt; 0<strong>)</strong>;<a name="a1087"></a><br />1087              <strong>$included_tpls_idx</strong> = <a href="http://www.php.net/count">count</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_smarty_debug_info">_smarty_debug_info</a><strong>)</strong> - 1;<a name="a1088"></a><br />1088          <strong>}</strong><a name="a1089"></a><br />1089  <a name="a1090"></a><br />1090          <font color="blue">if</font> <strong>(</strong><strong>!</strong>isset<strong>(</strong><strong>$compile_id</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1091"></a><br />1091              <strong>$compile_id</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$compile_id">compile_id</a>;<a name="a1092"></a><br />1092          <strong>}</strong><a name="a1093"></a><br />1093  <a name="a1094"></a><br />1094          <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_compile_id">_compile_id</a> = <strong>$compile_id</strong>;<a name="a1095"></a><br />1095          <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_inclusion_depth">_inclusion_depth</a> = 0;<a name="a1096"></a><br />1096  <a name="a1097"></a><br />1097          <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$caching">caching</a><strong>)</strong> <strong>{</strong><a name="a1098"></a><br />1098              <font color="blue">if</font><strong>(</strong><strong>!</strong>empty<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1099"></a><br />1099                  <font color="green">// nested call, init cache_info</font><a name="a1100"></a><br />1100                  <strong>$_cache_info</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a>;<a name="a1101"></a><br />1101                  <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a> = array<strong>(</strong><strong>)</strong>;<a name="a1102"></a><br />1102              <strong>}</strong><a name="a1103"></a><br />1103              <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_read_cache_file">_read_cache_file</a><strong>(</strong><strong>$tpl_file</strong><strong>,</strong> <strong>$cache_id</strong><strong>,</strong> <strong>$compile_id</strong><strong>,</strong> <strong>$_smarty_results</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1104"></a><br />1104                  <font color="blue">if</font> <strong>(</strong><strong>@</strong><a href="http://www.php.net/count">count</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a><strong>[</strong><font color="#66cccc">'insert_tags'</font><strong>]</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1105"></a><br />1105                      <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_load_plugins">_load_plugins</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a><strong>[</strong><font color="#66cccc">'insert_tags'</font><strong>]</strong><strong>)</strong>;<a name="a1106"></a><br />1106                      <strong>$_smarty_results</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_process_cached_inserts">_process_cached_inserts</a><strong>(</strong><strong>$_smarty_results</strong><strong>)</strong>;<a name="a1107"></a><br />1107                  <strong>}</strong><a name="a1108"></a><br />1108                  <font color="blue">if</font> <strong>(</strong><strong>$display</strong><strong>)</strong> <strong>{</strong><a name="a1109"></a><br />1109                      <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$debugging">debugging</a><strong>)</strong><a name="a1110"></a><br />1110                      <strong>{</strong><a name="a1111"></a><br />1111                          <font color="green">// capture time for debugging info</font><a name="a1112"></a><br />1112                          <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_smarty_debug_info">_smarty_debug_info</a><strong>[</strong><strong>$included_tpls_idx</strong><strong>]</strong><strong>[</strong><font color="#66cccc">'exec_time'</font><strong>]</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_microtime">_get_microtime</a><strong>(</strong><strong>)</strong> - <strong>$debug_start_time</strong>;<a name="a1113"></a><br />1113  <a name="a1114"></a><br />1114                          <strong>$_smarty_results</strong> .= <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_generate_debug_output">_generate_debug_output</a><strong>(</strong><strong>)</strong>;<a name="a1115"></a><br />1115                      <strong>}</strong><a name="a1116"></a><br />1116                      <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$cache_modified_check">cache_modified_check</a><strong>)</strong> <strong>{</strong><a name="a1117"></a><br />1117                          <strong>$last_modified_date</strong> = <a href="http://www.php.net/substr">substr</a><strong>(</strong><strong>$GLOBALS</strong><strong>[</strong><font color="#66cccc">'HTTP_SERVER_VARS'</font><strong>]</strong><strong>[</strong><font color="#66cccc">'HTTP_IF_MODIFIED_SINCE'</font><strong>]</strong><strong>,</strong> 0<strong>,</strong> <a href="http://www.php.net/strpos">strpos</a><strong>(</strong><strong>$GLOBALS</strong><strong>[</strong><font color="#66cccc">'HTTP_SERVER_VARS'</font><strong>]</strong><strong>[</strong><font color="#66cccc">'HTTP_IF_MODIFIED_SINCE'</font><strong>]</strong><strong>,</strong> <font color="#66cccc">'GMT'</font><strong>)</strong> + 3<strong>)</strong>;<a name="a1118"></a><br />1118                          <strong>$gmt_mtime</strong> = <a href="http://www.php.net/gmdate">gmdate</a><strong>(</strong><font color="#66cccc">'D, d M Y H:i:s'</font><strong>,</strong> <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a><strong>[</strong><font color="#66cccc">'timestamp'</font><strong>]</strong><strong>)</strong>.<font color="#66cccc">' GMT'</font>;<a name="a1119"></a><br />1119                          <font color="blue">if</font> <strong>(</strong><strong>@</strong><a href="http://www.php.net/count">count</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a><strong>[</strong><font color="#66cccc">'insert_tags'</font><strong>]</strong><strong>)</strong> == 0<a name="a1120"></a><br />1120                              &amp;&amp; <strong>$gmt_mtime</strong> == <strong>$last_modified_date</strong><strong>)</strong> <strong>{</strong><a name="a1121"></a><br />1121                              <a href="http://www.php.net/header">header</a><strong>(</strong><font color="#66cccc">&quot;HTTP/1.1 304 Not Modified&quot;</font><strong>)</strong>;<a name="a1122"></a><br />1122                          <strong>}</strong> else <strong>{</strong><a name="a1123"></a><br />1123                              <a href="http://www.php.net/header">header</a><strong>(</strong><font color="#66cccc">&quot;Last-Modified: &quot;</font>.<strong>$gmt_mtime</strong><strong>)</strong>;<a name="a1124"></a><br />1124                              echo <strong>$_smarty_results</strong>;<a name="a1125"></a><br />1125                          <strong>}</strong><a name="a1126"></a><br />1126                      <strong>}</strong> else <strong>{</strong><a name="a1127"></a><br />1127                              echo <strong>$_smarty_results</strong>;                        <a name="a1128"></a><br />1128                      <strong>}</strong><a name="a1129"></a><br />1129                      <a href="http://www.php.net/error_reporting">error_reporting</a><strong>(</strong><strong>$_smarty_old_error_level</strong><strong>)</strong>;<a name="a1130"></a><br />1130                      <font color="blue">return</font> true;    <a name="a1131"></a><br />1131                  <strong>}</strong> else <strong>{</strong><a name="a1132"></a><br />1132                      <a href="http://www.php.net/error_reporting">error_reporting</a><strong>(</strong><strong>$_smarty_old_error_level</strong><strong>)</strong>;<a name="a1133"></a><br />1133                      <font color="blue">return</font> <strong>$_smarty_results</strong>;<a name="a1134"></a><br />1134                  <strong>}</strong><a name="a1135"></a><br />1135              <strong>}</strong> else <strong>{</strong><a name="a1136"></a><br />1136                  <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a><strong>[</strong><font color="#66cccc">'template'</font><strong>]</strong><strong>[</strong><strong>]</strong> = <strong>$tpl_file</strong>;<a name="a1137"></a><br />1137                  <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$cache_modified_check">cache_modified_check</a><strong>)</strong> <strong>{</strong><a name="a1138"></a><br />1138                      <a href="http://www.php.net/header">header</a><strong>(</strong><font color="#66cccc">&quot;Last-Modified: &quot;</font>.<a href="http://www.php.net/gmdate">gmdate</a><strong>(</strong><font color="#66cccc">'D, d M Y H:i:s'</font><strong>,</strong> <a href="http://www.php.net/time">time</a><strong>(</strong><strong>)</strong><strong>)</strong>.<font color="#66cccc">' GMT'</font><strong>)</strong>;<a name="a1139"></a><br />1139                  <strong>}</strong><a name="a1140"></a><br />1140              <strong>}</strong><a name="a1141"></a><br />1141              <font color="blue">if</font><strong>(</strong>isset<strong>(</strong><strong>$_cache_info</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1142"></a><br />1142                  <font color="green">// restore cache_info</font><a name="a1143"></a><br />1143                  <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a> = <strong>$_cache_info</strong>;<a name="a1144"></a><br />1144              <strong>}</strong><a name="a1145"></a><br />1145          <strong>}</strong><a name="a1146"></a><br />1146  <a name="a1147"></a><br />1147          <font color="blue">if</font> <strong>(</strong><a href="http://www.php.net/count">count</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$autoload_filters">autoload_filters</a><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1148"></a><br />1148              <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_autoload_filters">_autoload_filters</a><strong>(</strong><strong>)</strong>;<a name="a1149"></a><br />1149          <strong>}</strong><a name="a1150"></a><br />1150  <a name="a1151"></a><br />1151          <strong>$_smarty_compile_path</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_compile_path">_get_compile_path</a><strong>(</strong><strong>$tpl_file</strong><strong>)</strong>;<a name="a1152"></a><br />1152  <a name="a1153"></a><br />1153          <font color="green">// if we just need to display the results, don't perform output</font><a name="a1154"></a><br />1154          <font color="green">// buffering - for speed</font><a name="a1155"></a><br />1155          <font color="blue">if</font> <strong>(</strong><strong>$display</strong> &amp;&amp; <strong>!</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$caching">caching</a> &amp;&amp; <a href="http://www.php.net/count">count</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'outputfilter'</font><strong>]</strong><strong>)</strong> == 0<strong>)</strong> <strong>{</strong><a name="a1156"></a><br />1156              <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_process_template">_process_template</a><strong>(</strong><strong>$tpl_file</strong><strong>,</strong> <strong>$_smarty_compile_path</strong><strong>)</strong><strong>)</strong><a name="a1157"></a><br />1157              <strong>{</strong><a name="a1158"></a><br />1158                  <font color="blue">include</font><strong>(</strong><strong>$_smarty_compile_path</strong><strong>)</strong>;<a name="a1159"></a><br />1159              <strong>}</strong><a name="a1160"></a><br />1160          <strong>}</strong> else <strong>{</strong><a name="a1161"></a><br />1161              <a href="http://www.php.net/ob_start">ob_start</a><strong>(</strong><strong>)</strong>;<a name="a1162"></a><br />1162              <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_process_template">_process_template</a><strong>(</strong><strong>$tpl_file</strong><strong>,</strong> <strong>$_smarty_compile_path</strong><strong>)</strong><strong>)</strong><a name="a1163"></a><br />1163              <strong>{</strong><a name="a1164"></a><br />1164                  <font color="blue">include</font><strong>(</strong><strong>$_smarty_compile_path</strong><strong>)</strong>;<a name="a1165"></a><br />1165              <strong>}</strong><a name="a1166"></a><br />1166              <strong>$_smarty_results</strong> = <a href="http://www.php.net/ob_get_contents">ob_get_contents</a><strong>(</strong><strong>)</strong>;<a name="a1167"></a><br />1167              <a href="http://www.php.net/ob_end_clean">ob_end_clean</a><strong>(</strong><strong>)</strong>;<a name="a1168"></a><br />1168  <a name="a1169"></a><br />1169              <font color="blue">foreach</font> <strong>(</strong>(array)<strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'outputfilter'</font><strong>]</strong> as <strong>$output_filter</strong><strong>)</strong> <strong>{</strong><a name="a1170"></a><br />1170                  <strong>$_smarty_results</strong> = <strong>$output_filter</strong><strong>[</strong>0<strong>]</strong><strong>(</strong><strong>$_smarty_results</strong><strong>,</strong> <strong>$this</strong><strong>)</strong>;<a name="a1171"></a><br />1171              <strong>}</strong><a name="a1172"></a><br />1172          <strong>}</strong><a name="a1173"></a><br />1173  <a name="a1174"></a><br />1174          <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$caching">caching</a><strong>)</strong> <strong>{</strong><a name="a1175"></a><br />1175              <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_write_cache_file">_write_cache_file</a><strong>(</strong><strong>$tpl_file</strong><strong>,</strong> <strong>$cache_id</strong><strong>,</strong> <strong>$compile_id</strong><strong>,</strong> <strong>$_smarty_results</strong><strong>)</strong>;<a name="a1176"></a><br />1176              <strong>$_smarty_results</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_process_cached_inserts">_process_cached_inserts</a><strong>(</strong><strong>$_smarty_results</strong><strong>)</strong>;<a name="a1177"></a><br />1177          <strong>}</strong><a name="a1178"></a><br />1178  <a name="a1179"></a><br />1179          <font color="blue">if</font> <strong>(</strong><strong>$display</strong><strong>)</strong> <strong>{</strong><a name="a1180"></a><br />1180              <font color="blue">if</font> <strong>(</strong>isset<strong>(</strong><strong>$_smarty_results</strong><strong>)</strong><strong>)</strong> <strong>{</strong> echo <strong>$_smarty_results</strong>; <strong>}</strong><a name="a1181"></a><br />1181              <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$debugging">debugging</a><strong>)</strong> <strong>{</strong><a name="a1182"></a><br />1182                  <font color="green">// capture time for debugging info</font><a name="a1183"></a><br />1183                  <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_smarty_debug_info">_smarty_debug_info</a><strong>[</strong><strong>$included_tpls_idx</strong><strong>]</strong><strong>[</strong><font color="#66cccc">'exec_time'</font><strong>]</strong> = <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_microtime">_get_microtime</a><strong>(</strong><strong>)</strong> - <strong>$debug_start_time</strong><strong>)</strong>;<a name="a1184"></a><br />1184  <a name="a1185"></a><br />1185                  echo <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_generate_debug_output">_generate_debug_output</a><strong>(</strong><strong>)</strong>;<a name="a1186"></a><br />1186              <strong>}</strong><a name="a1187"></a><br />1187              <a href="http://www.php.net/error_reporting">error_reporting</a><strong>(</strong><strong>$_smarty_old_error_level</strong><strong>)</strong>;<a name="a1188"></a><br />1188              <font color="blue">return</font>;<a name="a1189"></a><br />1189          <strong>}</strong> else <strong>{</strong><a name="a1190"></a><br />1190              <a href="http://www.php.net/error_reporting">error_reporting</a><strong>(</strong><strong>$_smarty_old_error_level</strong><strong>)</strong>;<a name="a1191"></a><br />1191              <font color="blue">if</font> <strong>(</strong>isset<strong>(</strong><strong>$_smarty_results</strong><strong>)</strong><strong>)</strong> <strong>{</strong> <font color="blue">return</font> <strong>$_smarty_results</strong>; <strong>}</strong><a name="a1192"></a><br />1192          <strong>}</strong><a name="a1193"></a><br />1193      <strong>}</strong><a name="a1194"></a><br />1194  <a name="a1195"></a><br />1195  <a name="a1196"></a><br />1196      <font color="#009999">/**</font><a name="a1197"></a><br />1197  <font color="#009999">     * assign $smarty interface variable</font><a name="a1198"></a><br />1198  <font color="#009999">     */</font>    <a name="a1199"></a><br />1199      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_assign_smarty_interface">_assign_smarty_interface</a><strong>(</strong><strong>)</strong><a name="a1200"></a><br />1200      <strong>{</strong><a name="a1201"></a><br />1201          <font color="blue">if</font> <strong>(</strong>isset<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_smarty_vars">_smarty_vars</a><strong>)</strong> &amp;&amp; isset<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_smarty_vars">_smarty_vars</a><strong>[</strong><font color="#66cccc">'request'</font><strong>]</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1202"></a><br />1202              <font color="blue">return</font>;<a name="a1203"></a><br />1203          <strong>}</strong><a name="a1204"></a><br />1204  <a name="a1205"></a><br />1205          <strong>$globals_map</strong> = array<strong>(</strong><font color="#66cccc">'g'</font>  =&gt; <font color="#66cccc">'HTTP_GET_VARS'</font><strong>,</strong><a name="a1206"></a><br />1206                               <font color="#66cccc">'p'</font>  =&gt; <font color="#66cccc">'HTTP_POST_VARS'</font><strong>,</strong><a name="a1207"></a><br />1207                               <font color="#66cccc">'c'</font>  =&gt; <font color="#66cccc">'HTTP_COOKIE_VARS'</font><strong>,</strong><a name="a1208"></a><br />1208                               <font color="#66cccc">'s'</font>  =&gt; <font color="#66cccc">'HTTP_SERVER_VARS'</font><strong>,</strong><a name="a1209"></a><br />1209                               <font color="#66cccc">'e'</font>  =&gt; <font color="#66cccc">'HTTP_ENV_VARS'</font><strong>)</strong>;<a name="a1210"></a><br />1210  <a name="a1211"></a><br />1211          <strong>$_smarty_vars_request</strong>  = array<strong>(</strong><strong>)</strong>;<a name="a1212"></a><br />1212  <a name="a1213"></a><br />1213          <font color="blue">foreach</font> <strong>(</strong><a href="http://www.php.net/preg_split">preg_split</a><strong>(</strong><font color="#66cccc">'!!'</font><strong>,</strong> <a href="http://www.php.net/strtolower">strtolower</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$request_vars_order">request_vars_order</a><strong>)</strong><strong>)</strong> as <strong>$c</strong><strong>)</strong> <strong>{</strong><a name="a1214"></a><br />1214              <font color="blue">if</font> <strong>(</strong>isset<strong>(</strong><strong>$globals_map</strong><strong>[</strong><strong>$c</strong><strong>]</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1215"></a><br />1215                  <strong>$_smarty_vars_request</strong> = <a href="http://www.php.net/array_merge">array_merge</a><strong>(</strong><strong>$_smarty_vars_request</strong><strong>,</strong> <strong>$GLOBALS</strong><strong>[</strong><strong>$globals_map</strong><strong>[</strong><strong>$c</strong><strong>]</strong><strong>]</strong><strong>)</strong>;<a name="a1216"></a><br />1216              <strong>}</strong><a name="a1217"></a><br />1217          <strong>}</strong><a name="a1218"></a><br />1218          <strong>$_smarty_vars_request</strong> = <strong>@</strong><a href="http://www.php.net/array_merge">array_merge</a><strong>(</strong><strong>$_smarty_vars_request</strong><strong>,</strong> <strong>$GLOBALS</strong><strong>[</strong><font color="#66cccc">'HTTP_SESSION_VARS'</font><strong>]</strong><strong>)</strong>;<a name="a1219"></a><br />1219  <a name="a1220"></a><br />1220          <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_smarty_vars">_smarty_vars</a><strong>[</strong><font color="#66cccc">'request'</font><strong>]</strong> = <strong>$_smarty_vars_request</strong>;<a name="a1221"></a><br />1221          <a name="a1222"></a><br />1222      <strong>}</strong><a name="a1223"></a><br />1223  <a name="a1224"></a><br />1224  <a name="a1225"></a><br />1225      <font color="#009999">/**</font><a name="a1226"></a><br />1226  <font color="#009999">     * generate debug output</font><a name="a1227"></a><br />1227  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@return </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><font color="#009999">debug.tpl template output</font><a name="a1228"></a><br />1228  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@uses</font></strong><font color="#009999"> $debug_tpl debug template, used to display debugging output</font><a name="a1229"></a><br />1229  <font color="#009999">     */</font><a name="a1230"></a><br />1230      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_generate_debug_output">_generate_debug_output</a><strong>(</strong><strong>)</strong><a name="a1231"></a><br />1231      <strong>{</strong><a name="a1232"></a><br />1232          <font color="green">// we must force compile the debug template in case the environment</font><a name="a1233"></a><br />1233          <font color="green">// changed between separate applications.</font><a name="a1234"></a><br />1234  <a name="a1235"></a><br />1235          <font color="blue">if</font><strong>(</strong>empty<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$debug_tpl">debug_tpl</a><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1236"></a><br />1236              <font color="green">// set path to debug template from SMARTY_DIR</font><a name="a1237"></a><br />1237              <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$debug_tpl">debug_tpl</a> = <font color="#66cccc">'file:'</font>.<a href="../Smarty/_universibo2_framework_smarty_Smarty_class_php.html#defineSMARTY_DIR">SMARTY_DIR</a>.<font color="#66cccc">'debug.tpl'</font>;<a name="a1238"></a><br />1238              <font color="blue">if</font><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$security">security</a> &amp;&amp; <a href="http://www.php.net/is_file">is_file</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$debug_tpl">debug_tpl</a><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1239"></a><br />1239                  <strong>$secure_dir</strong><strong>[</strong><strong>]</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$debug_tpl">debug_tpl</a>;<a name="a1240"></a><br />1240              <strong>}</strong><a name="a1241"></a><br />1241          <strong>}</strong><a name="a1242"></a><br />1242  <a name="a1243"></a><br />1243          <strong>$_ldelim_orig</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$left_delimiter">left_delimiter</a>;<a name="a1244"></a><br />1244          <strong>$_rdelim_orig</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$right_delimiter">right_delimiter</a>;    <a name="a1245"></a><br />1245  <a name="a1246"></a><br />1246          <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$left_delimiter">left_delimiter</a> = <font color="#66cccc">'{'</font>;<a name="a1247"></a><br />1247          <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$right_delimiter">right_delimiter</a> = <font color="#66cccc">'}'</font>;<a name="a1248"></a><br />1248  <a name="a1249"></a><br />1249          <strong>$_force_compile_orig</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$force_compile">force_compile</a>;<a name="a1250"></a><br />1250          <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$force_compile">force_compile</a> = true;<a name="a1251"></a><br />1251          <strong>$_compile_id_orig</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_compile_id">_compile_id</a>;<a name="a1252"></a><br />1252          <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_compile_id">_compile_id</a> = null;<a name="a1253"></a><br />1253  <a name="a1254"></a><br />1254          <strong>$compile_path</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_compile_path">_get_compile_path</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$debug_tpl">debug_tpl</a><strong>)</strong>;<a name="a1255"></a><br />1255          <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_process_template">_process_template</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$debug_tpl">debug_tpl</a><strong>,</strong> <strong>$compile_path</strong><strong>)</strong><strong>)</strong><a name="a1256"></a><br />1256          <strong>{</strong><a name="a1257"></a><br />1257              <a href="http://www.php.net/ob_start">ob_start</a><strong>(</strong><strong>)</strong>;<a name="a1258"></a><br />1258              <font color="blue">include</font><strong>(</strong><strong>$compile_path</strong><strong>)</strong>;<a name="a1259"></a><br />1259              <strong>$results</strong> = <a href="http://www.php.net/ob_get_contents">ob_get_contents</a><strong>(</strong><strong>)</strong>;<a name="a1260"></a><br />1260              <a href="http://www.php.net/ob_end_clean">ob_end_clean</a><strong>(</strong><strong>)</strong>;<a name="a1261"></a><br />1261          <strong>}</strong><a name="a1262"></a><br />1262          <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$force_compile">force_compile</a> = <strong>$_force_compile_orig</strong>;<a name="a1263"></a><br />1263          <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_compile_id">_compile_id</a> = <strong>$_compile_id_orig</strong>;<a name="a1264"></a><br />1264  <a name="a1265"></a><br />1265          <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$left_delimiter">left_delimiter</a> = <strong>$_ldelim_orig</strong>;<a name="a1266"></a><br />1266          <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$right_delimiter">right_delimiter</a> = <strong>$_rdelim_orig</strong>;<a name="a1267"></a><br />1267  <a name="a1268"></a><br />1268          <font color="blue">return</font> <strong>$results</strong>;<a name="a1269"></a><br />1269      <strong>}</strong><a name="a1270"></a><br />1270  <a name="a1271"></a><br />1271      <font color="#009999">/**</font><a name="a1272"></a><br />1272  <font color="#009999">     * load configuration values</font><a name="a1273"></a><br />1273  <font color="#009999">     *</font><a name="a1274"></a><br />1274  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$file </strong><a name="a1275"></a><br />1275  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$section </strong><a name="a1276"></a><br />1276  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$scope </strong><a name="a1277"></a><br />1277  <font color="#009999">     */</font>    <a name="a1278"></a><br />1278      <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodconfig_load">config_load</a><strong>(</strong><strong>$file</strong><strong>,</strong> <strong>$section</strong> = null<strong>,</strong> <strong>$scope</strong> = <font color="#66cccc">'global'</font><strong>)</strong><a name="a1279"></a><br />1279      <strong>{</strong>        <a name="a1280"></a><br />1280          <font color="blue">if</font><strong>(</strong><strong>@</strong><a href="http://www.php.net/is_dir">is_dir</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$config_dir">config_dir</a><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1281"></a><br />1281              <strong>$_config_dir</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$config_dir">config_dir</a>;            <a name="a1282"></a><br />1282          <strong>}</strong> else <strong>{</strong><a name="a1283"></a><br />1283              <font color="green">// config_dir not found, try include_path</font><a name="a1284"></a><br />1284              <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_include_path">_get_include_path</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$config_dir">config_dir</a><strong>,</strong><strong>$_config_dir</strong><strong>)</strong>;<a name="a1285"></a><br />1285          <strong>}</strong><a name="a1286"></a><br />1286  <a name="a1287"></a><br />1287          <strong>$_file_path</strong> = <a href="http://www.php.net/str_replace">str_replace</a><strong>(</strong><font color="#66cccc">'//'</font><strong>,</strong> <font color="#66cccc">'/'</font> <strong>,</strong><strong>$_config_dir</strong> . <font color="#66cccc">'/'</font> . <strong>$file</strong><strong>)</strong>;<a name="a1288"></a><br />1288          <a name="a1289"></a><br />1289          <font color="green">// get path to compiled object file</font><a name="a1290"></a><br />1290          <font color="blue">if</font><strong>(</strong>isset<strong>(</strong><strong>$section</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1291"></a><br />1291                 <strong>$_compile_file</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_auto_filename">_get_auto_filename</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$compile_dir">compile_dir</a><strong>,</strong> <strong>$section</strong> . <font color="#66cccc">' '</font> . <strong>$file</strong><strong>)</strong>;<a name="a1292"></a><br />1292          <strong>}</strong> else <strong>{</strong><a name="a1293"></a><br />1293                 <strong>$_compile_file</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_auto_filename">_get_auto_filename</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$compile_dir">compile_dir</a><strong>,</strong> <strong>$file</strong><strong>)</strong>;<a name="a1294"></a><br />1294          <strong>}</strong><a name="a1295"></a><br />1295  <a name="a1296"></a><br />1296          <font color="green">// need to compile config file?</font><a name="a1297"></a><br />1297          <font color="blue">if</font><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$force_compile">force_compile</a> || <strong>!</strong><a href="http://www.php.net/file_exists">file_exists</a><strong>(</strong><strong>$_compile_file</strong><strong>)</strong> ||<a name="a1298"></a><br />1298              <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$compile_check">compile_check</a> &amp;&amp;<a name="a1299"></a><br />1299                  <a href="http://www.php.net/file_exists">file_exists</a><strong>(</strong><strong>$_file_path</strong><strong>)</strong> &amp;&amp;<a name="a1300"></a><br />1300                  <strong>(</strong> <a href="http://www.php.net/filemtime">filemtime</a><strong>(</strong><strong>$_compile_file</strong><strong>)</strong> != <a href="http://www.php.net/filemtime">filemtime</a><strong>(</strong><strong>$_file_path</strong><strong>)</strong> <strong>)</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1301"></a><br />1301              <strong>$_compile_config</strong> = true;<a name="a1302"></a><br />1302          <strong>}</strong> else <strong>{</strong><a name="a1303"></a><br />1303              <font color="blue">include</font><strong>(</strong><strong>$_compile_file</strong><strong>)</strong>;<a name="a1304"></a><br />1304              <strong>$_compile_config</strong> = empty<strong>(</strong><strong>$_config_vars</strong><strong>)</strong>;<a name="a1305"></a><br />1305          <strong>}</strong><a name="a1306"></a><br />1306          <a name="a1307"></a><br />1307          <font color="blue">if</font><strong>(</strong><strong>$_compile_config</strong><strong>)</strong> <strong>{</strong><a name="a1308"></a><br />1308              <font color="blue">if</font><strong>(</strong><strong>!</strong><a href="http://www.php.net/is_object">is_object</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_conf_obj">_conf_obj</a><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1309"></a><br />1309                  <font color="blue">require_once</font> <a href="../Smarty/_universibo2_framework_smarty_Smarty_class_php.html#defineSMARTY_DIR">SMARTY_DIR</a> . <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$config_class">config_class</a> . <font color="#66cccc">'.class.php'</font>;<a name="a1310"></a><br />1310                  <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_conf_obj">_conf_obj</a> = new <strong>$this</strong><strong>-&gt;</strong>config_class<strong>(</strong><strong>$_config_dir</strong><strong>)</strong>;<a name="a1311"></a><br />1311                  <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_conf_obj">_conf_obj</a><strong>-&gt;</strong>overwrite = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$config_overwrite">config_overwrite</a>;<a name="a1312"></a><br />1312                  <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_conf_obj">_conf_obj</a><strong>-&gt;</strong>booleanize = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$config_booleanize">config_booleanize</a>;<a name="a1313"></a><br />1313                  <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_conf_obj">_conf_obj</a><strong>-&gt;</strong>read_hidden = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$config_read_hidden">config_read_hidden</a>;<a name="a1314"></a><br />1314                  <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_conf_obj">_conf_obj</a><strong>-&gt;</strong>fix_newlines = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$config_fix_newlines">config_fix_newlines</a>;<a name="a1315"></a><br />1315                  <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_conf_obj">_conf_obj</a><strong>-&gt;</strong>set_path = <strong>$_config_dir</strong>;<a name="a1316"></a><br />1316              <strong>}</strong><a name="a1317"></a><br />1317              <font color="blue">if</font><strong>(</strong><strong>$_config_vars</strong> = <a href="http://www.php.net/array_merge">array_merge</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_conf_obj">_conf_obj</a><strong>-&gt;</strong>get<strong>(</strong><strong>$file</strong><strong>)</strong><strong>,</strong><a name="a1318"></a><br />1318                      <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_conf_obj">_conf_obj</a><strong>-&gt;</strong>get<strong>(</strong><strong>$file</strong><strong>,</strong> <strong>$section</strong><strong>)</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1319"></a><br />1319                  <font color="blue">if</font><strong>(</strong><a href="http://www.php.net/function_exists">function_exists</a><strong>(</strong><font color="#66cccc">'var_export'</font><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1320"></a><br />1320                      <strong>$_compile_data</strong> = <font color="#66cccc">'&lt;?php $_config_vars = '</font> . <a href="http://www.php.net/var_export">var_export</a><strong>(</strong><strong>$_config_vars</strong><strong>,</strong> true<strong>)</strong> . <font color="#66cccc">'; return true; ?&gt;'</font>;                    <a name="a1321"></a><br />1321                  <strong>}</strong> else <strong>{</strong><a name="a1322"></a><br />1322                      <strong>$_compile_data</strong> = <font color="#66cccc">'&lt;?php $_config_vars = unserialize(\''</font> . <a href="http://www.php.net/str_replace">str_replace</a><strong>(</strong><font color="#66cccc">'\''</font><strong>,</strong><font color="#66cccc">'\\\''</font><strong>,</strong> <a href="http://www.php.net/serialize">serialize</a><strong>(</strong><strong>$_config_vars</strong><strong>)</strong><strong>)</strong> . <font color="#66cccc">'\'); return true; ?&gt;'</font>;<a name="a1323"></a><br />1323                  <strong>}</strong><a name="a1324"></a><br />1324                  <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_write_file">_write_file</a><strong>(</strong><strong>$_compile_file</strong><strong>,</strong> <strong>$_compile_data</strong><strong>,</strong> true<strong>)</strong>;<a name="a1325"></a><br />1325                  <a href="http://www.php.net/touch">touch</a><strong>(</strong><strong>$_compile_file</strong><strong>,</strong><a href="http://www.php.net/filemtime">filemtime</a><strong>(</strong><strong>$_file_path</strong><strong>)</strong><strong>)</strong>;<a name="a1326"></a><br />1326              <strong>}</strong><a name="a1327"></a><br />1327          <strong>}</strong><a name="a1328"></a><br />1328          <a name="a1329"></a><br />1329          <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$debugging">debugging</a><strong>)</strong> <strong>{</strong><a name="a1330"></a><br />1330              <strong>$debug_start_time</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_microtime">_get_microtime</a><strong>(</strong><strong>)</strong>;<a name="a1331"></a><br />1331          <strong>}</strong><a name="a1332"></a><br />1332  <a name="a1333"></a><br />1333          <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$caching">caching</a><strong>)</strong> <strong>{</strong><a name="a1334"></a><br />1334              <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a><strong>[</strong><font color="#66cccc">'config'</font><strong>]</strong><strong>[</strong><strong>]</strong> = <strong>$file</strong>;<a name="a1335"></a><br />1335          <strong>}</strong><a name="a1336"></a><br />1336  <a name="a1337"></a><br />1337          <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_config">_config</a><strong>[</strong>0<strong>]</strong><strong>[</strong><font color="#66cccc">'vars'</font><strong>]</strong> = <strong>@</strong><a href="http://www.php.net/array_merge">array_merge</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_config">_config</a><strong>[</strong>0<strong>]</strong><strong>[</strong><font color="#66cccc">'vars'</font><strong>]</strong><strong>,</strong> <strong>$_config_vars</strong><strong>)</strong>;<a name="a1338"></a><br />1338          <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_config">_config</a><strong>[</strong>0<strong>]</strong><strong>[</strong><font color="#66cccc">'files'</font><strong>]</strong><strong>[</strong><strong>$file</strong><strong>]</strong> = true;<a name="a1339"></a><br />1339          <a name="a1340"></a><br />1340          <font color="blue">if</font> <strong>(</strong><strong>$scope</strong> == <font color="#66cccc">'parent'</font><strong>)</strong> <strong>{</strong><a name="a1341"></a><br />1341                  <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_config">_config</a><strong>[</strong>1<strong>]</strong><strong>[</strong><font color="#66cccc">'vars'</font><strong>]</strong> = <strong>@</strong><a href="http://www.php.net/array_merge">array_merge</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_config">_config</a><strong>[</strong>1<strong>]</strong><strong>[</strong><font color="#66cccc">'vars'</font><strong>]</strong><strong>,</strong> <strong>$_config_vars</strong><strong>)</strong>;<a name="a1342"></a><br />1342                  <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_config">_config</a><strong>[</strong>1<strong>]</strong><strong>[</strong><font color="#66cccc">'files'</font><strong>]</strong><strong>[</strong><strong>$file</strong><strong>]</strong> = true;<a name="a1343"></a><br />1343          <strong>}</strong> else <font color="blue">if</font> <strong>(</strong><strong>$scope</strong> == <font color="#66cccc">'global'</font><strong>)</strong> <strong>{</strong><a name="a1344"></a><br />1344              <font color="blue">for</font> <strong>(</strong><strong>$i</strong> = 1<strong>,</strong> <strong>$for_max</strong> = <a href="http://www.php.net/count">count</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_config">_config</a><strong>)</strong>; <strong>$i</strong> &lt; <strong>$for_max</strong>; <strong>$i</strong>++<strong>)</strong> <strong>{</strong><a name="a1345"></a><br />1345                      <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_config">_config</a><strong>[</strong><strong>$i</strong><strong>]</strong><strong>[</strong><font color="#66cccc">'vars'</font><strong>]</strong> = <strong>@</strong><a href="http://www.php.net/array_merge">array_merge</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_config">_config</a><strong>[</strong><strong>$i</strong><strong>]</strong><strong>[</strong><font color="#66cccc">'vars'</font><strong>]</strong><strong>,</strong> <strong>$_config_vars</strong><strong>)</strong>;<a name="a1346"></a><br />1346                      <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_config">_config</a><strong>[</strong><strong>$i</strong><strong>]</strong><strong>[</strong><font color="#66cccc">'files'</font><strong>]</strong><strong>[</strong><strong>$file</strong><strong>]</strong> = true;<a name="a1347"></a><br />1347              <strong>}</strong><a name="a1348"></a><br />1348          <strong>}</strong><a name="a1349"></a><br />1349  <a name="a1350"></a><br />1350          <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$debugging">debugging</a><strong>)</strong> <strong>{</strong><a name="a1351"></a><br />1351              <strong>$debug_start_time</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_microtime">_get_microtime</a><strong>(</strong><strong>)</strong>;<a name="a1352"></a><br />1352              <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_smarty_debug_info">_smarty_debug_info</a><strong>[</strong><strong>]</strong> = array<strong>(</strong><font color="#66cccc">'type'</font>      =&gt; <font color="#66cccc">'config'</font><strong>,</strong><a name="a1353"></a><br />1353                                                  <font color="#66cccc">'filename'</font>  =&gt; <strong>$file</strong>.<font color="#66cccc">' ['</font>.<strong>$section</strong>.<font color="#66cccc">'] '</font>.<strong>$scope</strong><strong>,</strong><a name="a1354"></a><br />1354                                                  <font color="#66cccc">'depth'</font>     =&gt; <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_inclusion_depth">_inclusion_depth</a><strong>,</strong><a name="a1355"></a><br />1355                                                  <font color="#66cccc">'exec_time'</font> =&gt; <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_microtime">_get_microtime</a><strong>(</strong><strong>)</strong> - <strong>$debug_start_time</strong><strong>)</strong>;<a name="a1356"></a><br />1356          <strong>}</strong><a name="a1357"></a><br />1357      <a name="a1358"></a><br />1358      <strong>}</strong><a name="a1359"></a><br />1359  <a name="a1360"></a><br />1360      <font color="#009999">/**</font><a name="a1361"></a><br />1361  <font color="#009999">     * return a reference to a registered object</font><a name="a1362"></a><br />1362  <font color="#009999">     *</font><a name="a1363"></a><br />1363  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$name </strong><a name="a1364"></a><br />1364  <font color="#009999">     */</font>    <a name="a1365"></a><br />1365      <font color="blue">function</font> <strong>&amp;</strong><a href="../Smarty/Smarty.html#methodget_registered_object">get_registered_object</a><strong>(</strong><strong>$name</strong><strong>)</strong> <strong>{</strong><a name="a1366"></a><br />1366          <font color="blue">if</font> <strong>(</strong><strong>!</strong>isset<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_reg_objects">_reg_objects</a><strong>[</strong><strong>$name</strong><strong>]</strong><strong>)</strong><strong>)</strong><a name="a1367"></a><br />1367          <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_trigger_fatal_error">_trigger_fatal_error</a><strong>(</strong>&quot;<font color="#66cccc">'<strong>$name</strong>' is not a registered object</font>&quot;<strong>)</strong>;<a name="a1368"></a><br />1368  <a name="a1369"></a><br />1369          <font color="blue">if</font> <strong>(</strong><strong>!</strong><a href="http://www.php.net/is_object">is_object</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_reg_objects">_reg_objects</a><strong>[</strong><strong>$name</strong><strong>]</strong><strong>[</strong>0<strong>]</strong><strong>)</strong><strong>)</strong><a name="a1370"></a><br />1370          <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_trigger_fatal_error">_trigger_fatal_error</a><strong>(</strong>&quot;<font color="#66cccc">registered '<strong>$name</strong>' is not an object</font>&quot;<strong>)</strong>;<a name="a1371"></a><br />1371  <a name="a1372"></a><br />1372          <font color="blue">return</font> <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_reg_objects">_reg_objects</a><strong>[</strong><strong>$name</strong><strong>]</strong><strong>[</strong>0<strong>]</strong>;        <a name="a1373"></a><br />1373      <strong>}</strong>    <a name="a1374"></a><br />1374  <a name="a1375"></a><br />1375      <font color="blue">/**#@+</font color="blue"><a name="a1376"></a><br />1376  <font color="blue">     *</font color="blue"><font color="blue"> </font color="blue"><strong><font color = "#0099FF">@access</font></strong><font color="blue"> private</font color="blue"><a name="a1377"></a><br />1377  <font color="blue">     */</font color="blue"><a name="a1378"></a><br />1378      <font color="#009999">/**</font><a name="a1379"></a><br />1379  <font color="#009999">     * determines if a resource is trusted or not</font><a name="a1380"></a><br />1380  <font color="#009999">     *</font><a name="a1381"></a><br />1381  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$resource_type </strong><a name="a1382"></a><br />1382  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$resource_name </strong><a name="a1383"></a><br />1383  <font color="#009999">     */</font>    <a name="a1384"></a><br />1384      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_is_trusted">_is_trusted</a><strong>(</strong><strong>$resource_type</strong><strong>,</strong> <strong>$resource_name</strong><strong>)</strong><a name="a1385"></a><br />1385      <strong>{</strong><a name="a1386"></a><br />1386          <strong>$_smarty_trusted</strong> = false;<a name="a1387"></a><br />1387          <font color="blue">if</font> <strong>(</strong><strong>$resource_type</strong> == <font color="#66cccc">'file'</font><strong>)</strong> <strong>{</strong><a name="a1388"></a><br />1388              <font color="blue">if</font> <strong>(</strong><strong>!</strong>empty<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$trusted_dir">trusted_dir</a><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1389"></a><br />1389                  <font color="green">// see if template file is within a trusted directory. If so,</font><a name="a1390"></a><br />1390                  <font color="green">// disable security during the execution of the template.</font><a name="a1391"></a><br />1391  <a name="a1392"></a><br />1392                  <font color="blue">if</font> <strong>(</strong><strong>!</strong>empty<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$trusted_dir">trusted_dir</a><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1393"></a><br />1393                      <font color="blue">foreach</font> <strong>(</strong>(array)<strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$trusted_dir">trusted_dir</a> as <strong>$curr_dir</strong><strong>)</strong> <strong>{</strong><a name="a1394"></a><br />1394                          <font color="blue">if</font> <strong>(</strong><strong>!</strong>empty<strong>(</strong><strong>$curr_dir</strong><strong>)</strong> &amp;&amp; <a href="http://www.php.net/is_readable">is_readable</a> <strong>(</strong><strong>$curr_dir</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1395"></a><br />1395                              <font color="blue">if</font> <strong>(</strong><a href="http://www.php.net/substr">substr</a><strong>(</strong><a href="http://www.php.net/realpath">realpath</a><strong>(</strong><strong>$resource_name</strong><strong>)</strong><strong>,</strong>0<strong>,</strong> <a href="http://www.php.net/strlen">strlen</a><strong>(</strong><a href="http://www.php.net/realpath">realpath</a><strong>(</strong><strong>$curr_dir</strong><strong>)</strong><strong>)</strong><strong>)</strong> == <a href="http://www.php.net/realpath">realpath</a><strong>(</strong><strong>$curr_dir</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1396"></a><br />1396                                  <strong>$_smarty_trusted</strong> = true;<a name="a1397"></a><br />1397                                  break;<a name="a1398"></a><br />1398                              <strong>}</strong><a name="a1399"></a><br />1399                          <strong>}</strong><a name="a1400"></a><br />1400                      <strong>}</strong><a name="a1401"></a><br />1401                  <strong>}</strong><a name="a1402"></a><br />1402              <strong>}</strong><a name="a1403"></a><br />1403          <strong>}</strong> else <strong>{</strong><a name="a1404"></a><br />1404              <font color="green">// resource is not on local file system</font><a name="a1405"></a><br />1405              <strong>$resource_func</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'resource'</font><strong>]</strong><strong>[</strong><strong>$resource_type</strong><strong>]</strong><strong>[</strong>0<strong>]</strong><strong>[</strong>3<strong>]</strong>;<a name="a1406"></a><br />1406              <strong>$_smarty_trusted</strong> = <strong>$resource_func</strong><strong>(</strong><strong>$resource_name</strong><strong>,</strong> <strong>$this</strong><strong>)</strong>;<a name="a1407"></a><br />1407          <strong>}</strong><a name="a1408"></a><br />1408  <a name="a1409"></a><br />1409          <font color="blue">return</font> <strong>$_smarty_trusted</strong>;<a name="a1410"></a><br />1410      <strong>}</strong><a name="a1411"></a><br />1411  <a name="a1412"></a><br />1412      <a name="a1413"></a><br />1413      <font color="#009999">/**</font><a name="a1414"></a><br />1414  <font color="#009999">     * determines if a resource is secure or not.</font><a name="a1415"></a><br />1415  <font color="#009999">     *</font><a name="a1416"></a><br />1416  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$resource_type </strong><a name="a1417"></a><br />1417  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$resource_name </strong><a name="a1418"></a><br />1418  <font color="#009999">     */</font>    <a name="a1419"></a><br />1419      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_is_secure">_is_secure</a><strong>(</strong><strong>$resource_type</strong><strong>,</strong> <strong>$resource_name</strong><strong>)</strong><a name="a1420"></a><br />1420      <strong>{</strong><a name="a1421"></a><br />1421          <font color="blue">if</font> <strong>(</strong><strong>!</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$security">security</a> || <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$security_settings">security_settings</a><strong>[</strong><font color="#66cccc">'INCLUDE_ANY'</font><strong>]</strong><strong>)</strong> <strong>{</strong><a name="a1422"></a><br />1422              <font color="blue">return</font> true;<a name="a1423"></a><br />1423          <strong>}</strong><a name="a1424"></a><br />1424  <a name="a1425"></a><br />1425          <strong>$_smarty_secure</strong> = false;<a name="a1426"></a><br />1426          <font color="blue">if</font> <strong>(</strong><strong>$resource_type</strong> == <font color="#66cccc">'file'</font><strong>)</strong> <strong>{</strong><a name="a1427"></a><br />1427              <font color="blue">if</font> <strong>(</strong><strong>!</strong>empty<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$secure_dir">secure_dir</a><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1428"></a><br />1428                  <font color="blue">foreach</font> <strong>(</strong>(array)<strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$secure_dir">secure_dir</a> as <strong>$curr_dir</strong><strong>)</strong> <strong>{</strong><a name="a1429"></a><br />1429                      <font color="blue">if</font> <strong>(</strong> <strong>!</strong>empty<strong>(</strong><strong>$curr_dir</strong><strong>)</strong> &amp;&amp; <a href="http://www.php.net/is_readable">is_readable</a> <strong>(</strong><strong>$curr_dir</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1430"></a><br />1430                          <font color="blue">if</font> <strong>(</strong><a href="http://www.php.net/substr">substr</a><strong>(</strong><a href="http://www.php.net/realpath">realpath</a><strong>(</strong><strong>$resource_name</strong><strong>)</strong><strong>,</strong>0<strong>,</strong> <a href="http://www.php.net/strlen">strlen</a><strong>(</strong><a href="http://www.php.net/realpath">realpath</a><strong>(</strong><strong>$curr_dir</strong><strong>)</strong><strong>)</strong><strong>)</strong> == <a href="http://www.php.net/realpath">realpath</a><strong>(</strong><strong>$curr_dir</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1431"></a><br />1431                              <strong>$_smarty_secure</strong> = true;<a name="a1432"></a><br />1432                              break;<a name="a1433"></a><br />1433                          <strong>}</strong><a name="a1434"></a><br />1434                      <strong>}</strong><a name="a1435"></a><br />1435                  <strong>}</strong><a name="a1436"></a><br />1436              <strong>}</strong><a name="a1437"></a><br />1437          <strong>}</strong> else <strong>{</strong><a name="a1438"></a><br />1438              <font color="green">// resource is not on local file system</font><a name="a1439"></a><br />1439              <strong>$resource_func</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'resource'</font><strong>]</strong><strong>[</strong><strong>$resource_type</strong><strong>]</strong><strong>[</strong>0<strong>]</strong><strong>[</strong>2<strong>]</strong>;<a name="a1440"></a><br />1440              <strong>$_smarty_secure</strong> = <strong>$resource_func</strong><strong>(</strong><strong>$resource_name</strong><strong>,</strong> <strong>$_smarty_secure</strong><strong>,</strong> <strong>$this</strong><strong>)</strong>;<a name="a1441"></a><br />1441          <strong>}</strong><a name="a1442"></a><br />1442  <a name="a1443"></a><br />1443          <font color="blue">return</font> <strong>$_smarty_secure</strong>;<a name="a1444"></a><br />1444      <strong>}</strong><a name="a1445"></a><br />1445  <a name="a1446"></a><br />1446  <a name="a1447"></a><br />1447      <font color="#009999">/**</font><a name="a1448"></a><br />1448  <font color="#009999">     * Retrieves PHP script resource</font><a name="a1449"></a><br />1449  <font color="#009999">     *</font><a name="a1450"></a><br />1450  <font color="#009999">     * sets $php_resource to the returned resource</font><a name="a1451"></a><br />1451  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$resource </strong><a name="a1452"></a><br />1452  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$resource_type </strong><a name="a1453"></a><br />1453  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"> </font><em>$php_resource </em><a name="a1454"></a><br />1454  <font color="#009999">     */</font>    <a name="a1455"></a><br />1455      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_get_php_resource">_get_php_resource</a><strong>(</strong><strong>$resource</strong><strong>,</strong> <strong>&amp;</strong><strong>$resource_type</strong><strong>,</strong> <strong>&amp;</strong><strong>$php_resource</strong><strong>)</strong><a name="a1456"></a><br />1456      <strong>{</strong><a name="a1457"></a><br />1457          <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_parse_file_path">_parse_file_path</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$trusted_dir">trusted_dir</a><strong>,</strong> <strong>$resource</strong><strong>,</strong> <strong>$resource_type</strong><strong>,</strong> <strong>$resource_name</strong><strong>)</strong>;<a name="a1458"></a><br />1458  <a name="a1459"></a><br />1459          <font color="green">/*</font><a name="a1460"></a><br />1460  <font color="green">         * Find out if the resource exists.</font><a name="a1461"></a><br />1461  <font color="green">         */</font><a name="a1462"></a><br />1462          <a name="a1463"></a><br />1463          <font color="blue">if</font> <strong>(</strong><strong>$resource_type</strong> == <font color="#66cccc">'file'</font><strong>)</strong> <strong>{</strong><a name="a1464"></a><br />1464              <strong>$readable</strong> = false;<a name="a1465"></a><br />1465              <font color="blue">if</font><strong>(</strong><a href="http://www.php.net/file_exists">file_exists</a><strong>(</strong><strong>$resource_name</strong><strong>)</strong> &amp;&amp; <a href="http://www.php.net/is_readable">is_readable</a><strong>(</strong><strong>$resource_name</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1466"></a><br />1466                  <strong>$readable</strong> = true;<a name="a1467"></a><br />1467              <strong>}</strong> else <strong>{</strong><a name="a1468"></a><br />1468                  <font color="green">// test for file in include_path</font><a name="a1469"></a><br />1469                  <font color="blue">if</font><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_include_path">_get_include_path</a><strong>(</strong><strong>$resource_name</strong><strong>,</strong><strong>$_include_path</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1470"></a><br />1470                      <strong>$readable</strong> = true;<a name="a1471"></a><br />1471                  <strong>}</strong><a name="a1472"></a><br />1472              <strong>}</strong><a name="a1473"></a><br />1473          <strong>}</strong> else <font color="blue">if</font> <strong>(</strong><strong>$resource_type</strong> != <font color="#66cccc">'file'</font><strong>)</strong> <strong>{</strong><a name="a1474"></a><br />1474              <strong>$readable</strong> = true;<a name="a1475"></a><br />1475              <strong>$template_source</strong> = null;<a name="a1476"></a><br />1476              <strong>$resource_func</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'resource'</font><strong>]</strong><strong>[</strong><strong>$resource_type</strong><strong>]</strong><strong>[</strong>0<strong>]</strong><strong>[</strong>0<strong>]</strong>;<a name="a1477"></a><br />1477              <strong>$readable</strong> = <strong>$resource_func</strong><strong>(</strong><strong>$resource_name</strong><strong>,</strong> <strong>$template_source</strong><strong>,</strong> <strong>$this</strong><strong>)</strong>;<a name="a1478"></a><br />1478          <strong>}</strong><a name="a1479"></a><br />1479  <a name="a1480"></a><br />1480          <font color="green">/*</font><a name="a1481"></a><br />1481  <font color="green">         * Set the error function, depending on which class calls us.</font><a name="a1482"></a><br />1482  <font color="green">         */</font><a name="a1483"></a><br />1483          <font color="blue">if</font> <strong>(</strong><a href="http://www.php.net/method_exists">method_exists</a><strong>(</strong><strong>$this</strong><strong>,</strong> <font color="#66cccc">'_syntax_error'</font><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1484"></a><br />1484              <strong>$error_func</strong> = <font color="#66cccc">'_syntax_error'</font>;<a name="a1485"></a><br />1485          <strong>}</strong> else <strong>{</strong><a name="a1486"></a><br />1486              <strong>$error_func</strong> = <font color="#66cccc">'trigger_error'</font>;<a name="a1487"></a><br />1487          <strong>}</strong><a name="a1488"></a><br />1488  <a name="a1489"></a><br />1489          <font color="blue">if</font> <strong>(</strong><strong>$readable</strong><strong>)</strong> <strong>{</strong><a name="a1490"></a><br />1490              <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$security">security</a><strong>)</strong> <strong>{</strong><a name="a1491"></a><br />1491                  <font color="blue">if</font> <strong>(</strong><strong>!</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_is_trusted">_is_trusted</a><strong>(</strong><strong>$resource_type</strong><strong>,</strong> <strong>$resource_name</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1492"></a><br />1492                      <strong>$this</strong><strong>-&gt;</strong><strong>$error_func</strong><strong>(</strong>&quot;<font color="#66cccc">(secure mode) '<strong>$resource_type</strong>:<strong>$resource_name</strong>' is not trusted</font>&quot;<strong>)</strong>;<a name="a1493"></a><br />1493                      <font color="blue">return</font> false;<a name="a1494"></a><br />1494                  <strong>}</strong><a name="a1495"></a><br />1495              <strong>}</strong><a name="a1496"></a><br />1496          <strong>}</strong> else <strong>{</strong><a name="a1497"></a><br />1497              <strong>$this</strong><strong>-&gt;</strong><strong>$error_func</strong><strong>(</strong>&quot;<font color="#66cccc">'<strong>$resource_type</strong>: <strong>$resource_name</strong>' is not readable</font>&quot;<strong>)</strong>;<a name="a1498"></a><br />1498              <font color="blue">return</font> false;<a name="a1499"></a><br />1499          <strong>}</strong><a name="a1500"></a><br />1500  <a name="a1501"></a><br />1501          <font color="blue">if</font> <strong>(</strong><strong>$resource_type</strong> == <font color="#66cccc">'file'</font><strong>)</strong> <strong>{</strong><a name="a1502"></a><br />1502              <strong>$php_resource</strong> = <strong>$resource_name</strong>;<a name="a1503"></a><br />1503          <strong>}</strong> else <strong>{</strong><a name="a1504"></a><br />1504              <strong>$php_resource</strong> = <strong>$template_source</strong>;<a name="a1505"></a><br />1505          <strong>}</strong><a name="a1506"></a><br />1506  <a name="a1507"></a><br />1507          <font color="blue">return</font> true;<a name="a1508"></a><br />1508      <strong>}</strong><a name="a1509"></a><br />1509  <a name="a1510"></a><br />1510  <a name="a1511"></a><br />1511      <font color="#009999">/**</font><a name="a1512"></a><br />1512  <font color="#009999">     * umm... process the template</font><a name="a1513"></a><br />1513  <font color="#009999">     *</font><a name="a1514"></a><br />1514  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$tpl_file </strong><a name="a1515"></a><br />1515  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$compile_path </strong><a name="a1516"></a><br />1516  <font color="#009999">     */</font>    <a name="a1517"></a><br />1517      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_process_template">_process_template</a><strong>(</strong><strong>$tpl_file</strong><strong>,</strong> <strong>$compile_path</strong><strong>)</strong><a name="a1518"></a><br />1518      <strong>{</strong><a name="a1519"></a><br />1519          <font color="green">// test if template needs to be compiled</font><a name="a1520"></a><br />1520          <font color="blue">if</font> <strong>(</strong><strong>!</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$force_compile">force_compile</a> &amp;&amp; <a href="http://www.php.net/file_exists">file_exists</a><strong>(</strong><strong>$compile_path</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1521"></a><br />1521              <font color="blue">if</font> <strong>(</strong><strong>!</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$compile_check">compile_check</a><strong>)</strong> <strong>{</strong><a name="a1522"></a><br />1522                  <font color="green">// no need to check if the template needs recompiled</font><a name="a1523"></a><br />1523                  <font color="blue">return</font> true;<a name="a1524"></a><br />1524              <strong>}</strong> else <strong>{</strong><a name="a1525"></a><br />1525                  <font color="green">// get template source and timestamp</font><a name="a1526"></a><br />1526                  <font color="blue">if</font> <strong>(</strong><strong>!</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_fetch_template_info">_fetch_template_info</a><strong>(</strong><strong>$tpl_file</strong><strong>,</strong> <strong>$template_source</strong><strong>,</strong><a name="a1527"></a><br />1527                                                   <strong>$template_timestamp</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1528"></a><br />1528                      <font color="blue">return</font> false;<a name="a1529"></a><br />1529                  <strong>}</strong><a name="a1530"></a><br />1530                  <font color="blue">if</font> <strong>(</strong><strong>$template_timestamp</strong> &lt;= <a href="http://www.php.net/filemtime">filemtime</a><strong>(</strong><strong>$compile_path</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1531"></a><br />1531                      <font color="green">// template not expired, no recompile</font><a name="a1532"></a><br />1532                      <font color="blue">return</font> true;<a name="a1533"></a><br />1533                  <strong>}</strong> else <strong>{</strong><a name="a1534"></a><br />1534                      <font color="green">// compile template</font><a name="a1535"></a><br />1535                      <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_compile_template">_compile_template</a><strong>(</strong><strong>$tpl_file</strong><strong>,</strong> <strong>$template_source</strong><strong>,</strong> <strong>$template_compiled</strong><strong>)</strong>;<a name="a1536"></a><br />1536                      <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_write_compiled_template">_write_compiled_template</a><strong>(</strong><strong>$compile_path</strong><strong>,</strong> <strong>$template_compiled</strong><strong>,</strong> <strong>$template_timestamp</strong><strong>)</strong>;<a name="a1537"></a><br />1537                      <font color="blue">return</font> true;<a name="a1538"></a><br />1538                  <strong>}</strong><a name="a1539"></a><br />1539              <strong>}</strong><a name="a1540"></a><br />1540          <strong>}</strong> else <strong>{</strong><a name="a1541"></a><br />1541              <font color="green">// compiled template does not exist, or forced compile</font><a name="a1542"></a><br />1542              <font color="blue">if</font> <strong>(</strong><strong>!</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_fetch_template_info">_fetch_template_info</a><strong>(</strong><strong>$tpl_file</strong><strong>,</strong> <strong>$template_source</strong><strong>,</strong><a name="a1543"></a><br />1543                                               <strong>$template_timestamp</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1544"></a><br />1544                  <font color="blue">return</font> false;<a name="a1545"></a><br />1545              <strong>}</strong><a name="a1546"></a><br />1546              <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_compile_template">_compile_template</a><strong>(</strong><strong>$tpl_file</strong><strong>,</strong> <strong>$template_source</strong><strong>,</strong> <strong>$template_compiled</strong><strong>)</strong>;<a name="a1547"></a><br />1547              <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_write_compiled_template">_write_compiled_template</a><strong>(</strong><strong>$compile_path</strong><strong>,</strong> <strong>$template_compiled</strong><strong>,</strong> <strong>$template_timestamp</strong><strong>)</strong>;<a name="a1548"></a><br />1548              <font color="blue">return</font> true;<a name="a1549"></a><br />1549          <strong>}</strong><a name="a1550"></a><br />1550      <strong>}</strong><a name="a1551"></a><br />1551  <a name="a1552"></a><br />1552      <font color="#009999">/**</font><a name="a1553"></a><br />1553  <font color="#009999">     * Get the compile path for this template file</font><a name="a1554"></a><br />1554  <font color="#009999">     *</font><a name="a1555"></a><br />1555  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$tpl_file </strong><a name="a1556"></a><br />1556  <font color="#009999">     */</font>    <a name="a1557"></a><br />1557      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_get_compile_path">_get_compile_path</a><strong>(</strong><strong>$tpl_file</strong><strong>)</strong><a name="a1558"></a><br />1558      <strong>{</strong><a name="a1559"></a><br />1559          <font color="blue">return</font> <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_auto_filename">_get_auto_filename</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$compile_dir">compile_dir</a><strong>,</strong> <strong>$tpl_file</strong><strong>,</strong><a name="a1560"></a><br />1560                                           <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_compile_id">_compile_id</a><strong>)</strong>;<a name="a1561"></a><br />1561      <strong>}</strong><a name="a1562"></a><br />1562  <a name="a1563"></a><br />1563     <font color="#009999">/**</font><a name="a1564"></a><br />1564  <font color="#009999">     * write the compiled template</font><a name="a1565"></a><br />1565  <font color="#009999">     *</font><a name="a1566"></a><br />1566  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$compile_path </strong><a name="a1567"></a><br />1567  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$template_compiled </strong><a name="a1568"></a><br />1568  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>integer </em><font color="#009999"></font><strong>$template_timestamp </strong><a name="a1569"></a><br />1569  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@return </font></strong><font color="#009999"></font><em>true </em><a name="a1570"></a><br />1570  <font color="#009999">     */</font>    <a name="a1571"></a><br />1571      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_write_compiled_template">_write_compiled_template</a><strong>(</strong><strong>$compile_path</strong><strong>,</strong> <strong>$template_compiled</strong><strong>,</strong> <strong>$template_timestamp</strong><strong>)</strong><a name="a1572"></a><br />1572      <strong>{</strong><a name="a1573"></a><br />1573          <font color="green">// we save everything into $compile_dir</font><a name="a1574"></a><br />1574          <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_write_file">_write_file</a><strong>(</strong><strong>$compile_path</strong><strong>,</strong> <strong>$template_compiled</strong><strong>,</strong> true<strong>)</strong>;<a name="a1575"></a><br />1575          <a href="http://www.php.net/touch">touch</a><strong>(</strong><strong>$compile_path</strong><strong>,</strong> <strong>$template_timestamp</strong><strong>)</strong>;<a name="a1576"></a><br />1576          <font color="blue">return</font> true;<a name="a1577"></a><br />1577      <strong>}</strong><a name="a1578"></a><br />1578  <a name="a1579"></a><br />1579      <font color="#009999">/**</font><a name="a1580"></a><br />1580  <font color="#009999">     * parse out the type and name from the template resource</font><a name="a1581"></a><br />1581  <font color="#009999">     *</font><a name="a1582"></a><br />1582  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$file_base_path </strong><a name="a1583"></a><br />1583  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$file_path </strong><a name="a1584"></a><br />1584  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$resource_type </strong><a name="a1585"></a><br />1585  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$resource_name </strong><a name="a1586"></a><br />1586  <font color="#009999">     */</font>    <a name="a1587"></a><br />1587      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_parse_file_path">_parse_file_path</a><strong>(</strong><strong>$file_base_path</strong><strong>,</strong> <strong>$file_path</strong><strong>,</strong> <strong>&amp;</strong><strong>$resource_type</strong><strong>,</strong> <strong>&amp;</strong><strong>$resource_name</strong><strong>)</strong><a name="a1588"></a><br />1588      <strong>{</strong><a name="a1589"></a><br />1589          <font color="green">// split tpl_path by the first colon</font><a name="a1590"></a><br />1590          <strong>$_file_path_parts</strong> = <a href="http://www.php.net/explode">explode</a><strong>(</strong><font color="#66cccc">':'</font><strong>,</strong> <strong>$file_path</strong><strong>,</strong> 2<strong>)</strong>;<a name="a1591"></a><br />1591  <a name="a1592"></a><br />1592          <font color="blue">if</font> <strong>(</strong><a href="http://www.php.net/count">count</a><strong>(</strong><strong>$_file_path_parts</strong><strong>)</strong> == 1<strong>)</strong> <strong>{</strong><a name="a1593"></a><br />1593              <font color="green">// no resource type, treat as type &quot;file&quot;</font><a name="a1594"></a><br />1594              <strong>$resource_type</strong> = <font color="#66cccc">'file'</font>;<a name="a1595"></a><br />1595              <strong>$resource_name</strong> = <strong>$_file_path_parts</strong><strong>[</strong>0<strong>]</strong>;<a name="a1596"></a><br />1596          <strong>}</strong> else <strong>{</strong><a name="a1597"></a><br />1597              <strong>$resource_type</strong> = <strong>$_file_path_parts</strong><strong>[</strong>0<strong>]</strong>;<a name="a1598"></a><br />1598              <strong>$resource_name</strong> = <strong>$_file_path_parts</strong><strong>[</strong>1<strong>]</strong>;<a name="a1599"></a><br />1599              <font color="blue">if</font> <strong>(</strong><strong>$resource_type</strong> != <font color="#66cccc">'file'</font><strong>)</strong> <strong>{</strong><a name="a1600"></a><br />1600                  <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_load_resource_plugin">_load_resource_plugin</a><strong>(</strong><strong>$resource_type</strong><strong>)</strong>;<a name="a1601"></a><br />1601              <strong>}</strong><a name="a1602"></a><br />1602          <strong>}</strong><a name="a1603"></a><br />1603  <a name="a1604"></a><br />1604          <font color="blue">if</font> <strong>(</strong><strong>$resource_type</strong> == <font color="#66cccc">'file'</font><strong>)</strong> <strong>{</strong><a name="a1605"></a><br />1605              <font color="blue">if</font> <strong>(</strong><strong>!</strong><a href="http://www.php.net/preg_match">preg_match</a><strong>(</strong><font color="#66cccc">&quot;/^([\/\\\\]|[a-zA-Z]:[\/\\\\])/&quot;</font><strong>,</strong> <strong>$resource_name</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1606"></a><br />1606                  <font color="green">// relative pathname to $file_base_path</font><a name="a1607"></a><br />1607                  <font color="green">// use the first directory where the file is found</font><a name="a1608"></a><br />1608                  <font color="blue">foreach</font> <strong>(</strong>(array)<strong>$file_base_path</strong> as <strong>$_curr_path</strong><strong>)</strong> <strong>{</strong><a name="a1609"></a><br />1609                      <strong>$_fullpath</strong> = <strong>$_curr_path</strong> . <a href="../Smarty/_universibo2_framework_smarty_Smarty_class_php.html#defineDIR_SEP">DIR_SEP</a> . <strong>$resource_name</strong>;<a name="a1610"></a><br />1610                      <font color="blue">if</font> <strong>(</strong><a href="http://www.php.net/file_exists">file_exists</a><strong>(</strong><strong>$_fullpath</strong><strong>)</strong> &amp;&amp; <a href="http://www.php.net/is_file">is_file</a><strong>(</strong><strong>$_fullpath</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1611"></a><br />1611                          <strong>$resource_name</strong> = <strong>$_fullpath</strong>;<a name="a1612"></a><br />1612                          <font color="blue">return</font> true;<a name="a1613"></a><br />1613                      <strong>}</strong><a name="a1614"></a><br />1614                      <font color="green">// didn't find the file, try include_path</font><a name="a1615"></a><br />1615                      <font color="blue">if</font><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_include_path">_get_include_path</a><strong>(</strong><strong>$_fullpath</strong><strong>,</strong> <strong>$_include_path</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1616"></a><br />1616                          <strong>$resource_name</strong> = <strong>$_include_path</strong>;<a name="a1617"></a><br />1617                          <font color="blue">return</font> true;<a name="a1618"></a><br />1618                      <strong>}</strong><a name="a1619"></a><br />1619                  <strong>}</strong><a name="a1620"></a><br />1620                  <font color="blue">return</font> false;<a name="a1621"></a><br />1621              <strong>}</strong><a name="a1622"></a><br />1622          <strong>}</strong><a name="a1623"></a><br />1623  <a name="a1624"></a><br />1624          <font color="green">// resource type != file</font><a name="a1625"></a><br />1625          <font color="blue">return</font> true;<a name="a1626"></a><br />1626      <strong>}</strong><a name="a1627"></a><br />1627  <a name="a1628"></a><br />1628  <a name="a1629"></a><br />1629      <font color="#009999">/**</font><a name="a1630"></a><br />1630  <font color="#009999">     * fetch the template info. Gets timestamp, and source</font><a name="a1631"></a><br />1631  <font color="#009999">     * if get_source is true</font><a name="a1632"></a><br />1632  <font color="#009999">     *</font><a name="a1633"></a><br />1633  <font color="#009999">     * sets $template_source to the source of the template, and</font><a name="a1634"></a><br />1634  <font color="#009999">     * $template_timestamp to its time stamp</font><a name="a1635"></a><br />1635  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$tpl_path </strong><a name="a1636"></a><br />1636  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$template_source </strong><a name="a1637"></a><br />1637  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>integer </em><font color="#009999"></font><strong>$template_timestamp </strong><a name="a1638"></a><br />1638  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>boolean </em><font color="#009999"></font><strong>$get_source </strong><a name="a1639"></a><br />1639  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>boolean </em><font color="#009999"></font><strong>$quiet </strong><a name="a1640"></a><br />1640  <font color="#009999">     */</font>    <a name="a1641"></a><br />1641      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_fetch_template_info">_fetch_template_info</a><strong>(</strong><strong>$tpl_path</strong><strong>,</strong> <strong>&amp;</strong><strong>$template_source</strong><strong>,</strong> <strong>&amp;</strong><strong>$template_timestamp</strong><strong>,</strong> <strong>$get_source</strong> = true<strong>,</strong> <strong>$quiet</strong> = false<strong>)</strong><a name="a1642"></a><br />1642      <strong>{</strong><a name="a1643"></a><br />1643          <strong>$_return</strong> = false;<a name="a1644"></a><br />1644          <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_parse_file_path">_parse_file_path</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$template_dir">template_dir</a><strong>,</strong> <strong>$tpl_path</strong><strong>,</strong> <strong>$resource_type</strong><strong>,</strong> <strong>$resource_name</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1645"></a><br />1645              <font color="blue">switch</font> <strong>(</strong><strong>$resource_type</strong><strong>)</strong> <strong>{</strong><a name="a1646"></a><br />1646                  case <font color="#66cccc">'file'</font>:<a name="a1647"></a><br />1647                      <font color="blue">if</font> <strong>(</strong><strong>$get_source</strong><strong>)</strong> <strong>{</strong><a name="a1648"></a><br />1648                          <strong>$template_source</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_read_file">_read_file</a><strong>(</strong><strong>$resource_name</strong><strong>)</strong>;<a name="a1649"></a><br />1649                      <strong>}</strong><a name="a1650"></a><br />1650                      <strong>$template_timestamp</strong> = <a href="http://www.php.net/filemtime">filemtime</a><strong>(</strong><strong>$resource_name</strong><strong>)</strong>;<a name="a1651"></a><br />1651                      <strong>$_return</strong> = true;<a name="a1652"></a><br />1652                      break;<a name="a1653"></a><br />1653  <a name="a1654"></a><br />1654                  default:<a name="a1655"></a><br />1655                      <font color="green">// call resource functions to fetch the template source and timestamp</font><a name="a1656"></a><br />1656                      <font color="blue">if</font> <strong>(</strong><strong>$get_source</strong><strong>)</strong> <strong>{</strong><a name="a1657"></a><br />1657                          <strong>$resource_func</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'resource'</font><strong>]</strong><strong>[</strong><strong>$resource_type</strong><strong>]</strong><strong>[</strong>0<strong>]</strong><strong>[</strong>0<strong>]</strong>;<a name="a1658"></a><br />1658                          <strong>$_source_return</strong> = <strong>$resource_func</strong><strong>(</strong><strong>$resource_name</strong><strong>,</strong> <strong>$template_source</strong><strong>,</strong> <strong>$this</strong><strong>)</strong>;<a name="a1659"></a><br />1659                      <strong>}</strong> else <strong>{</strong><a name="a1660"></a><br />1660                          <strong>$_source_return</strong> = true;<a name="a1661"></a><br />1661                      <strong>}</strong><a name="a1662"></a><br />1662                      <strong>$resource_func</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'resource'</font><strong>]</strong><strong>[</strong><strong>$resource_type</strong><strong>]</strong><strong>[</strong>0<strong>]</strong><strong>[</strong>1<strong>]</strong>;<a name="a1663"></a><br />1663                      <strong>$_timestamp_return</strong> = <strong>$resource_func</strong><strong>(</strong><strong>$resource_name</strong><strong>,</strong> <strong>$template_timestamp</strong><strong>,</strong> <strong>$this</strong><strong>)</strong>;<a name="a1664"></a><br />1664                      <strong>$_return</strong> = <strong>$_source_return</strong> &amp;&amp; <strong>$_timestamp_return</strong>;<a name="a1665"></a><br />1665                      break;<a name="a1666"></a><br />1666              <strong>}</strong><a name="a1667"></a><br />1667          <strong>}</strong><a name="a1668"></a><br />1668          <a name="a1669"></a><br />1669          <font color="blue">if</font> <strong>(</strong><strong>!</strong><strong>$_return</strong><strong>)</strong> <strong>{</strong><a name="a1670"></a><br />1670              <font color="green">// see if we can get a template with the default template handler</font><a name="a1671"></a><br />1671              <font color="blue">if</font> <strong>(</strong><strong>!</strong>empty<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$default_template_handler_func">default_template_handler_func</a><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1672"></a><br />1672                  <font color="blue">if</font> <strong>(</strong><strong>!</strong><a href="http://www.php.net/function_exists">function_exists</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$default_template_handler_func">default_template_handler_func</a><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1673"></a><br />1673                      <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#methodtrigger_error">trigger_error</a><strong>(</strong>&quot;<font color="#66cccc">default template handler function \&quot;<strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$default_template_handler_func">default_template_handler_func</a>\&quot; doesn't exist.</font>&quot;<strong>)</strong>;<a name="a1674"></a><br />1674                  <strong>}</strong> else <strong>{</strong><a name="a1675"></a><br />1675                      <strong>$funcname</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$default_template_handler_func">default_template_handler_func</a>;<a name="a1676"></a><br />1676                      <strong>$_return</strong> = <strong>$funcname</strong><strong>(</strong><strong>$resource_type</strong><strong>,</strong> <strong>$resource_name</strong><strong>,</strong> <strong>$template_source</strong><strong>,</strong> <strong>$template_timestamp</strong><strong>,</strong> <strong>$this</strong><strong>)</strong>;<a name="a1677"></a><br />1677                  <strong>}</strong><a name="a1678"></a><br />1678              <strong>}</strong><a name="a1679"></a><br />1679          <strong>}</strong><a name="a1680"></a><br />1680  <a name="a1681"></a><br />1681          <font color="blue">if</font> <strong>(</strong><strong>!</strong><strong>$_return</strong><strong>)</strong> <strong>{</strong><a name="a1682"></a><br />1682              <font color="blue">if</font> <strong>(</strong><strong>!</strong><strong>$quiet</strong><strong>)</strong> <strong>{</strong><a name="a1683"></a><br />1683                  <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#methodtrigger_error">trigger_error</a><strong>(</strong>&quot;<font color="#66cccc">unable to read template resource: \&quot;<strong>$tpl_path</strong>\&quot;</font>&quot;<strong>)</strong>;<a name="a1684"></a><br />1684              <strong>}</strong><a name="a1685"></a><br />1685          <strong>}</strong> else <font color="blue">if</font> <strong>(</strong><strong>$_return</strong> &amp;&amp; <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$security">security</a> &amp;&amp; <strong>!</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_is_secure">_is_secure</a><strong>(</strong><strong>$resource_type</strong><strong>,</strong> <strong>$resource_name</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1686"></a><br />1686              <font color="blue">if</font> <strong>(</strong><strong>!</strong><strong>$quiet</strong><strong>)</strong><a name="a1687"></a><br />1687                  <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#methodtrigger_error">trigger_error</a><strong>(</strong>&quot;<font color="#66cccc">(secure mode) accessing \&quot;<strong>$tpl_path</strong>\&quot; is not allowed</font>&quot;<strong>)</strong>;<a name="a1688"></a><br />1688              <strong>$template_source</strong> = null;<a name="a1689"></a><br />1689              <strong>$template_timestamp</strong> = null;<a name="a1690"></a><br />1690              <font color="blue">return</font> false;<a name="a1691"></a><br />1691          <strong>}</strong><a name="a1692"></a><br />1692  <a name="a1693"></a><br />1693          <font color="blue">return</font> <strong>$_return</strong>;<a name="a1694"></a><br />1694      <strong>}</strong><a name="a1695"></a><br />1695  <a name="a1696"></a><br />1696  <a name="a1697"></a><br />1697      <font color="#009999">/**</font><a name="a1698"></a><br />1698  <font color="#009999">     * called to compile the templates</font><a name="a1699"></a><br />1699  <font color="#009999">     *</font><a name="a1700"></a><br />1700  <font color="#009999">     * sets $template_compiled to the compiled template</font><a name="a1701"></a><br />1701  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$tpl_file </strong><a name="a1702"></a><br />1702  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$template_source </strong><a name="a1703"></a><br />1703  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$template_compiled </strong><a name="a1704"></a><br />1704  <font color="#009999">     */</font>    <a name="a1705"></a><br />1705      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_compile_template">_compile_template</a><strong>(</strong><strong>$tpl_file</strong><strong>,</strong> <strong>$template_source</strong><strong>,</strong> <strong>&amp;</strong><strong>$template_compiled</strong><strong>)</strong><a name="a1706"></a><br />1706      <strong>{</strong><a name="a1707"></a><br />1707          <font color="blue">if</font><strong>(</strong><a href="http://www.php.net/file_exists">file_exists</a><strong>(</strong><a href="../Smarty/_universibo2_framework_smarty_Smarty_class_php.html#defineSMARTY_DIR">SMARTY_DIR</a>.<strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$compiler_file">compiler_file</a><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1708"></a><br />1708              <font color="blue">require_once</font> <a href="../Smarty/_universibo2_framework_smarty_Smarty_class_php.html#defineSMARTY_DIR">SMARTY_DIR</a>.<strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$compiler_file">compiler_file</a>;            <a name="a1709"></a><br />1709          <strong>}</strong> else <strong>{</strong><a name="a1710"></a><br />1710              <font color="green">// use include_path</font><a name="a1711"></a><br />1711              <font color="blue">require_once</font> <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$compiler_file">compiler_file</a>;<a name="a1712"></a><br />1712          <strong>}</strong><a name="a1713"></a><br />1713  <a name="a1714"></a><br />1714          <strong>$smarty_compiler</strong> = new <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$compiler_class">compiler_class</a>;<a name="a1715"></a><br />1715  <a name="a1716"></a><br />1716          <strong>$smarty_compiler</strong><strong>-&gt;</strong>template_dir      = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$template_dir">template_dir</a>;<a name="a1717"></a><br />1717          <strong>$smarty_compiler</strong><strong>-&gt;</strong>compile_dir       = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$compile_dir">compile_dir</a>;<a name="a1718"></a><br />1718          <strong>$smarty_compiler</strong><strong>-&gt;</strong>plugins_dir       = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$plugins_dir">plugins_dir</a>;<a name="a1719"></a><br />1719          <strong>$smarty_compiler</strong><strong>-&gt;</strong>config_dir        = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$config_dir">config_dir</a>;<a name="a1720"></a><br />1720          <strong>$smarty_compiler</strong><strong>-&gt;</strong>force_compile     = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$force_compile">force_compile</a>;<a name="a1721"></a><br />1721          <strong>$smarty_compiler</strong><strong>-&gt;</strong>caching           = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$caching">caching</a>;<a name="a1722"></a><br />1722          <strong>$smarty_compiler</strong><strong>-&gt;</strong>php_handling      = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$php_handling">php_handling</a>;<a name="a1723"></a><br />1723          <strong>$smarty_compiler</strong><strong>-&gt;</strong>left_delimiter    = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$left_delimiter">left_delimiter</a>;<a name="a1724"></a><br />1724          <strong>$smarty_compiler</strong><strong>-&gt;</strong>right_delimiter   = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$right_delimiter">right_delimiter</a>;<a name="a1725"></a><br />1725          <strong>$smarty_compiler</strong><strong>-&gt;</strong>_version          = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_version">_version</a>;<a name="a1726"></a><br />1726          <strong>$smarty_compiler</strong><strong>-&gt;</strong>security          = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$security">security</a>;<a name="a1727"></a><br />1727          <strong>$smarty_compiler</strong><strong>-&gt;</strong>secure_dir        = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$secure_dir">secure_dir</a>;<a name="a1728"></a><br />1728          <strong>$smarty_compiler</strong><strong>-&gt;</strong>security_settings = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$security_settings">security_settings</a>;<a name="a1729"></a><br />1729          <strong>$smarty_compiler</strong><strong>-&gt;</strong>trusted_dir       = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$trusted_dir">trusted_dir</a>;<a name="a1730"></a><br />1730          <strong>$smarty_compiler</strong><strong>-&gt;</strong>_reg_objects      = <strong>&amp;</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_reg_objects">_reg_objects</a>;<a name="a1731"></a><br />1731          <strong>$smarty_compiler</strong><strong>-&gt;</strong>_plugins          = <strong>&amp;</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a>;<a name="a1732"></a><br />1732          <strong>$smarty_compiler</strong><strong>-&gt;</strong>_tpl_vars         = <strong>&amp;</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_tpl_vars">_tpl_vars</a>;<a name="a1733"></a><br />1733          <strong>$smarty_compiler</strong><strong>-&gt;</strong>default_modifiers = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$default_modifiers">default_modifiers</a>;<a name="a1734"></a><br />1734          <strong>$smarty_compiler</strong><strong>-&gt;</strong>compile_id        = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_compile_id">_compile_id</a>;<a name="a1735"></a><br />1735  <a name="a1736"></a><br />1736          <font color="blue">if</font> <strong>(</strong><strong>$smarty_compiler</strong><strong>-&gt;</strong>_compile_file<strong>(</strong><strong>$tpl_file</strong><strong>,</strong> <strong>$template_source</strong><strong>,</strong> <strong>$template_compiled</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1737"></a><br />1737              <font color="blue">return</font> true;<a name="a1738"></a><br />1738          <strong>}</strong> else <strong>{</strong><a name="a1739"></a><br />1739              <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#methodtrigger_error">trigger_error</a><strong>(</strong><strong>$smarty_compiler</strong><strong>-&gt;</strong>_error_msg<strong>)</strong>;<a name="a1740"></a><br />1740              <font color="blue">return</font> false;<a name="a1741"></a><br />1741          <strong>}</strong><a name="a1742"></a><br />1742      <strong>}</strong><a name="a1743"></a><br />1743  <a name="a1744"></a><br />1744      <font color="#009999">/**</font><a name="a1745"></a><br />1745  <font color="#009999">     * called for included templates</font><a name="a1746"></a><br />1746  <font color="#009999">     *</font><a name="a1747"></a><br />1747  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$_smarty_include_tpl_file </strong><a name="a1748"></a><br />1748  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$_smarty_include_vars </strong><a name="a1749"></a><br />1749  <font color="#009999">     */</font>    <a name="a1750"></a><br />1750      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_smarty_include">_smarty_include</a><strong>(</strong><strong>$_smarty_include_tpl_file</strong><strong>,</strong> <strong>$_smarty_include_vars</strong><strong>)</strong><a name="a1751"></a><br />1751      <strong>{</strong><a name="a1752"></a><br />1752          <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$debugging">debugging</a><strong>)</strong> <strong>{</strong><a name="a1753"></a><br />1753              <strong>$debug_start_time</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_microtime">_get_microtime</a><strong>(</strong><strong>)</strong>;<a name="a1754"></a><br />1754              <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_smarty_debug_info">_smarty_debug_info</a><strong>[</strong><strong>]</strong> = array<strong>(</strong><font color="#66cccc">'type'</font>      =&gt; <font color="#66cccc">'template'</font><strong>,</strong><a name="a1755"></a><br />1755                                                  <font color="#66cccc">'filename'</font>  =&gt; <strong>$_smarty_include_tpl_file</strong><strong>,</strong><a name="a1756"></a><br />1756                                                  <font color="#66cccc">'depth'</font>     =&gt; ++<strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_inclusion_depth">_inclusion_depth</a><strong>)</strong>;<a name="a1757"></a><br />1757              <strong>$included_tpls_idx</strong> = <a href="http://www.php.net/count">count</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_smarty_debug_info">_smarty_debug_info</a><strong>)</strong> - 1;<a name="a1758"></a><br />1758          <strong>}</strong><a name="a1759"></a><br />1759  <a name="a1760"></a><br />1760          <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_tpl_vars">_tpl_vars</a> = <a href="http://www.php.net/array_merge">array_merge</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_tpl_vars">_tpl_vars</a><strong>,</strong> <strong>$_smarty_include_vars</strong><strong>)</strong>;<a name="a1761"></a><br />1761  <a name="a1762"></a><br />1762          <font color="green">// config vars are treated as local, so push a copy of the</font><a name="a1763"></a><br />1763          <font color="green">// current ones onto the front of the stack</font><a name="a1764"></a><br />1764          <a href="http://www.php.net/array_unshift">array_unshift</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_config">_config</a><strong>,</strong> <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_config">_config</a><strong>[</strong>0<strong>]</strong><strong>)</strong>;<a name="a1765"></a><br />1765  <a name="a1766"></a><br />1766          <strong>$_smarty_compile_path</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_compile_path">_get_compile_path</a><strong>(</strong><strong>$_smarty_include_tpl_file</strong><strong>)</strong>;<a name="a1767"></a><br />1767  <a name="a1768"></a><br />1768          <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_process_template">_process_template</a><strong>(</strong><strong>$_smarty_include_tpl_file</strong><strong>,</strong> <strong>$_smarty_compile_path</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1769"></a><br />1769              <font color="blue">include</font><strong>(</strong><strong>$_smarty_compile_path</strong><strong>)</strong>;<a name="a1770"></a><br />1770          <strong>}</strong><a name="a1771"></a><br />1771  <a name="a1772"></a><br />1772          <font color="green">// pop the local vars off the front of the stack</font><a name="a1773"></a><br />1773          <a href="http://www.php.net/array_shift">array_shift</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_config">_config</a><strong>)</strong>;<a name="a1774"></a><br />1774  <a name="a1775"></a><br />1775          <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_inclusion_depth">_inclusion_depth</a>--;<a name="a1776"></a><br />1776  <a name="a1777"></a><br />1777          <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$debugging">debugging</a><strong>)</strong> <strong>{</strong><a name="a1778"></a><br />1778              <font color="green">// capture time for debugging info</font><a name="a1779"></a><br />1779              <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_smarty_debug_info">_smarty_debug_info</a><strong>[</strong><strong>$included_tpls_idx</strong><strong>]</strong><strong>[</strong><font color="#66cccc">'exec_time'</font><strong>]</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_microtime">_get_microtime</a><strong>(</strong><strong>)</strong> - <strong>$debug_start_time</strong>;<a name="a1780"></a><br />1780          <strong>}</strong><a name="a1781"></a><br />1781  <a name="a1782"></a><br />1782          <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$caching">caching</a><strong>)</strong> <strong>{</strong><a name="a1783"></a><br />1783              <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a><strong>[</strong><font color="#66cccc">'template'</font><strong>]</strong><strong>[</strong><strong>]</strong> = <strong>$_smarty_include_tpl_file</strong>;<a name="a1784"></a><br />1784          <strong>}</strong><a name="a1785"></a><br />1785      <strong>}</strong><a name="a1786"></a><br />1786  <a name="a1787"></a><br />1787      <font color="#009999">/**</font><a name="a1788"></a><br />1788  <font color="#009999">     * called for included templates</font><a name="a1789"></a><br />1789  <font color="#009999">     *</font><a name="a1790"></a><br />1790  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$_smarty_include_php_file </strong><a name="a1791"></a><br />1791  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$_smarty_assign </strong><font color="#009999">variable to assign the included template's</font><a name="a1792"></a><br />1792  <font color="#009999">     *</font><font color="#009999"> </font><font color="#009999">               output into</font><a name="a1793"></a><br />1793  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>boolean </em><font color="#009999"></font><strong>$_smarty_once </strong><font color="#009999">uses include_once if this is true</font><a name="a1794"></a><br />1794  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>array </em><font color="#009999"></font><strong>$_smarty_include_vars </strong><font color="#009999">associative array of vars from</font><a name="a1795"></a><br />1795  <font color="#009999">     *</font><font color="#009999"> </font><font color="#009999">              {include file=&quot;blah&quot; var=$var}</font><a name="a1796"></a><br />1796  <font color="#009999">     */</font>    <a name="a1797"></a><br />1797      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_smarty_include_php">_smarty_include_php</a><strong>(</strong><strong>$_smarty_include_php_file</strong><strong>,</strong> <strong>$_smarty_assign</strong><strong>,</strong> <strong>$_smarty_once</strong><strong>,</strong> <strong>$_smarty_include_vars</strong><strong>)</strong><a name="a1798"></a><br />1798      <strong>{</strong><a name="a1799"></a><br />1799          <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_php_resource">_get_php_resource</a><strong>(</strong><strong>$_smarty_include_php_file</strong><strong>,</strong> <strong>$_smarty_resource_type</strong><strong>,</strong><a name="a1800"></a><br />1800                                   <strong>$_smarty_php_resource</strong><strong>)</strong>;<a name="a1801"></a><br />1801  <a name="a1802"></a><br />1802          <a href="http://www.php.net/extract">extract</a><strong>(</strong><strong>$_smarty_include_vars</strong><strong>,</strong> EXTR_PREFIX_SAME<strong>,</strong> <font color="#66cccc">'include_php_'</font><strong>)</strong>;<a name="a1803"></a><br />1803  <a name="a1804"></a><br />1804          <font color="blue">if</font> <strong>(</strong><strong>!</strong>empty<strong>(</strong><strong>$_smarty_assign</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1805"></a><br />1805              <a href="http://www.php.net/ob_start">ob_start</a><strong>(</strong><strong>)</strong>;<a name="a1806"></a><br />1806              <font color="blue">if</font> <strong>(</strong><strong>$_smarty_resource_type</strong> == <font color="#66cccc">'file'</font><strong>)</strong> <strong>{</strong><a name="a1807"></a><br />1807                  <font color="blue">if</font><strong>(</strong><strong>$_smarty_once</strong><strong>)</strong> <strong>{</strong><a name="a1808"></a><br />1808                      <font color="blue">include_once</font><strong>(</strong><strong>$_smarty_php_resource</strong><strong>)</strong>;<a name="a1809"></a><br />1809                  <strong>}</strong> else <strong>{</strong><a name="a1810"></a><br />1810                      <font color="blue">include</font><strong>(</strong><strong>$_smarty_php_resource</strong><strong>)</strong>;                    <a name="a1811"></a><br />1811                  <strong>}</strong><a name="a1812"></a><br />1812              <strong>}</strong> else <strong>{</strong><a name="a1813"></a><br />1813                  eval<strong>(</strong><strong>$_smarty_php_resource</strong><strong>)</strong>;<a name="a1814"></a><br />1814              <strong>}</strong><a name="a1815"></a><br />1815              <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#methodassign">assign</a><strong>(</strong><strong>$_smarty_assign</strong><strong>,</strong> <a href="http://www.php.net/ob_get_contents">ob_get_contents</a><strong>(</strong><strong>)</strong><strong>)</strong>;<a name="a1816"></a><br />1816              <a href="http://www.php.net/ob_end_clean">ob_end_clean</a><strong>(</strong><strong>)</strong>;<a name="a1817"></a><br />1817          <strong>}</strong> else <strong>{</strong><a name="a1818"></a><br />1818              <font color="blue">if</font> <strong>(</strong><strong>$_smarty_resource_type</strong> == <font color="#66cccc">'file'</font><strong>)</strong> <strong>{</strong><a name="a1819"></a><br />1819                  <font color="blue">if</font><strong>(</strong><strong>$_smarty_once</strong><strong>)</strong> <strong>{</strong><a name="a1820"></a><br />1820                      <font color="blue">include_once</font><strong>(</strong><strong>$_smarty_php_resource</strong><strong>)</strong>;<a name="a1821"></a><br />1821                  <strong>}</strong> else <strong>{</strong><a name="a1822"></a><br />1822                      <font color="blue">include</font><strong>(</strong><strong>$_smarty_php_resource</strong><strong>)</strong>;                    <a name="a1823"></a><br />1823                  <strong>}</strong><a name="a1824"></a><br />1824              <strong>}</strong> else <strong>{</strong><a name="a1825"></a><br />1825                  eval<strong>(</strong><strong>$_smarty_php_resource</strong><strong>)</strong>;<a name="a1826"></a><br />1826              <strong>}</strong><a name="a1827"></a><br />1827          <strong>}</strong><a name="a1828"></a><br />1828      <strong>}</strong><a name="a1829"></a><br />1829  <a name="a1830"></a><br />1830      <a name="a1831"></a><br />1831      <font color="#009999">/**</font><a name="a1832"></a><br />1832  <font color="#009999">     * clear configuration values</font><a name="a1833"></a><br />1833  <font color="#009999">     *</font><a name="a1834"></a><br />1834  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$var </strong><a name="a1835"></a><br />1835  <font color="#009999">     */</font>    <a name="a1836"></a><br />1836      <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodclear_config">clear_config</a><strong>(</strong><strong>$var</strong> = null<strong>)</strong><a name="a1837"></a><br />1837      <strong>{</strong><a name="a1838"></a><br />1838          <font color="blue">if</font><strong>(</strong><strong>!</strong>isset<strong>(</strong><strong>$var</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1839"></a><br />1839              <font color="green">// clear all values</font><a name="a1840"></a><br />1840              <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_config">_config</a> = array<strong>(</strong>array<strong>(</strong><font color="#66cccc">'vars'</font>  =&gt; array<strong>(</strong><strong>)</strong><strong>,</strong><a name="a1841"></a><br />1841                                           <font color="#66cccc">'files'</font> =&gt; array<strong>(</strong><strong>)</strong><strong>)</strong><strong>)</strong>;<a name="a1842"></a><br />1842          <strong>}</strong> else <strong>{</strong><a name="a1843"></a><br />1843              unset<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_config">_config</a><strong>[</strong>0<strong>]</strong><strong>[</strong><font color="#66cccc">'vars'</font><strong>]</strong><strong>[</strong><strong>$var</strong><strong>]</strong><strong>)</strong>;            <a name="a1844"></a><br />1844          <strong>}</strong><a name="a1845"></a><br />1845      <strong>}</strong>    <a name="a1846"></a><br />1846      <a name="a1847"></a><br />1847      <a name="a1848"></a><br />1848      <font color="#009999">/**</font><a name="a1849"></a><br />1849  <font color="#009999">     * Replace cached inserts with the actual results</font><a name="a1850"></a><br />1850  <font color="#009999">     *</font><a name="a1851"></a><br />1851  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$results </strong><a name="a1852"></a><br />1852  <font color="#009999">     */</font>    <a name="a1853"></a><br />1853      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_process_cached_inserts">_process_cached_inserts</a><strong>(</strong><strong>$results</strong><strong>)</strong><a name="a1854"></a><br />1854      <strong>{</strong><a name="a1855"></a><br />1855          <a href="http://www.php.net/preg_match_all">preg_match_all</a><strong>(</strong><font color="#66cccc">'!'</font>.<strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_smarty_md5">_smarty_md5</a>.<font color="#66cccc">'{insert_cache (.*)}'</font>.<strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_smarty_md5">_smarty_md5</a>.<font color="#66cccc">'!Uis'</font><strong>,</strong><a name="a1856"></a><br />1856                         <strong>$results</strong><strong>,</strong> <strong>$match</strong><strong>)</strong>;<a name="a1857"></a><br />1857          list<strong>(</strong><strong>$cached_inserts</strong><strong>,</strong> <strong>$insert_args</strong><strong>)</strong> = <strong>$match</strong>;<a name="a1858"></a><br />1858  <a name="a1859"></a><br />1859          <font color="blue">for</font> <strong>(</strong><strong>$i</strong> = 0<strong>,</strong> <strong>$for_max</strong> = <a href="http://www.php.net/count">count</a><strong>(</strong><strong>$cached_inserts</strong><strong>)</strong>; <strong>$i</strong> &lt; <strong>$for_max</strong>; <strong>$i</strong>++<strong>)</strong> <strong>{</strong><a name="a1860"></a><br />1860              <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$debugging">debugging</a><strong>)</strong> <strong>{</strong><a name="a1861"></a><br />1861                  <strong>$debug_start_time</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_microtime">_get_microtime</a><strong>(</strong><strong>)</strong>;<a name="a1862"></a><br />1862              <strong>}</strong><a name="a1863"></a><br />1863  <a name="a1864"></a><br />1864              <strong>$args</strong> = <a href="http://www.php.net/unserialize">unserialize</a><strong>(</strong><strong>$insert_args</strong><strong>[</strong><strong>$i</strong><strong>]</strong><strong>)</strong>;<a name="a1865"></a><br />1865              <strong>$name</strong> = <strong>$args</strong><strong>[</strong><font color="#66cccc">'name'</font><strong>]</strong>;<a name="a1866"></a><br />1866  <a name="a1867"></a><br />1867              <font color="blue">if</font> <strong>(</strong>isset<strong>(</strong><strong>$args</strong><strong>[</strong><font color="#66cccc">'script'</font><strong>]</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1868"></a><br />1868                  <font color="blue">if</font> <strong>(</strong><strong>!</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_php_resource">_get_php_resource</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_dequote">_dequote</a><strong>(</strong><strong>$args</strong><strong>[</strong><font color="#66cccc">'script'</font><strong>]</strong><strong>)</strong><strong>,</strong> <strong>$resource_type</strong><strong>,</strong> <strong>$php_resource</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1869"></a><br />1869                      <font color="blue">return</font> false;<a name="a1870"></a><br />1870                  <strong>}</strong><a name="a1871"></a><br />1871  <a name="a1872"></a><br />1872                  <font color="blue">if</font> <strong>(</strong><strong>$resource_type</strong> == <font color="#66cccc">'file'</font><strong>)</strong> <strong>{</strong><a name="a1873"></a><br />1873                      <font color="blue">include_once</font><strong>(</strong><strong>$php_resource</strong><strong>)</strong>;<a name="a1874"></a><br />1874                  <strong>}</strong> else <strong>{</strong><a name="a1875"></a><br />1875                      eval<strong>(</strong><strong>$php_resource</strong><strong>)</strong>;<a name="a1876"></a><br />1876                  <strong>}</strong><a name="a1877"></a><br />1877              <strong>}</strong><a name="a1878"></a><br />1878  <a name="a1879"></a><br />1879              <strong>$function_name</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'insert'</font><strong>]</strong><strong>[</strong><strong>$name</strong><strong>]</strong><strong>[</strong>0<strong>]</strong>;<a name="a1880"></a><br />1880              <strong>$replace</strong> = <strong>$function_name</strong><strong>(</strong><strong>$args</strong><strong>,</strong> <strong>$this</strong><strong>)</strong>;<a name="a1881"></a><br />1881  <a name="a1882"></a><br />1882              <strong>$results</strong> = <a href="http://www.php.net/str_replace">str_replace</a><strong>(</strong><strong>$cached_inserts</strong><strong>[</strong><strong>$i</strong><strong>]</strong><strong>,</strong> <strong>$replace</strong><strong>,</strong> <strong>$results</strong><strong>)</strong>;<a name="a1883"></a><br />1883              <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$debugging">debugging</a><strong>)</strong> <strong>{</strong><a name="a1884"></a><br />1884                  <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_smarty_debug_info">_smarty_debug_info</a><strong>[</strong><strong>]</strong> = array<strong>(</strong><font color="#66cccc">'type'</font>      =&gt; <font color="#66cccc">'insert'</font><strong>,</strong><a name="a1885"></a><br />1885                                                      <font color="#66cccc">'filename'</font>  =&gt; <font color="#66cccc">'insert_'</font>.<strong>$name</strong><strong>,</strong><a name="a1886"></a><br />1886                                                      <font color="#66cccc">'depth'</font>     =&gt; <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_inclusion_depth">_inclusion_depth</a><strong>,</strong><a name="a1887"></a><br />1887                                                      <font color="#66cccc">'exec_time'</font> =&gt; <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_microtime">_get_microtime</a><strong>(</strong><strong>)</strong> - <strong>$debug_start_time</strong><strong>)</strong>;<a name="a1888"></a><br />1888              <strong>}</strong><a name="a1889"></a><br />1889          <strong>}</strong><a name="a1890"></a><br />1890  <a name="a1891"></a><br />1891          <font color="blue">return</font> <strong>$results</strong>;<a name="a1892"></a><br />1892      <strong>}</strong><a name="a1893"></a><br />1893  <a name="a1894"></a><br />1894  <a name="a1895"></a><br />1895      <font color="#009999">/**</font><a name="a1896"></a><br />1896  <font color="#009999">     * Handle insert tags</font><a name="a1897"></a><br />1897  <font color="#009999">     *</font><a name="a1898"></a><br />1898  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>array </em><font color="#009999"></font><strong>$args </strong><a name="a1899"></a><br />1899  <font color="#009999">     */</font>    <a name="a1900"></a><br />1900      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_run_insert_handler">_run_insert_handler</a><strong>(</strong><strong>$args</strong><strong>)</strong><a name="a1901"></a><br />1901      <strong>{</strong><a name="a1902"></a><br />1902          <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$debugging">debugging</a><strong>)</strong> <strong>{</strong><a name="a1903"></a><br />1903              <strong>$debug_start_time</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_microtime">_get_microtime</a><strong>(</strong><strong>)</strong>;<a name="a1904"></a><br />1904          <strong>}</strong><a name="a1905"></a><br />1905      <a name="a1906"></a><br />1906          <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$caching">caching</a><strong>)</strong> <strong>{</strong><a name="a1907"></a><br />1907              <strong>$arg_string</strong> = <a href="http://www.php.net/serialize">serialize</a><strong>(</strong><strong>$args</strong><strong>)</strong>;<a name="a1908"></a><br />1908              <strong>$name</strong> = <strong>$args</strong><strong>[</strong><font color="#66cccc">'name'</font><strong>]</strong>;<a name="a1909"></a><br />1909              <font color="blue">if</font> <strong>(</strong><strong>!</strong>isset<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a><strong>[</strong><font color="#66cccc">'insert_tags'</font><strong>]</strong><strong>[</strong><strong>$name</strong><strong>]</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1910"></a><br />1910                  <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a><strong>[</strong><font color="#66cccc">'insert_tags'</font><strong>]</strong><strong>[</strong><strong>$name</strong><strong>]</strong> = array<strong>(</strong><font color="#66cccc">'insert'</font><strong>,</strong><a name="a1911"></a><br />1911                                                                   <strong>$name</strong><strong>,</strong><a name="a1912"></a><br />1912                                                                   <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'insert'</font><strong>]</strong><strong>[</strong><strong>$name</strong><strong>]</strong><strong>[</strong>1<strong>]</strong><strong>,</strong><a name="a1913"></a><br />1913                                                                   <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'insert'</font><strong>]</strong><strong>[</strong><strong>$name</strong><strong>]</strong><strong>[</strong>2<strong>]</strong><strong>,</strong><a name="a1914"></a><br />1914                                                                   <strong>!</strong>empty<strong>(</strong><strong>$args</strong><strong>[</strong><font color="#66cccc">'script'</font><strong>]</strong><strong>)</strong> ? true : false<strong>)</strong>;<a name="a1915"></a><br />1915              <strong>}</strong><a name="a1916"></a><br />1916              <font color="blue">return</font> <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_smarty_md5">_smarty_md5</a>.&quot;<font color="#66cccc"><strong>{</strong>insert_cache <strong>$arg_string</strong><strong>}</strong></font>&quot;.<strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_smarty_md5">_smarty_md5</a>;<a name="a1917"></a><br />1917          <strong>}</strong> else <strong>{</strong><a name="a1918"></a><br />1918              <font color="blue">if</font> <strong>(</strong>isset<strong>(</strong><strong>$args</strong><strong>[</strong><font color="#66cccc">'script'</font><strong>]</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1919"></a><br />1919                  <font color="blue">if</font> <strong>(</strong><strong>!</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_php_resource">_get_php_resource</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_dequote">_dequote</a><strong>(</strong><strong>$args</strong><strong>[</strong><font color="#66cccc">'script'</font><strong>]</strong><strong>)</strong><strong>,</strong> <strong>$resource_type</strong><strong>,</strong> <strong>$php_resource</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1920"></a><br />1920                      <font color="blue">return</font> false;<a name="a1921"></a><br />1921                  <strong>}</strong><a name="a1922"></a><br />1922      <a name="a1923"></a><br />1923                  <font color="blue">if</font> <strong>(</strong><strong>$resource_type</strong> == <font color="#66cccc">'file'</font><strong>)</strong> <strong>{</strong><a name="a1924"></a><br />1924                      <font color="blue">include_once</font><strong>(</strong><strong>$php_resource</strong><strong>)</strong>;<a name="a1925"></a><br />1925                  <strong>}</strong> else <strong>{</strong><a name="a1926"></a><br />1926                      eval<strong>(</strong><strong>$php_resource</strong><strong>)</strong>;<a name="a1927"></a><br />1927                  <strong>}</strong><a name="a1928"></a><br />1928                  unset<strong>(</strong><strong>$args</strong><strong>[</strong><font color="#66cccc">'script'</font><strong>]</strong><strong>)</strong>;<a name="a1929"></a><br />1929              <strong>}</strong><a name="a1930"></a><br />1930      <a name="a1931"></a><br />1931              <strong>$function_name</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'insert'</font><strong>]</strong><strong>[</strong><strong>$args</strong><strong>[</strong><font color="#66cccc">'name'</font><strong>]</strong><strong>]</strong><strong>[</strong>0<strong>]</strong>;<a name="a1932"></a><br />1932              <strong>$content</strong> = <strong>$function_name</strong><strong>(</strong><strong>$args</strong><strong>,</strong> <strong>$this</strong><strong>)</strong>;<a name="a1933"></a><br />1933              <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$debugging">debugging</a><strong>)</strong> <strong>{</strong><a name="a1934"></a><br />1934                  <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_smarty_debug_info">_smarty_debug_info</a><strong>[</strong><strong>]</strong> = array<strong>(</strong><font color="#66cccc">'type'</font>      =&gt; <font color="#66cccc">'insert'</font><strong>,</strong><a name="a1935"></a><br />1935                                                      <font color="#66cccc">'filename'</font>  =&gt; <font color="#66cccc">'insert_'</font>.<strong>$args</strong><strong>[</strong><font color="#66cccc">'name'</font><strong>]</strong><strong>,</strong><a name="a1936"></a><br />1936                                                      <font color="#66cccc">'depth'</font>     =&gt; <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_inclusion_depth">_inclusion_depth</a><strong>,</strong><a name="a1937"></a><br />1937                                                      <font color="#66cccc">'exec_time'</font> =&gt; <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_microtime">_get_microtime</a><strong>(</strong><strong>)</strong> - <strong>$debug_start_time</strong><strong>)</strong>;<a name="a1938"></a><br />1938              <strong>}</strong><a name="a1939"></a><br />1939      <a name="a1940"></a><br />1940              <font color="blue">if</font> <strong>(</strong><strong>!</strong>empty<strong>(</strong><strong>$args</strong><strong>[</strong><font color="#66cccc">&quot;assign&quot;</font><strong>]</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1941"></a><br />1941                  <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#methodassign">assign</a><strong>(</strong><strong>$args</strong><strong>[</strong><font color="#66cccc">&quot;assign&quot;</font><strong>]</strong><strong>,</strong> <strong>$content</strong><strong>)</strong>;<a name="a1942"></a><br />1942              <strong>}</strong> else <strong>{</strong><a name="a1943"></a><br />1943                  <font color="blue">return</font> <strong>$content</strong>;<a name="a1944"></a><br />1944              <strong>}</strong><a name="a1945"></a><br />1945          <strong>}</strong><a name="a1946"></a><br />1946      <strong>}</strong><a name="a1947"></a><br />1947  <a name="a1948"></a><br />1948  <a name="a1949"></a><br />1949      <font color="#009999">/**</font><a name="a1950"></a><br />1950  <font color="#009999">     * Handle modifiers</font><a name="a1951"></a><br />1951  <font color="#009999">     *</font><a name="a1952"></a><br />1952  <font color="#009999">     */</font><a name="a1953"></a><br />1953      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_run_mod_handler">_run_mod_handler</a><strong>(</strong><strong>)</strong><a name="a1954"></a><br />1954      <strong>{</strong><a name="a1955"></a><br />1955          <strong>$args</strong> = <a href="http://www.php.net/func_get_args">func_get_args</a><strong>(</strong><strong>)</strong>;<a name="a1956"></a><br />1956          list<strong>(</strong><strong>$modifier_name</strong><strong>,</strong> <strong>$map_array</strong><strong>)</strong> = <a href="http://www.php.net/array_splice">array_splice</a><strong>(</strong><strong>$args</strong><strong>,</strong> 0<strong>,</strong> 2<strong>)</strong>;<a name="a1957"></a><br />1957          list<strong>(</strong><strong>$func_name</strong><strong>,</strong> <strong>$tpl_file</strong><strong>,</strong> <strong>$tpl_line</strong><strong>)</strong> =<a name="a1958"></a><br />1958              <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'modifier'</font><strong>]</strong><strong>[</strong><strong>$modifier_name</strong><strong>]</strong>;<a name="a1959"></a><br />1959          <strong>$var</strong> = <strong>$args</strong><strong>[</strong>0<strong>]</strong>;<a name="a1960"></a><br />1960  <a name="a1961"></a><br />1961          <font color="blue">if</font> <strong>(</strong><strong>$map_array</strong> &amp;&amp; <a href="http://www.php.net/is_array">is_array</a><strong>(</strong><strong>$var</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1962"></a><br />1962              <font color="blue">foreach</font> <strong>(</strong><strong>$var</strong> as <strong>$key</strong> =&gt; <strong>$val</strong><strong>)</strong> <strong>{</strong><a name="a1963"></a><br />1963                  <strong>$args</strong><strong>[</strong>0<strong>]</strong> = <strong>$val</strong>;<a name="a1964"></a><br />1964                  <strong>$var</strong><strong>[</strong><strong>$key</strong><strong>]</strong> = <a href="http://www.php.net/call_user_func_array">call_user_func_array</a><strong>(</strong><strong>$func_name</strong><strong>,</strong> <strong>$args</strong><strong>)</strong>;<a name="a1965"></a><br />1965              <strong>}</strong><a name="a1966"></a><br />1966              <font color="blue">return</font> <strong>$var</strong>;<a name="a1967"></a><br />1967          <strong>}</strong> else <strong>{</strong><a name="a1968"></a><br />1968              <font color="blue">return</font> <a href="http://www.php.net/call_user_func_array">call_user_func_array</a><strong>(</strong><strong>$func_name</strong><strong>,</strong> <strong>$args</strong><strong>)</strong>;<a name="a1969"></a><br />1969          <strong>}</strong><a name="a1970"></a><br />1970      <strong>}</strong><a name="a1971"></a><br />1971  <a name="a1972"></a><br />1972  <a name="a1973"></a><br />1973      <font color="#009999">/**</font><a name="a1974"></a><br />1974  <font color="#009999">     * Remove starting and ending quotes from the string</font><a name="a1975"></a><br />1975  <font color="#009999">     *</font><a name="a1976"></a><br />1976  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$string </strong><a name="a1977"></a><br />1977  <font color="#009999">     */</font>    <a name="a1978"></a><br />1978      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_dequote">_dequote</a><strong>(</strong><strong>$string</strong><strong>)</strong><a name="a1979"></a><br />1979      <strong>{</strong><a name="a1980"></a><br />1980          <font color="blue">if</font> <strong>(</strong><strong>(</strong><strong>$string</strong><strong>{</strong>0<strong>}</strong> == <font color="#66cccc">&quot;'&quot;</font> || <strong>$string</strong><strong>{</strong>0<strong>}</strong> == <font color="#66cccc">'&quot;'</font><strong>)</strong> &amp;&amp;<a name="a1981"></a><br />1981              <strong>$string</strong><strong>{</strong><a href="http://www.php.net/strlen">strlen</a><strong>(</strong><strong>$string</strong><strong>)</strong>-1<strong>}</strong> == <strong>$string</strong><strong>{</strong>0<strong>}</strong><strong>)</strong><a name="a1982"></a><br />1982              <font color="blue">return</font> <a href="http://www.php.net/substr">substr</a><strong>(</strong><strong>$string</strong><strong>,</strong> 1<strong>,</strong> -1<strong>)</strong>;<a name="a1983"></a><br />1983          else<a name="a1984"></a><br />1984              <font color="blue">return</font> <strong>$string</strong>;<a name="a1985"></a><br />1985      <strong>}</strong><a name="a1986"></a><br />1986  <a name="a1987"></a><br />1987  <a name="a1988"></a><br />1988      <font color="#009999">/**</font><a name="a1989"></a><br />1989  <font color="#009999">     * read in a file from line $start for $lines.</font><a name="a1990"></a><br />1990  <font color="#009999">     * read the entire file if $start and $lines are null.</font><a name="a1991"></a><br />1991  <font color="#009999">     *</font><a name="a1992"></a><br />1992  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$filename </strong><a name="a1993"></a><br />1993  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>integer </em><font color="#009999"></font><strong>$start </strong><a name="a1994"></a><br />1994  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>integer </em><font color="#009999"></font><strong>$lines </strong><a name="a1995"></a><br />1995  <font color="#009999">     */</font>    <a name="a1996"></a><br />1996      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_read_file">_read_file</a><strong>(</strong><strong>$filename</strong><strong>,</strong> <strong>$start</strong>=null<strong>,</strong> <strong>$lines</strong>=null<strong>)</strong><a name="a1997"></a><br />1997      <strong>{</strong><a name="a1998"></a><br />1998          <font color="blue">if</font> <strong>(</strong><strong>!</strong><strong>(</strong><strong>$fd</strong> = <strong>@</strong><a href="http://www.php.net/fopen">fopen</a><strong>(</strong><strong>$filename</strong><strong>,</strong> <font color="#66cccc">'r'</font><strong>)</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a1999"></a><br />1999              <font color="blue">return</font> false;<a name="a2000"></a><br />2000          <strong>}</strong><a name="a2001"></a><br />2001          <a href="http://www.php.net/flock">flock</a><strong>(</strong><strong>$fd</strong><strong>,</strong> LOCK_SH<strong>)</strong>;<a name="a2002"></a><br />2002          <font color="blue">if</font> <strong>(</strong><strong>$start</strong> == null &amp;&amp; <strong>$lines</strong> == null<strong>)</strong> <strong>{</strong><a name="a2003"></a><br />2003              <font color="green">// read the entire file</font><a name="a2004"></a><br />2004              <strong>$contents</strong> = <a href="http://www.php.net/fread">fread</a><strong>(</strong><strong>$fd</strong><strong>,</strong> <a href="http://www.php.net/filesize">filesize</a><strong>(</strong><strong>$filename</strong><strong>)</strong><strong>)</strong>;<a name="a2005"></a><br />2005          <strong>}</strong> else <strong>{</strong><a name="a2006"></a><br />2006              <font color="blue">if</font> <strong>(</strong> <strong>$start</strong> &gt; 1 <strong>)</strong> <strong>{</strong><a name="a2007"></a><br />2007                  <font color="green">// skip the first lines before $start</font><a name="a2008"></a><br />2008                  <font color="blue">for</font> <strong>(</strong><strong>$loop</strong>=1; <strong>$loop</strong> &lt; <strong>$start</strong>; <strong>$loop</strong>++<strong>)</strong> <strong>{</strong><a name="a2009"></a><br />2009                      <a href="http://www.php.net/fgets">fgets</a><strong>(</strong><strong>$fd</strong><strong>,</strong> 65536<strong>)</strong>;<a name="a2010"></a><br />2010                  <strong>}</strong><a name="a2011"></a><br />2011              <strong>}</strong><a name="a2012"></a><br />2012              <font color="blue">if</font> <strong>(</strong> <strong>$lines</strong> == null <strong>)</strong> <strong>{</strong><a name="a2013"></a><br />2013                  <font color="green">// read the rest of the file</font><a name="a2014"></a><br />2014                  while <strong>(</strong><strong>!</strong><a href="http://www.php.net/feof">feof</a><strong>(</strong><strong>$fd</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2015"></a><br />2015                      <strong>$contents</strong> .= <a href="http://www.php.net/fgets">fgets</a><strong>(</strong><strong>$fd</strong><strong>,</strong> 65536<strong>)</strong>;<a name="a2016"></a><br />2016                  <strong>}</strong><a name="a2017"></a><br />2017              <strong>}</strong> else <strong>{</strong><a name="a2018"></a><br />2018                  <font color="green">// read up to $lines lines</font><a name="a2019"></a><br />2019                  <font color="blue">for</font> <strong>(</strong><strong>$loop</strong>=0; <strong>$loop</strong> &lt; <strong>$lines</strong>; <strong>$loop</strong>++<strong>)</strong> <strong>{</strong><a name="a2020"></a><br />2020                      <strong>$contents</strong> .= <a href="http://www.php.net/fgets">fgets</a><strong>(</strong><strong>$fd</strong><strong>,</strong> 65536<strong>)</strong>;<a name="a2021"></a><br />2021                      <font color="blue">if</font> <strong>(</strong><a href="http://www.php.net/feof">feof</a><strong>(</strong><strong>$fd</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2022"></a><br />2022                          break;<a name="a2023"></a><br />2023                      <strong>}</strong><a name="a2024"></a><br />2024                  <strong>}</strong><a name="a2025"></a><br />2025              <strong>}</strong><a name="a2026"></a><br />2026          <strong>}</strong><a name="a2027"></a><br />2027          <a href="http://www.php.net/fclose">fclose</a><strong>(</strong><strong>$fd</strong><strong>)</strong>;<a name="a2028"></a><br />2028          <font color="blue">return</font> <strong>$contents</strong>;<a name="a2029"></a><br />2029      <strong>}</strong><a name="a2030"></a><br />2030  <a name="a2031"></a><br />2031      <font color="#009999">/**</font><a name="a2032"></a><br />2032  <font color="#009999">     * write out a file to disk</font><a name="a2033"></a><br />2033  <font color="#009999">     *</font><a name="a2034"></a><br />2034  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$filename </strong><a name="a2035"></a><br />2035  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$contents </strong><a name="a2036"></a><br />2036  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>boolean </em><font color="#009999"></font><strong>$create_dirs </strong><a name="a2037"></a><br />2037  <font color="#009999">     */</font>    <a name="a2038"></a><br />2038      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_write_file">_write_file</a><strong>(</strong><strong>$filename</strong><strong>,</strong> <strong>$contents</strong><strong>,</strong> <strong>$create_dirs</strong> = false<strong>)</strong><a name="a2039"></a><br />2039      <strong>{</strong><a name="a2040"></a><br />2040          <strong>$_dirname</strong> = <a href="http://www.php.net/dirname">dirname</a><strong>(</strong><strong>$filename</strong><strong>)</strong>;<a name="a2041"></a><br />2041          <a name="a2042"></a><br />2042          <font color="blue">if</font> <strong>(</strong><strong>$create_dirs</strong><strong>)</strong> <strong>{</strong><a name="a2043"></a><br />2043              <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_create_dir_structure">_create_dir_structure</a><strong>(</strong><strong>$_dirname</strong><strong>)</strong>;<a name="a2044"></a><br />2044          <strong>}</strong><a name="a2045"></a><br />2045  <a name="a2046"></a><br />2046          <font color="green">// write to tmp file, then rename it to avoid</font><a name="a2047"></a><br />2047          <font color="green">// file locking race condition</font><a name="a2048"></a><br />2048          <strong>$_tmp_file</strong> = <strong>$_dirname</strong> . <font color="#66cccc">'/'</font> . <a href="http://www.php.net/uniqid">uniqid</a><strong>(</strong><font color="#66cccc">''</font><strong>)</strong>;<a name="a2049"></a><br />2049          <a name="a2050"></a><br />2050          <font color="blue">if</font> <strong>(</strong><strong>!</strong><strong>(</strong><strong>$fd</strong> = <strong>@</strong><a href="http://www.php.net/fopen">fopen</a><strong>(</strong><strong>$_tmp_file</strong><strong>,</strong> <font color="#66cccc">'w'</font><strong>)</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2051"></a><br />2051              <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#methodtrigger_error">trigger_error</a><strong>(</strong>&quot;<font color="#66cccc">problem writing temporary file '<strong>$_tmp_file</strong>'</font>&quot;<strong>)</strong>;<a name="a2052"></a><br />2052              <font color="blue">return</font> false;<a name="a2053"></a><br />2053          <strong>}</strong><a name="a2054"></a><br />2054  <a name="a2055"></a><br />2055          <a href="http://www.php.net/fwrite">fwrite</a><strong>(</strong><strong>$fd</strong><strong>,</strong> <strong>$contents</strong><strong>)</strong>;<a name="a2056"></a><br />2056          <a href="http://www.php.net/fclose">fclose</a><strong>(</strong><strong>$fd</strong><strong>)</strong>;<a name="a2057"></a><br />2057          <font color="green">// Win32 can't rename over top another file</font><a name="a2058"></a><br />2058          <font color="blue">if</font><strong>(</strong><a href="http://www.php.net/strtoupper">strtoupper</a><strong>(</strong><a href="http://www.php.net/substr">substr</a><strong>(</strong>PHP_OS<strong>,</strong> 0<strong>,</strong> 3<strong>)</strong><strong>)</strong> == <font color="#66cccc">'WIN'</font> &amp;&amp; <a href="http://www.php.net/file_exists">file_exists</a><strong>(</strong><strong>$filename</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2059"></a><br />2059              <strong>@</strong><a href="http://www.php.net/unlink">unlink</a><strong>(</strong><strong>$filename</strong><strong>)</strong>;<a name="a2060"></a><br />2060          <strong>}</strong> <a name="a2061"></a><br />2061          <strong>@</strong><a href="http://www.php.net/rename">rename</a><strong>(</strong><strong>$_tmp_file</strong><strong>,</strong> <strong>$filename</strong><strong>)</strong>;<a name="a2062"></a><br />2062          <a href="http://www.php.net/chmod">chmod</a><strong>(</strong><strong>$filename</strong><strong>,</strong> <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_file_perms">_file_perms</a><strong>)</strong>;<a name="a2063"></a><br />2063  <a name="a2064"></a><br />2064          <font color="blue">return</font> true;<a name="a2065"></a><br />2065      <strong>}</strong><a name="a2066"></a><br />2066  <a name="a2067"></a><br />2067      <font color="#009999">/**</font><a name="a2068"></a><br />2068  <font color="#009999">     * get a concrete filename for automagically created content</font><a name="a2069"></a><br />2069  <font color="#009999">     *</font><a name="a2070"></a><br />2070  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$auto_base </strong><a name="a2071"></a><br />2071  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$auto_source </strong><a name="a2072"></a><br />2072  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$auto_id </strong><a name="a2073"></a><br />2073  <font color="#009999">     */</font>    <a name="a2074"></a><br />2074      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_get_auto_filename">_get_auto_filename</a><strong>(</strong><strong>$auto_base</strong><strong>,</strong> <strong>$auto_source</strong> = null<strong>,</strong> <strong>$auto_id</strong> = null<strong>)</strong><a name="a2075"></a><br />2075      <strong>{</strong><a name="a2076"></a><br />2076          <font color="blue">static</font> <strong>$_dir_sep</strong> = null;<a name="a2077"></a><br />2077          <font color="blue">static</font> <strong>$_dir_sep_enc</strong> = null;<a name="a2078"></a><br />2078          <a name="a2079"></a><br />2079          <font color="blue">if</font><strong>(</strong><strong>!</strong>isset<strong>(</strong><strong>$_dir_sep</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2080"></a><br />2080              <strong>$_dir_sep_enc</strong> = urlencode<strong>(</strong>DIR_SEP<strong>)</strong>;<a name="a2081"></a><br />2081              <font color="blue">if</font><strong>(</strong><strong>$this</strong><strong>-&gt;</strong>use_sub_dirs<strong>)</strong> <strong>{</strong><a name="a2082"></a><br />2082                  <strong>$_dir_sep</strong> = DIR_SEP;<a name="a2083"></a><br />2083              <strong>}</strong> else <strong>{</strong><a name="a2084"></a><br />2084                  <strong>$_dir_sep</strong> = <font color="#66cccc">'^'</font>;        <a name="a2085"></a><br />2085              <strong>}</strong><a name="a2086"></a><br />2086          <strong>}</strong><a name="a2087"></a><br />2087          <a name="a2088"></a><br />2088          <font color="blue">if</font><strong>(</strong><strong>@</strong>is_dir<strong>(</strong><strong>$auto_base</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2089"></a><br />2089              <strong>$res</strong> = <strong>$auto_base</strong> . DIR_SEP;<a name="a2090"></a><br />2090          <strong>}</strong> else <strong>{</strong><a name="a2091"></a><br />2091              <font color="green">// auto_base not found, try include_path</font><a name="a2092"></a><br />2092              <strong>$this</strong><strong>-&gt;</strong>_get_include_path<strong>(</strong><strong>$auto_base</strong><strong>,</strong><strong>$_include_path</strong><strong>)</strong>;<a name="a2093"></a><br />2093              <strong>$res</strong> = <strong>$_include_path</strong> . <a href="../Smarty/_universibo2_framework_smarty_Smarty_class_php.html#defineDIR_SEP">DIR_SEP</a>;<a name="a2094"></a><br />2094          <strong>}</strong><a name="a2095"></a><br />2095          <a name="a2096"></a><br />2096          <font color="blue">if</font><strong>(</strong>isset<strong>(</strong><strong>$auto_id</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2097"></a><br />2097              <font color="green">// make auto_id safe for directory names</font><a name="a2098"></a><br />2098              <strong>$auto_id</strong> = str_replace<strong>(</strong><font color="#66cccc">'%7C'</font><strong>,</strong><font color="#66cccc">'|'</font><strong>,</strong><strong>(</strong>urlencode<strong>(</strong><strong>$auto_id</strong><strong>)</strong><strong>)</strong><strong>)</strong>;<a name="a2099"></a><br />2099              <font color="green">// split into separate directories</font><a name="a2100"></a><br />2100              <strong>$auto_id</strong> = str_replace<strong>(</strong><font color="#66cccc">'|'</font><strong>,</strong> <strong>$_dir_sep</strong><strong>,</strong> <strong>$auto_id</strong><strong>)</strong>;<a name="a2101"></a><br />2101              <strong>$res</strong> .= <strong>$auto_id</strong> . <strong>$_dir_sep</strong>;<a name="a2102"></a><br />2102          <strong>}</strong><a name="a2103"></a><br />2103          <a name="a2104"></a><br />2104          <font color="blue">if</font><strong>(</strong>isset<strong>(</strong><strong>$auto_source</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2105"></a><br />2105              <font color="green">// make source name safe for filename</font><a name="a2106"></a><br />2106              <font color="blue">if</font><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$use_sub_dirs">use_sub_dirs</a><strong>)</strong> <strong>{</strong><a name="a2107"></a><br />2107                  <strong>$_filename</strong> = <a href="http://www.php.net/urlencode">urlencode</a><strong>(</strong><a href="http://www.php.net/basename">basename</a><strong>(</strong><strong>$auto_source</strong><strong>)</strong><strong>)</strong>;<a name="a2108"></a><br />2108                  <strong>$_crc32</strong> = <a href="http://www.php.net/crc32">crc32</a><strong>(</strong><strong>$auto_source</strong><strong>)</strong> . <strong>$_dir_sep</strong>;<a name="a2109"></a><br />2109                  <font color="green">// prepend %% to avoid name conflicts with</font><a name="a2110"></a><br />2110                  <font color="green">// with $auto_id names</font><a name="a2111"></a><br />2111                  <strong>$_crc32</strong> = <font color="#66cccc">'%%'</font> . <a href="http://www.php.net/substr">substr</a><strong>(</strong><strong>$_crc32</strong><strong>,</strong>0<strong>,</strong>3<strong>)</strong> . <strong>$_dir_sep</strong> . <font color="#66cccc">'%%'</font> . <strong>$_crc32</strong>;<a name="a2112"></a><br />2112                  <strong>$res</strong> .= <strong>$_crc32</strong> . <strong>$_filename</strong> . <font color="#66cccc">'.php'</font>;<a name="a2113"></a><br />2113              <strong>}</strong> else <strong>{</strong><a name="a2114"></a><br />2114                  <strong>$res</strong> .= <a href="http://www.php.net/str_replace">str_replace</a><strong>(</strong><strong>$_dir_sep_enc</strong><strong>,</strong><font color="#66cccc">'^'</font><strong>,</strong><a href="http://www.php.net/urlencode">urlencode</a><strong>(</strong><strong>$auto_source</strong><strong>)</strong><strong>)</strong>;<a name="a2115"></a><br />2115              <strong>}</strong><a name="a2116"></a><br />2116          <strong>}</strong><a name="a2117"></a><br />2117          <a name="a2118"></a><br />2118          <font color="blue">return</font> <strong>$res</strong>;<a name="a2119"></a><br />2119      <strong>}</strong><a name="a2120"></a><br />2120  <a name="a2121"></a><br />2121      <font color="#009999">/**</font><a name="a2122"></a><br />2122  <font color="#009999">     * delete an automagically created file by name and id</font><a name="a2123"></a><br />2123  <font color="#009999">     *</font><a name="a2124"></a><br />2124  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$auto_base </strong><a name="a2125"></a><br />2125  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$auto_source </strong><a name="a2126"></a><br />2126  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$auto_id </strong><a name="a2127"></a><br />2127  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>integer </em><font color="#009999"></font><strong>$exp_time </strong><a name="a2128"></a><br />2128  <font color="#009999">     */</font>    <a name="a2129"></a><br />2129      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_rm_auto">_rm_auto</a><strong>(</strong><strong>$auto_base</strong><strong>,</strong> <strong>$auto_source</strong> = null<strong>,</strong> <strong>$auto_id</strong> = null<strong>,</strong> <strong>$exp_time</strong> = null<strong>)</strong><a name="a2130"></a><br />2130      <strong>{</strong><a name="a2131"></a><br />2131          <font color="blue">if</font> <strong>(</strong><strong>!</strong><strong>@</strong><a href="http://www.php.net/is_dir">is_dir</a><strong>(</strong><strong>$auto_base</strong><strong>)</strong><strong>)</strong><a name="a2132"></a><br />2132            <font color="blue">return</font> false;<a name="a2133"></a><br />2133  <a name="a2134"></a><br />2134          <font color="blue">if</font><strong>(</strong><strong>!</strong>isset<strong>(</strong><strong>$auto_id</strong><strong>)</strong> &amp;&amp; <strong>!</strong>isset<strong>(</strong><strong>$auto_source</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2135"></a><br />2135              <strong>$res</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_rmdir">_rmdir</a><strong>(</strong><strong>$auto_base</strong><strong>,</strong> 0<strong>,</strong> <strong>$exp_time</strong><strong>)</strong>;            <a name="a2136"></a><br />2136          <strong>}</strong> else <strong>{</strong>        <a name="a2137"></a><br />2137              <strong>$tname</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_auto_filename">_get_auto_filename</a><strong>(</strong><strong>$auto_base</strong><strong>,</strong> <strong>$auto_source</strong><strong>,</strong> <strong>$auto_id</strong><strong>)</strong>;<a name="a2138"></a><br />2138              <a name="a2139"></a><br />2139              <font color="blue">if</font><strong>(</strong>isset<strong>(</strong><strong>$auto_source</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2140"></a><br />2140                  <strong>$res</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_unlink">_unlink</a><strong>(</strong><strong>$tname</strong><strong>)</strong>;<a name="a2141"></a><br />2141              <strong>}</strong> elseif <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$use_sub_dirs">use_sub_dirs</a><strong>)</strong> <strong>{</strong><a name="a2142"></a><br />2142                  <strong>$res</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_rmdir">_rmdir</a><strong>(</strong><strong>$tname</strong><strong>,</strong> 1<strong>,</strong> <strong>$exp_time</strong><strong>)</strong>;<a name="a2143"></a><br />2143              <strong>}</strong> else <strong>{</strong><a name="a2144"></a><br />2144                  <font color="green">// remove matching file names</font><a name="a2145"></a><br />2145                  <strong>$handle</strong> = <a href="http://www.php.net/opendir">opendir</a><strong>(</strong><strong>$auto_base</strong><strong>)</strong>;<a name="a2146"></a><br />2146          <strong>$res</strong> = true;<a name="a2147"></a><br />2147                  while <strong>(</strong>false !== <strong>(</strong><strong>$filename</strong> = <a href="http://www.php.net/readdir">readdir</a><strong>(</strong><strong>$handle</strong><strong>)</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2148"></a><br />2148                      <font color="blue">if</font><strong>(</strong><strong>$filename</strong> == <font color="#66cccc">'.'</font> || <strong>$filename</strong> == <font color="#66cccc">'..'</font><strong>)</strong> <strong>{</strong><a name="a2149"></a><br />2149                          continue;    <a name="a2150"></a><br />2150                      <strong>}</strong> elseif <strong>(</strong><a href="http://www.php.net/substr">substr</a><strong>(</strong><strong>$auto_base</strong> . <a href="../Smarty/_universibo2_framework_smarty_Smarty_class_php.html#defineDIR_SEP">DIR_SEP</a> . <strong>$filename</strong><strong>,</strong>0<strong>,</strong><a href="http://www.php.net/strlen">strlen</a><strong>(</strong><strong>$tname</strong><strong>)</strong><strong>)</strong> == <strong>$tname</strong><strong>)</strong> <strong>{</strong><a name="a2151"></a><br />2151                          <strong>$res</strong> &amp;= (bool)<strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_unlink">_unlink</a><strong>(</strong><strong>$auto_base</strong> . <a href="../Smarty/_universibo2_framework_smarty_Smarty_class_php.html#defineDIR_SEP">DIR_SEP</a> . <strong>$filename</strong><strong>,</strong> <strong>$exp_time</strong><strong>)</strong>;<a name="a2152"></a><br />2152                      <strong>}</strong><a name="a2153"></a><br />2153                  <strong>}</strong><a name="a2154"></a><br />2154              <strong>}</strong><a name="a2155"></a><br />2155          <strong>}</strong><a name="a2156"></a><br />2156  <a name="a2157"></a><br />2157          <font color="blue">return</font> <strong>$res</strong>;<a name="a2158"></a><br />2158      <strong>}</strong><a name="a2159"></a><br />2159  <a name="a2160"></a><br />2160      <font color="#009999">/**</font><a name="a2161"></a><br />2161  <font color="#009999">     * delete a dir recursively (level=0 -&gt; keep root)</font><a name="a2162"></a><br />2162  <font color="#009999">     * WARNING: no tests, it will try to remove what you tell it!</font><a name="a2163"></a><br />2163  <font color="#009999">     *</font><a name="a2164"></a><br />2164  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$dirname </strong><a name="a2165"></a><br />2165  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>integer </em><font color="#009999"></font><strong>$level </strong><a name="a2166"></a><br />2166  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>integer </em><font color="#009999"></font><strong>$exp_time </strong><a name="a2167"></a><br />2167  <font color="#009999">     */</font>    <a name="a2168"></a><br />2168      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_rmdir">_rmdir</a><strong>(</strong><strong>$dirname</strong><strong>,</strong> <strong>$level</strong> = 1<strong>,</strong> <strong>$exp_time</strong> = null<strong>)</strong><a name="a2169"></a><br />2169      <strong>{</strong><a name="a2170"></a><br />2170  <a name="a2171"></a><br />2171         <font color="blue">if</font><strong>(</strong><strong>$handle</strong> = <strong>@</strong><a href="http://www.php.net/opendir">opendir</a><strong>(</strong><strong>$dirname</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2172"></a><br />2172  <a name="a2173"></a><br />2173              while <strong>(</strong>false !== <strong>(</strong><strong>$entry</strong> = <a href="http://www.php.net/readdir">readdir</a><strong>(</strong><strong>$handle</strong><strong>)</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2174"></a><br />2174                  <font color="blue">if</font> <strong>(</strong><strong>$entry</strong> != <font color="#66cccc">'.'</font> &amp;&amp; <strong>$entry</strong> != <font color="#66cccc">'..'</font><strong>)</strong> <strong>{</strong><a name="a2175"></a><br />2175                      <font color="blue">if</font> <strong>(</strong><strong>@</strong><a href="http://www.php.net/is_dir">is_dir</a><strong>(</strong><strong>$dirname</strong> . <a href="../Smarty/_universibo2_framework_smarty_Smarty_class_php.html#defineDIR_SEP">DIR_SEP</a> . <strong>$entry</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2176"></a><br />2176                          <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_rmdir">_rmdir</a><strong>(</strong><strong>$dirname</strong> . <a href="../Smarty/_universibo2_framework_smarty_Smarty_class_php.html#defineDIR_SEP">DIR_SEP</a> . <strong>$entry</strong><strong>,</strong> <strong>$level</strong> + 1<strong>,</strong> <strong>$exp_time</strong><strong>)</strong>;<a name="a2177"></a><br />2177                      <strong>}</strong><a name="a2178"></a><br />2178                      else <strong>{</strong><a name="a2179"></a><br />2179                          <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_unlink">_unlink</a><strong>(</strong><strong>$dirname</strong> . <a href="../Smarty/_universibo2_framework_smarty_Smarty_class_php.html#defineDIR_SEP">DIR_SEP</a> . <strong>$entry</strong><strong>,</strong> <strong>$exp_time</strong><strong>)</strong>;<a name="a2180"></a><br />2180                      <strong>}</strong><a name="a2181"></a><br />2181                  <strong>}</strong><a name="a2182"></a><br />2182              <strong>}</strong><a name="a2183"></a><br />2183  <a name="a2184"></a><br />2184              <a href="http://www.php.net/closedir">closedir</a><strong>(</strong><strong>$handle</strong><strong>)</strong>;<a name="a2185"></a><br />2185  <a name="a2186"></a><br />2186              <font color="blue">if</font> <strong>(</strong><strong>$level</strong><strong>)</strong><a name="a2187"></a><br />2187                  <strong>@</strong><a href="http://www.php.net/rmdir">rmdir</a><strong>(</strong><strong>$dirname</strong><strong>)</strong>;<a name="a2188"></a><br />2188              <a name="a2189"></a><br />2189              <font color="blue">return</font> true;<a name="a2190"></a><br />2190          <a name="a2191"></a><br />2191          <strong>}</strong> else <strong>{</strong><a name="a2192"></a><br />2192                  <font color="blue">return</font> false;<a name="a2193"></a><br />2193          <strong>}</strong><a name="a2194"></a><br />2194      <strong>}</strong><a name="a2195"></a><br />2195  <a name="a2196"></a><br />2196      <font color="#009999">/**</font><a name="a2197"></a><br />2197  <font color="#009999">     * unlink a file, possibly using expiration time</font><a name="a2198"></a><br />2198  <font color="#009999">     *</font><a name="a2199"></a><br />2199  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$resource </strong><a name="a2200"></a><br />2200  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>integer </em><font color="#009999"></font><strong>$exp_time </strong><a name="a2201"></a><br />2201  <font color="#009999">     */</font>    <a name="a2202"></a><br />2202      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_unlink">_unlink</a><strong>(</strong><strong>$resource</strong><strong>,</strong> <strong>$exp_time</strong> = null<strong>)</strong><a name="a2203"></a><br />2203      <strong>{</strong><a name="a2204"></a><br />2204          <font color="blue">if</font><strong>(</strong>isset<strong>(</strong><strong>$exp_time</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2205"></a><br />2205              <font color="blue">if</font><strong>(</strong><a href="http://www.php.net/time">time</a><strong>(</strong><strong>)</strong> - <a href="http://www.php.net/filemtime">filemtime</a><strong>(</strong><strong>$resource</strong><strong>)</strong> &gt;= <strong>$exp_time</strong><strong>)</strong> <strong>{</strong><a name="a2206"></a><br />2206                  <strong>@</strong><a href="http://www.php.net/unlink">unlink</a><strong>(</strong><strong>$resource</strong><strong>)</strong>;<a name="a2207"></a><br />2207              <strong>}</strong><a name="a2208"></a><br />2208          <strong>}</strong> else <strong>{</strong>            <a name="a2209"></a><br />2209              <strong>@</strong><a href="http://www.php.net/unlink">unlink</a><strong>(</strong><strong>$resource</strong><strong>)</strong>;<a name="a2210"></a><br />2210          <strong>}</strong><a name="a2211"></a><br />2211      <strong>}</strong><a name="a2212"></a><br />2212      <a name="a2213"></a><br />2213      <font color="#009999">/**</font><a name="a2214"></a><br />2214  <font color="#009999">     * create full directory structure</font><a name="a2215"></a><br />2215  <font color="#009999">     *</font><a name="a2216"></a><br />2216  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$dir </strong><a name="a2217"></a><br />2217  <font color="#009999">     */</font>    <a name="a2218"></a><br />2218      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_create_dir_structure">_create_dir_structure</a><strong>(</strong><strong>$dir</strong><strong>)</strong><a name="a2219"></a><br />2219      <strong>{</strong><a name="a2220"></a><br />2220          <font color="blue">if</font> <strong>(</strong><strong>!</strong><a href="http://www.php.net/file_exists">file_exists</a><strong>(</strong><strong>$dir</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2221"></a><br />2221              <strong>$_dir_parts</strong> = <a href="http://www.php.net/preg_split">preg_split</a><strong>(</strong><font color="#66cccc">'!\\'</font>.<a href="../Smarty/_universibo2_framework_smarty_Smarty_class_php.html#defineDIR_SEP">DIR_SEP</a>.<font color="#66cccc">'+!'</font><strong>,</strong> <strong>$dir</strong><strong>,</strong> -1<strong>,</strong> PREG_SPLIT_NO_EMPTY<strong>)</strong>;<a name="a2222"></a><br />2222              <strong>$_new_dir</strong> = <strong>(</strong><strong>$dir</strong><strong>{</strong>0<strong>}</strong> == <a href="../Smarty/_universibo2_framework_smarty_Smarty_class_php.html#defineDIR_SEP">DIR_SEP</a><strong>)</strong> ? <a href="../Smarty/_universibo2_framework_smarty_Smarty_class_php.html#defineDIR_SEP">DIR_SEP</a> : <font color="#66cccc">''</font>;<a name="a2223"></a><br />2223              <a name="a2224"></a><br />2224              <font color="green">// do not attempt to test or make directories outside of open_basedir</font><a name="a2225"></a><br />2225              <strong>$_open_basedir_ini</strong> = <a href="http://www.php.net/ini_get">ini_get</a><strong>(</strong><font color="#66cccc">'open_basedir'</font><strong>)</strong>;<a name="a2226"></a><br />2226              <font color="blue">if</font><strong>(</strong><strong>!</strong>empty<strong>(</strong><strong>$_open_basedir_ini</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2227"></a><br />2227                  <strong>$_use_open_basedir</strong> = true;<a name="a2228"></a><br />2228                  <strong>$_open_basedir_sep</strong> = <strong>(</strong><a href="http://www.php.net/strtoupper">strtoupper</a><strong>(</strong><a href="http://www.php.net/substr">substr</a><strong>(</strong>PHP_OS<strong>,</strong> 0<strong>,</strong> 3<strong>)</strong><strong>)</strong> == <font color="#66cccc">'WIN'</font><strong>)</strong> ? <font color="#66cccc">';'</font> : <font color="#66cccc">':'</font>;<a name="a2229"></a><br />2229                  <strong>$_open_basedirs</strong> = <a href="http://www.php.net/explode">explode</a><strong>(</strong><strong>$_open_basedir_sep</strong><strong>,</strong> <strong>$_open_basedir_ini</strong><strong>)</strong>;<a name="a2230"></a><br />2230              <strong>}</strong> else <strong>{</strong>                    <a name="a2231"></a><br />2231                  <strong>$_use_open_basedir</strong> = false;<a name="a2232"></a><br />2232              <strong>}</strong><a name="a2233"></a><br />2233  <a name="a2234"></a><br />2234              <font color="blue">foreach</font> <strong>(</strong><strong>$_dir_parts</strong> as <strong>$_dir_part</strong><strong>)</strong> <strong>{</strong><a name="a2235"></a><br />2235                  <strong>$_new_dir</strong> .= <strong>$_dir_part</strong>;<a name="a2236"></a><br />2236  <a name="a2237"></a><br />2237                  <font color="blue">if</font> <strong>(</strong><strong>$_use_open_basedir</strong><strong>)</strong> <strong>{</strong><a name="a2238"></a><br />2238                      <strong>$_make_new_dir</strong> = false;<a name="a2239"></a><br />2239                      <font color="blue">foreach</font> <strong>(</strong><strong>$_open_basedirs</strong> as <strong>$_open_basedir</strong><strong>)</strong> <strong>{</strong><a name="a2240"></a><br />2240                          <font color="blue">if</font> <strong>(</strong><a href="http://www.php.net/substr">substr</a><strong>(</strong><strong>$_new_dir</strong>.<font color="#66cccc">'/'</font><strong>,</strong> 0<strong>,</strong> <a href="http://www.php.net/strlen">strlen</a><strong>(</strong><strong>$_open_basedir</strong><strong>)</strong><strong>)</strong> == <strong>$_open_basedir</strong><strong>)</strong> <strong>{</strong><a name="a2241"></a><br />2241                              <strong>$_make_new_dir</strong> = true;<a name="a2242"></a><br />2242                              break;<a name="a2243"></a><br />2243                          <strong>}</strong><a name="a2244"></a><br />2244                      <strong>}</strong><a name="a2245"></a><br />2245                  <strong>}</strong> else <strong>{</strong><a name="a2246"></a><br />2246                      <strong>$_make_new_dir</strong> = true;                    <a name="a2247"></a><br />2247                  <strong>}</strong><a name="a2248"></a><br />2248  <a name="a2249"></a><br />2249                  <font color="blue">if</font> <strong>(</strong><strong>$_make_new_dir</strong> &amp;&amp; <strong>!</strong><a href="http://www.php.net/file_exists">file_exists</a><strong>(</strong><strong>$_new_dir</strong><strong>)</strong> &amp;&amp; <strong>!</strong><strong>@</strong><a href="http://www.php.net/mkdir">mkdir</a><strong>(</strong><strong>$_new_dir</strong><strong>,</strong> <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_dir_perms">_dir_perms</a><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2250"></a><br />2250                      <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#methodtrigger_error">trigger_error</a><strong>(</strong>&quot;<font color="#66cccc">problem creating directory \&quot;<strong>$dir</strong>\&quot;</font>&quot;<strong>)</strong>;<a name="a2251"></a><br />2251                      <font color="blue">return</font> false;<a name="a2252"></a><br />2252                  <strong>}</strong><a name="a2253"></a><br />2253                  <strong>$_new_dir</strong> .= <a href="../Smarty/_universibo2_framework_smarty_Smarty_class_php.html#defineDIR_SEP">DIR_SEP</a>;<a name="a2254"></a><br />2254              <strong>}</strong><a name="a2255"></a><br />2255          <strong>}</strong><a name="a2256"></a><br />2256      <strong>}</strong><a name="a2257"></a><br />2257  <a name="a2258"></a><br />2258      <font color="#009999">/**</font><a name="a2259"></a><br />2259  <font color="#009999">     * Prepend the cache information to the cache file</font><a name="a2260"></a><br />2260  <font color="#009999">     * and write it</font><a name="a2261"></a><br />2261  <font color="#009999">     *</font><a name="a2262"></a><br />2262  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$tpl_file </strong><a name="a2263"></a><br />2263  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$cache_id </strong><a name="a2264"></a><br />2264  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$compile_id </strong><a name="a2265"></a><br />2265  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$results </strong><a name="a2266"></a><br />2266  <font color="#009999">     */</font>    <a name="a2267"></a><br />2267      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_write_cache_file">_write_cache_file</a><strong>(</strong><strong>$tpl_file</strong><strong>,</strong> <strong>$cache_id</strong><strong>,</strong> <strong>$compile_id</strong><strong>,</strong> <strong>$results</strong><strong>)</strong><a name="a2268"></a><br />2268      <strong>{</strong><a name="a2269"></a><br />2269          <font color="green">// put timestamp in cache header</font><a name="a2270"></a><br />2270          <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a><strong>[</strong><font color="#66cccc">'timestamp'</font><strong>]</strong> = <a href="http://www.php.net/time">time</a><strong>(</strong><strong>)</strong>;<a name="a2271"></a><br />2271          <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$cache_lifetime">cache_lifetime</a> &gt; -1<strong>)</strong><strong>{</strong><a name="a2272"></a><br />2272              <font color="green">// expiration set</font><a name="a2273"></a><br />2273              <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a><strong>[</strong><font color="#66cccc">'expires'</font><strong>]</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a><strong>[</strong><font color="#66cccc">'timestamp'</font><strong>]</strong> + <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$cache_lifetime">cache_lifetime</a>;<a name="a2274"></a><br />2274          <strong>}</strong> else <strong>{</strong><a name="a2275"></a><br />2275              <font color="green">// cache will never expire</font><a name="a2276"></a><br />2276              <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a><strong>[</strong><font color="#66cccc">'expires'</font><strong>]</strong> = -1;<a name="a2277"></a><br />2277          <strong>}</strong><a name="a2278"></a><br />2278  <a name="a2279"></a><br />2279          <font color="green">// prepend the cache header info into cache file</font><a name="a2280"></a><br />2280          <strong>$results</strong> = <a href="http://www.php.net/serialize">serialize</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a><strong>)</strong>.<font color="#66cccc">&quot;\n&quot;</font>.<strong>$results</strong>;<a name="a2281"></a><br />2281  <a name="a2282"></a><br />2282          <font color="blue">if</font> <strong>(</strong><strong>!</strong>empty<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$cache_handler_func">cache_handler_func</a><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2283"></a><br />2283              <font color="green">// use cache_handler function</font><a name="a2284"></a><br />2284              <strong>$_funcname</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$cache_handler_func">cache_handler_func</a>;<a name="a2285"></a><br />2285              <font color="blue">return</font> <strong>$_funcname</strong><strong>(</strong><font color="#66cccc">'write'</font><strong>,</strong> <strong>$this</strong><strong>,</strong> <strong>$results</strong><strong>,</strong> <strong>$tpl_file</strong><strong>,</strong> <strong>$cache_id</strong><strong>,</strong> <strong>$compile_id</strong><strong>)</strong>;<a name="a2286"></a><br />2286          <strong>}</strong> else <strong>{</strong><a name="a2287"></a><br />2287              <font color="green">// use local cache file</font><a name="a2288"></a><br />2288              <strong>$_auto_id</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_auto_id">_get_auto_id</a><strong>(</strong><strong>$cache_id</strong><strong>,</strong> <strong>$compile_id</strong><strong>)</strong>;<a name="a2289"></a><br />2289              <strong>$_cache_file</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_auto_filename">_get_auto_filename</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$cache_dir">cache_dir</a><strong>,</strong> <strong>$tpl_file</strong><strong>,</strong> <strong>$_auto_id</strong><strong>)</strong>;<a name="a2290"></a><br />2290              <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_write_file">_write_file</a><strong>(</strong><strong>$_cache_file</strong><strong>,</strong> <strong>$results</strong><strong>,</strong> true<strong>)</strong>;<a name="a2291"></a><br />2291              <font color="blue">return</font> true;<a name="a2292"></a><br />2292          <strong>}</strong><a name="a2293"></a><br />2293      <strong>}</strong><a name="a2294"></a><br />2294  <a name="a2295"></a><br />2295      <font color="#009999">/**</font><a name="a2296"></a><br />2296  <font color="#009999">     * read a cache file, determine if it needs to be</font><a name="a2297"></a><br />2297  <font color="#009999">     * regenerated or not</font><a name="a2298"></a><br />2298  <font color="#009999">     *</font><a name="a2299"></a><br />2299  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$tpl_file </strong><a name="a2300"></a><br />2300  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$cache_id </strong><a name="a2301"></a><br />2301  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$compile_id </strong><a name="a2302"></a><br />2302  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$results </strong><a name="a2303"></a><br />2303  <font color="#009999">     */</font>    <a name="a2304"></a><br />2304      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_read_cache_file">_read_cache_file</a><strong>(</strong><strong>$tpl_file</strong><strong>,</strong> <strong>$cache_id</strong><strong>,</strong> <strong>$compile_id</strong><strong>,</strong> <strong>&amp;</strong><strong>$results</strong><strong>)</strong><a name="a2305"></a><br />2305      <strong>{</strong><a name="a2306"></a><br />2306          <font color="blue">static</font>  <strong>$content_cache</strong> = array<strong>(</strong><strong>)</strong>;<a name="a2307"></a><br />2307  <a name="a2308"></a><br />2308          <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong>force_compile<strong>)</strong> <strong>{</strong><a name="a2309"></a><br />2309              <font color="green">// force compile enabled, always regenerate</font><a name="a2310"></a><br />2310              <font color="blue">return</font> false;<a name="a2311"></a><br />2311          <strong>}</strong><a name="a2312"></a><br />2312  <a name="a2313"></a><br />2313          <font color="blue">if</font> <strong>(</strong>isset<strong>(</strong><strong>$content_cache</strong><strong>[</strong>&quot;<strong>$tpl_file</strong>,<strong>$cache_id</strong>,<strong>$compile_id</strong>&quot;<strong>]</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2314"></a><br />2314              list<strong>(</strong><strong>$results</strong><strong>,</strong> <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a><strong>)</strong> = <strong>$content_cache</strong><strong>[</strong>&quot;<strong>$tpl_file</strong>,<strong>$cache_id</strong>,<strong>$compile_id</strong>&quot;<strong>]</strong>;<a name="a2315"></a><br />2315              <font color="blue">return</font> true;<a name="a2316"></a><br />2316          <strong>}</strong><a name="a2317"></a><br />2317  <a name="a2318"></a><br />2318          <font color="blue">if</font> <strong>(</strong><strong>!</strong>empty<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$cache_handler_func">cache_handler_func</a><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2319"></a><br />2319              <font color="green">// use cache_handler function</font><a name="a2320"></a><br />2320              <strong>$_funcname</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$cache_handler_func">cache_handler_func</a>;<a name="a2321"></a><br />2321              <strong>$_funcname</strong><strong>(</strong><font color="#66cccc">'read'</font><strong>,</strong> <strong>$this</strong><strong>,</strong> <strong>$results</strong><strong>,</strong> <strong>$tpl_file</strong><strong>,</strong> <strong>$cache_id</strong><strong>,</strong> <strong>$compile_id</strong><strong>)</strong>;<a name="a2322"></a><br />2322          <strong>}</strong> else <strong>{</strong><a name="a2323"></a><br />2323              <font color="green">// use local cache file</font><a name="a2324"></a><br />2324              <strong>$_auto_id</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_auto_id">_get_auto_id</a><strong>(</strong><strong>$cache_id</strong><strong>,</strong> <strong>$compile_id</strong><strong>)</strong>;<a name="a2325"></a><br />2325              <strong>$_cache_file</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_auto_filename">_get_auto_filename</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$cache_dir">cache_dir</a><strong>,</strong> <strong>$tpl_file</strong><strong>,</strong> <strong>$_auto_id</strong><strong>)</strong>;<a name="a2326"></a><br />2326              <strong>$results</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_read_file">_read_file</a><strong>(</strong><strong>$_cache_file</strong><strong>)</strong>;<a name="a2327"></a><br />2327          <strong>}</strong><a name="a2328"></a><br />2328  <a name="a2329"></a><br />2329          <font color="blue">if</font> <strong>(</strong>empty<strong>(</strong><strong>$results</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2330"></a><br />2330              <font color="green">// nothing to parse (error?), regenerate cache</font><a name="a2331"></a><br />2331              <font color="blue">return</font> false;<a name="a2332"></a><br />2332          <strong>}</strong><a name="a2333"></a><br />2333  <a name="a2334"></a><br />2334          <strong>$cache_split</strong> = <a href="http://www.php.net/explode">explode</a><strong>(</strong><font color="#66cccc">&quot;\n&quot;</font><strong>,</strong> <strong>$results</strong><strong>,</strong> 2<strong>)</strong>;<a name="a2335"></a><br />2335          <strong>$cache_header</strong> = <strong>$cache_split</strong><strong>[</strong>0<strong>]</strong>;<a name="a2336"></a><br />2336  <a name="a2337"></a><br />2337          <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a> = <a href="http://www.php.net/unserialize">unserialize</a><strong>(</strong><strong>$cache_header</strong><strong>)</strong>;<a name="a2338"></a><br />2338  <a name="a2339"></a><br />2339          <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$caching">caching</a> == 2 &amp;&amp; isset <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a><strong>[</strong><font color="#66cccc">'expires'</font><strong>]</strong><strong>)</strong><strong>)</strong><strong>{</strong><a name="a2340"></a><br />2340              <font color="green">// caching by expiration time</font><a name="a2341"></a><br />2341              <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a><strong>[</strong><font color="#66cccc">'expires'</font><strong>]</strong> &gt; -1 &amp;&amp; <strong>(</strong><a href="http://www.php.net/time">time</a><strong>(</strong><strong>)</strong> &gt; <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a><strong>[</strong><font color="#66cccc">'expires'</font><strong>]</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2342"></a><br />2342              <font color="green">// cache expired, regenerate</font><a name="a2343"></a><br />2343              <font color="blue">return</font> false;<a name="a2344"></a><br />2344              <strong>}</strong><a name="a2345"></a><br />2345          <strong>}</strong> else <strong>{</strong><a name="a2346"></a><br />2346              <font color="green">// caching by lifetime</font><a name="a2347"></a><br />2347              <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$cache_lifetime">cache_lifetime</a> &gt; -1 &amp;&amp; <strong>(</strong><a href="http://www.php.net/time">time</a><strong>(</strong><strong>)</strong> - <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a><strong>[</strong><font color="#66cccc">'timestamp'</font><strong>]</strong> &gt; <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$cache_lifetime">cache_lifetime</a><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2348"></a><br />2348              <font color="green">// cache expired, regenerate</font><a name="a2349"></a><br />2349              <font color="blue">return</font> false;<a name="a2350"></a><br />2350              <strong>}</strong><a name="a2351"></a><br />2351          <strong>}</strong><a name="a2352"></a><br />2352  <a name="a2353"></a><br />2353          <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$compile_check">compile_check</a><strong>)</strong> <strong>{</strong><a name="a2354"></a><br />2354              <font color="blue">foreach</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a><strong>[</strong><font color="#66cccc">'template'</font><strong>]</strong> as <strong>$template_dep</strong><strong>)</strong> <strong>{</strong><a name="a2355"></a><br />2355                  <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_fetch_template_info">_fetch_template_info</a><strong>(</strong><strong>$template_dep</strong><strong>,</strong> <strong>$template_source</strong><strong>,</strong> <strong>$template_timestamp</strong><strong>,</strong> false<strong>)</strong>;<a name="a2356"></a><br />2356                  <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a><strong>[</strong><font color="#66cccc">'timestamp'</font><strong>]</strong> &lt; <strong>$template_timestamp</strong><strong>)</strong> <strong>{</strong><a name="a2357"></a><br />2357                      <font color="green">// template file has changed, regenerate cache</font><a name="a2358"></a><br />2358                      <font color="blue">return</font> false;<a name="a2359"></a><br />2359                  <strong>}</strong><a name="a2360"></a><br />2360              <strong>}</strong><a name="a2361"></a><br />2361  <a name="a2362"></a><br />2362              <font color="blue">if</font> <strong>(</strong>isset<strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a><strong>[</strong><font color="#66cccc">'config'</font><strong>]</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2363"></a><br />2363                  <font color="blue">foreach</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a><strong>[</strong><font color="#66cccc">'config'</font><strong>]</strong> as <strong>$config_dep</strong><strong>)</strong> <strong>{</strong><a name="a2364"></a><br />2364                      <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a><strong>[</strong><font color="#66cccc">'timestamp'</font><strong>]</strong> &lt; <a href="http://www.php.net/filemtime">filemtime</a><strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$config_dir">config_dir</a>.<a href="../Smarty/_universibo2_framework_smarty_Smarty_class_php.html#defineDIR_SEP">DIR_SEP</a>.<strong>$config_dep</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2365"></a><br />2365                          <font color="green">// config file has changed, regenerate cache</font><a name="a2366"></a><br />2366                          <font color="blue">return</font> false;<a name="a2367"></a><br />2367                      <strong>}</strong><a name="a2368"></a><br />2368                  <strong>}</strong><a name="a2369"></a><br />2369              <strong>}</strong><a name="a2370"></a><br />2370          <strong>}</strong><a name="a2371"></a><br />2371  <a name="a2372"></a><br />2372          <strong>$results</strong> = <strong>$cache_split</strong><strong>[</strong>1<strong>]</strong>;<a name="a2373"></a><br />2373          <strong>$content_cache</strong><strong>[</strong>&quot;<strong>$tpl_file</strong>,<strong>$cache_id</strong>,<strong>$compile_id</strong>&quot;<strong>]</strong> = array<strong>(</strong><strong>$results</strong><strong>,</strong> <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_cache_info">_cache_info</a><strong>)</strong>;<a name="a2374"></a><br />2374  <a name="a2375"></a><br />2375          <font color="blue">return</font> true;<a name="a2376"></a><br />2376      <strong>}</strong><a name="a2377"></a><br />2377  <a name="a2378"></a><br />2378      <font color="#009999">/**</font><a name="a2379"></a><br />2379  <font color="#009999">     * returns an auto_id for auto-file-functions</font><a name="a2380"></a><br />2380  <font color="#009999">     *</font><a name="a2381"></a><br />2381  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$cache_id </strong><a name="a2382"></a><br />2382  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$compile_id </strong><a name="a2383"></a><br />2383  <font color="#009999">     */</font><a name="a2384"></a><br />2384      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_get_auto_id">_get_auto_id</a><strong>(</strong><strong>$cache_id</strong>=null<strong>,</strong> <strong>$compile_id</strong>=null<strong>)</strong> <strong>{</strong><a name="a2385"></a><br />2385      <font color="blue">if</font> <strong>(</strong>isset<strong>(</strong><strong>$cache_id</strong><strong>)</strong><strong>)</strong><a name="a2386"></a><br />2386          <font color="blue">return</font> <strong>(</strong>isset<strong>(</strong><strong>$compile_id</strong><strong>)</strong><strong>)</strong> ? <strong>$cache_id</strong> . <font color="#66cccc">'|'</font> . <strong>$compile_id</strong>  : <strong>$cache_id</strong>;<a name="a2387"></a><br />2387      elseif<strong>(</strong>isset<strong>(</strong><strong>$compile_id</strong><strong>)</strong><strong>)</strong><a name="a2388"></a><br />2388          <font color="blue">return</font> <strong>$compile_id</strong>;<a name="a2389"></a><br />2389      else<a name="a2390"></a><br />2390          <font color="blue">return</font> null;<a name="a2391"></a><br />2391      <strong>}</strong><a name="a2392"></a><br />2392  <a name="a2393"></a><br />2393      <font color="#009999">/**</font><a name="a2394"></a><br />2394  <font color="#009999">     * get filepath of requested plugin</font><a name="a2395"></a><br />2395  <font color="#009999">     *</font><a name="a2396"></a><br />2396  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$type </strong><a name="a2397"></a><br />2397  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$name </strong><a name="a2398"></a><br />2398  <font color="#009999">     */</font>    <a name="a2399"></a><br />2399      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_get_plugin_filepath">_get_plugin_filepath</a><strong>(</strong><strong>$type</strong><strong>,</strong> <strong>$name</strong><strong>)</strong><a name="a2400"></a><br />2400      <strong>{</strong><a name="a2401"></a><br />2401          <strong>$_plugin_filename</strong> = &quot;<font color="#66cccc"><strong>$type</strong>.<strong>$name</strong>.php</font>&quot;;<a name="a2402"></a><br />2402          <a name="a2403"></a><br />2403          <font color="blue">foreach</font> <strong>(</strong>(array)<strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$plugins_dir">plugins_dir</a> as <strong>$_plugin_dir</strong><strong>)</strong> <strong>{</strong><a name="a2404"></a><br />2404  <a name="a2405"></a><br />2405              <strong>$_plugin_filepath</strong> = <strong>$_plugin_dir</strong> . <a href="../Smarty/_universibo2_framework_smarty_Smarty_class_php.html#defineDIR_SEP">DIR_SEP</a> . <strong>$_plugin_filename</strong>;<a name="a2406"></a><br />2406  <a name="a2407"></a><br />2407              <font color="green">// see if path is relative</font><a name="a2408"></a><br />2408              <font color="blue">if</font> <strong>(</strong><strong>!</strong><a href="http://www.php.net/preg_match">preg_match</a><strong>(</strong><font color="#66cccc">&quot;/^([\/\\\\]|[a-zA-Z]:[\/\\\\])/&quot;</font><strong>,</strong> <strong>$_plugin_dir</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2409"></a><br />2409                  <strong>$_relative_paths</strong><strong>[</strong><strong>]</strong> = <strong>$_plugin_dir</strong>;<a name="a2410"></a><br />2410                  <font color="green">// relative path, see if it is in the SMARTY_DIR</font><a name="a2411"></a><br />2411                  <font color="blue">if</font> <strong>(</strong><strong>@</strong><a href="http://www.php.net/is_readable">is_readable</a><strong>(</strong><a href="../Smarty/_universibo2_framework_smarty_Smarty_class_php.html#defineSMARTY_DIR">SMARTY_DIR</a> . <strong>$_plugin_filepath</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2412"></a><br />2412                      <font color="blue">return</font> <a href="../Smarty/_universibo2_framework_smarty_Smarty_class_php.html#defineSMARTY_DIR">SMARTY_DIR</a> . <strong>$_plugin_filepath</strong>;<a name="a2413"></a><br />2413                  <strong>}</strong><a name="a2414"></a><br />2414              <strong>}</strong><a name="a2415"></a><br />2415              <font color="green">// try relative to cwd (or absolute)</font><a name="a2416"></a><br />2416              <font color="blue">if</font> <strong>(</strong><strong>@</strong><a href="http://www.php.net/is_readable">is_readable</a><strong>(</strong><strong>$_plugin_filepath</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2417"></a><br />2417                  <font color="blue">return</font> <strong>$_plugin_filepath</strong>;<a name="a2418"></a><br />2418              <strong>}</strong><a name="a2419"></a><br />2419          <strong>}</strong><a name="a2420"></a><br />2420  <a name="a2421"></a><br />2421          <font color="green">// still not found, try PHP include_path</font><a name="a2422"></a><br />2422          <font color="blue">if</font><strong>(</strong>isset<strong>(</strong><strong>$_relative_paths</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2423"></a><br />2423              <font color="blue">foreach</font> <strong>(</strong>(array)<strong>$_relative_paths</strong> as <strong>$_plugin_dir</strong><strong>)</strong> <strong>{</strong><a name="a2424"></a><br />2424  <a name="a2425"></a><br />2425                  <strong>$_plugin_filepath</strong> = <strong>$_plugin_dir</strong> . <a href="../Smarty/_universibo2_framework_smarty_Smarty_class_php.html#defineDIR_SEP">DIR_SEP</a> . <strong>$_plugin_filename</strong>;<a name="a2426"></a><br />2426  <a name="a2427"></a><br />2427                  <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_include_path">_get_include_path</a><strong>(</strong><strong>$_plugin_filepath</strong><strong>,</strong> <strong>$_include_filepath</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2428"></a><br />2428                      <font color="blue">return</font> <strong>$_include_filepath</strong>;<a name="a2429"></a><br />2429                  <strong>}</strong><a name="a2430"></a><br />2430              <strong>}</strong><a name="a2431"></a><br />2431          <strong>}</strong><a name="a2432"></a><br />2432          <a name="a2433"></a><br />2433          <a name="a2434"></a><br />2434          <font color="blue">return</font> false;<a name="a2435"></a><br />2435      <strong>}</strong><a name="a2436"></a><br />2436  <a name="a2437"></a><br />2437      <font color="#009999">/**</font><a name="a2438"></a><br />2438  <font color="#009999">     * Load requested plugins</font><a name="a2439"></a><br />2439  <font color="#009999">     *</font><a name="a2440"></a><br />2440  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>array </em><font color="#009999"></font><strong>$plugins </strong><a name="a2441"></a><br />2441  <font color="#009999">     */</font>    <a name="a2442"></a><br />2442      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_load_plugins">_load_plugins</a><strong>(</strong><strong>$plugins</strong><strong>)</strong><a name="a2443"></a><br />2443      <strong>{</strong><a name="a2444"></a><br />2444          <a name="a2445"></a><br />2445          <font color="blue">foreach</font> <strong>(</strong><strong>$plugins</strong> as <strong>$plugin_info</strong><strong>)</strong> <strong>{</strong>            <a name="a2446"></a><br />2446              list<strong>(</strong><strong>$type</strong><strong>,</strong> <strong>$name</strong><strong>,</strong> <strong>$tpl_file</strong><strong>,</strong> <strong>$tpl_line</strong><strong>,</strong> <strong>$delayed_loading</strong><strong>)</strong> = <strong>$plugin_info</strong>;<a name="a2447"></a><br />2447              <strong>$plugin</strong> = <strong>&amp;</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><strong>$type</strong><strong>]</strong><strong>[</strong><strong>$name</strong><strong>]</strong>;<a name="a2448"></a><br />2448              <a name="a2449"></a><br />2449              <font color="green">/*</font><a name="a2450"></a><br />2450  <font color="green">             * We do not load plugin more than once for each instance of Smarty.</font><a name="a2451"></a><br />2451  <font color="green">             * The following code checks for that. The plugin can also be</font><a name="a2452"></a><br />2452  <font color="green">             * registered dynamically at runtime, in which case template file</font><a name="a2453"></a><br />2453  <font color="green">             * and line number will be unknown, so we fill them in.</font><a name="a2454"></a><br />2454  <font color="green">             *</font><a name="a2455"></a><br />2455  <font color="green">             * The final element of the info array is a flag that indicates</font><a name="a2456"></a><br />2456  <font color="green">             * whether the dynamically registered plugin function has been</font><a name="a2457"></a><br />2457  <font color="green">             * checked for existence yet or not.</font><a name="a2458"></a><br />2458  <font color="green">             */</font><a name="a2459"></a><br />2459              <font color="blue">if</font> <strong>(</strong>isset<strong>(</strong><strong>$plugin</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2460"></a><br />2460                  <font color="blue">if</font> <strong>(</strong><strong>!</strong><strong>$plugin</strong><strong>[</strong>3<strong>]</strong><strong>)</strong> <strong>{</strong><a name="a2461"></a><br />2461                      <font color="blue">if</font> <strong>(</strong><strong>!</strong><a href="http://www.php.net/function_exists">function_exists</a><strong>(</strong><strong>$plugin</strong><strong>[</strong>0<strong>]</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2462"></a><br />2462                          <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_trigger_fatal_error">_trigger_fatal_error</a><strong>(</strong>&quot;<font color="#66cccc"><strong>[</strong>plugin<strong>]</strong> <strong>$type</strong> '<strong>$name</strong>' is not implemented</font>&quot;<strong>,</strong> <strong>$tpl_file</strong><strong>,</strong> <strong>$tpl_line</strong><strong>,</strong> __FILE__<strong>,</strong> __LINE__<strong>)</strong>;<a name="a2463"></a><br />2463                      <strong>}</strong> else <strong>{</strong><a name="a2464"></a><br />2464                          <strong>$plugin</strong><strong>[</strong>1<strong>]</strong> = <strong>$tpl_file</strong>;<a name="a2465"></a><br />2465                          <strong>$plugin</strong><strong>[</strong>2<strong>]</strong> = <strong>$tpl_line</strong>;<a name="a2466"></a><br />2466                          <strong>$plugin</strong><strong>[</strong>3<strong>]</strong> = true;<a name="a2467"></a><br />2467                      <strong>}</strong><a name="a2468"></a><br />2468                  <strong>}</strong><a name="a2469"></a><br />2469                  continue;<a name="a2470"></a><br />2470              <strong>}</strong> else <font color="blue">if</font> <strong>(</strong><strong>$type</strong> == <font color="#66cccc">'insert'</font><strong>)</strong> <strong>{</strong><a name="a2471"></a><br />2471                  <font color="green">/*</font><a name="a2472"></a><br />2472  <font color="green">                 * For backwards compatibility, we check for insert functions in</font><a name="a2473"></a><br />2473  <font color="green">                 * the symbol table before trying to load them as a plugin.</font><a name="a2474"></a><br />2474  <font color="green">                 */</font><a name="a2475"></a><br />2475                  <strong>$plugin_func</strong> = <font color="#66cccc">'insert_'</font> . <strong>$name</strong>;<a name="a2476"></a><br />2476                  <font color="blue">if</font> <strong>(</strong><a href="http://www.php.net/function_exists">function_exists</a><strong>(</strong><strong>$plugin_func</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2477"></a><br />2477                      <strong>$plugin</strong> = array<strong>(</strong><strong>$plugin_func</strong><strong>,</strong> <strong>$tpl_file</strong><strong>,</strong> <strong>$tpl_line</strong><strong>,</strong> true<strong>)</strong>;<a name="a2478"></a><br />2478                      continue;<a name="a2479"></a><br />2479                  <strong>}</strong><a name="a2480"></a><br />2480              <strong>}</strong><a name="a2481"></a><br />2481  <a name="a2482"></a><br />2482              <strong>$plugin_file</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_plugin_filepath">_get_plugin_filepath</a><strong>(</strong><strong>$type</strong><strong>,</strong> <strong>$name</strong><strong>)</strong>;<a name="a2483"></a><br />2483  <a name="a2484"></a><br />2484              <font color="blue">if</font> <strong>(</strong><strong>!</strong> <strong>$found</strong> = <strong>(</strong><strong>$plugin_file</strong> != false<strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2485"></a><br />2485                  <strong>$message</strong> = &quot;<font color="#66cccc">could not load plugin file '<strong>$type</strong>.<strong>$name</strong>.php'\n</font>&quot;;<a name="a2486"></a><br />2486              <strong>}</strong><a name="a2487"></a><br />2487  <a name="a2488"></a><br />2488              <font color="green">/*</font><a name="a2489"></a><br />2489  <font color="green">             * If plugin file is found, it -must- provide the properly named</font><a name="a2490"></a><br />2490  <font color="green">             * plugin function. In case it doesn't, simply output the error and</font><a name="a2491"></a><br />2491  <font color="green">             * do not fall back on any other method.</font><a name="a2492"></a><br />2492  <font color="green">             */</font><a name="a2493"></a><br />2493              <font color="blue">if</font> <strong>(</strong><strong>$found</strong><strong>)</strong> <strong>{</strong><a name="a2494"></a><br />2494                  <font color="blue">include_once</font> <strong>$plugin_file</strong>;<a name="a2495"></a><br />2495  <a name="a2496"></a><br />2496                  <strong>$plugin_func</strong> = <font color="#66cccc">'smarty_'</font> . <strong>$type</strong> . <font color="#66cccc">'_'</font> . <strong>$name</strong>;<a name="a2497"></a><br />2497                  <font color="blue">if</font> <strong>(</strong><strong>!</strong><a href="http://www.php.net/function_exists">function_exists</a><strong>(</strong><strong>$plugin_func</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2498"></a><br />2498                      <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_trigger_fatal_error">_trigger_fatal_error</a><strong>(</strong>&quot;<font color="#66cccc"><strong>[</strong>plugin<strong>]</strong> function <strong>$plugin_func</strong>() not found in <strong>$plugin_file</strong></font>&quot;<strong>,</strong> <strong>$tpl_file</strong><strong>,</strong> <strong>$tpl_line</strong><strong>,</strong> __FILE__<strong>,</strong> __LINE__<strong>)</strong>;<a name="a2499"></a><br />2499                      continue;<a name="a2500"></a><br />2500                  <strong>}</strong><a name="a2501"></a><br />2501              <strong>}</strong><a name="a2502"></a><br />2502              <font color="green">/*</font><a name="a2503"></a><br />2503  <font color="green">             * In case of insert plugins, their code may be loaded later via</font><a name="a2504"></a><br />2504  <font color="green">             * 'script' attribute.</font><a name="a2505"></a><br />2505  <font color="green">             */</font><a name="a2506"></a><br />2506              else <font color="blue">if</font> <strong>(</strong><strong>$type</strong> == <font color="#66cccc">'insert'</font> &amp;&amp; <strong>$delayed_loading</strong><strong>)</strong> <strong>{</strong><a name="a2507"></a><br />2507                  <strong>$plugin_func</strong> = <font color="#66cccc">'smarty_'</font> . <strong>$type</strong> . <font color="#66cccc">'_'</font> . <strong>$name</strong>;<a name="a2508"></a><br />2508                  <strong>$found</strong> = true;<a name="a2509"></a><br />2509              <strong>}</strong><a name="a2510"></a><br />2510  <a name="a2511"></a><br />2511              <font color="green">/*</font><a name="a2512"></a><br />2512  <font color="green">             * Plugin specific processing and error checking.</font><a name="a2513"></a><br />2513  <font color="green">             */</font><a name="a2514"></a><br />2514              <font color="blue">if</font> <strong>(</strong><strong>!</strong><strong>$found</strong><strong>)</strong> <strong>{</strong><a name="a2515"></a><br />2515                  <font color="blue">if</font> <strong>(</strong><strong>$type</strong> == <font color="#66cccc">'modifier'</font><strong>)</strong> <strong>{</strong><a name="a2516"></a><br />2516                      <font color="green">/*</font><a name="a2517"></a><br />2517  <font color="green">                     * In case modifier falls back on using PHP functions</font><a name="a2518"></a><br />2518  <font color="green">                     * directly, we only allow those specified in the security</font><a name="a2519"></a><br />2519  <font color="green">                     * context.</font><a name="a2520"></a><br />2520  <font color="green">                     */</font><a name="a2521"></a><br />2521                      <font color="blue">if</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$security">security</a> &amp;&amp; <strong>!</strong><a href="http://www.php.net/in_array">in_array</a><strong>(</strong><strong>$name</strong><strong>,</strong> <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$security_settings">security_settings</a><strong>[</strong><font color="#66cccc">'MODIFIER_FUNCS'</font><strong>]</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2522"></a><br />2522                          <strong>$message</strong> = &quot;<font color="#66cccc">(secure mode) modifier '<strong>$name</strong>' is not allowed</font>&quot;;<a name="a2523"></a><br />2523                      <strong>}</strong> else <strong>{</strong><a name="a2524"></a><br />2524                          <font color="blue">if</font> <strong>(</strong><strong>!</strong><a href="http://www.php.net/function_exists">function_exists</a><strong>(</strong><strong>$name</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2525"></a><br />2525                              <strong>$message</strong> = &quot;<font color="#66cccc">modifier '<strong>$name</strong>' is not implemented</font>&quot;;<a name="a2526"></a><br />2526                          <strong>}</strong> else <strong>{</strong><a name="a2527"></a><br />2527                              <strong>$plugin_func</strong> = <strong>$name</strong>;<a name="a2528"></a><br />2528                              <strong>$found</strong> = true;<a name="a2529"></a><br />2529                          <strong>}</strong><a name="a2530"></a><br />2530                      <strong>}</strong><a name="a2531"></a><br />2531                  <strong>}</strong> else <font color="blue">if</font> <strong>(</strong><strong>$type</strong> == <font color="#66cccc">'function'</font><strong>)</strong> <strong>{</strong><a name="a2532"></a><br />2532                      <font color="green">/*</font><a name="a2533"></a><br />2533  <font color="green">                     * This is a catch-all situation.</font><a name="a2534"></a><br />2534  <font color="green">                     */</font><a name="a2535"></a><br />2535                      <strong>$message</strong> = &quot;<font color="#66cccc">unknown tag - '<strong>$name</strong>'</font>&quot;;<a name="a2536"></a><br />2536                  <strong>}</strong><a name="a2537"></a><br />2537              <strong>}</strong><a name="a2538"></a><br />2538  <a name="a2539"></a><br />2539              <font color="blue">if</font> <strong>(</strong><strong>$found</strong><strong>)</strong> <strong>{</strong><a name="a2540"></a><br />2540                  <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><strong>$type</strong><strong>]</strong><strong>[</strong><strong>$name</strong><strong>]</strong> = array<strong>(</strong><strong>$plugin_func</strong><strong>,</strong> <strong>$tpl_file</strong><strong>,</strong> <strong>$tpl_line</strong><strong>,</strong> true<strong>)</strong>;<a name="a2541"></a><br />2541              <strong>}</strong> else <strong>{</strong><a name="a2542"></a><br />2542                  <font color="green">// output error</font><a name="a2543"></a><br />2543                  <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_trigger_fatal_error">_trigger_fatal_error</a><strong>(</strong><font color="#66cccc">'[plugin] '</font> . <strong>$message</strong><strong>,</strong> <strong>$tpl_file</strong><strong>,</strong> <strong>$tpl_line</strong><strong>,</strong> __FILE__<strong>,</strong> __LINE__<strong>)</strong>;<a name="a2544"></a><br />2544              <strong>}</strong><a name="a2545"></a><br />2545          <strong>}</strong><a name="a2546"></a><br />2546      <strong>}</strong><a name="a2547"></a><br />2547  <a name="a2548"></a><br />2548      <font color="#009999">/**</font><a name="a2549"></a><br />2549  <font color="#009999">     * load a resource plugin</font><a name="a2550"></a><br />2550  <font color="#009999">     *</font><a name="a2551"></a><br />2551  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$type </strong><a name="a2552"></a><br />2552  <font color="#009999">     */</font>    <a name="a2553"></a><br />2553      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_load_resource_plugin">_load_resource_plugin</a><strong>(</strong><strong>$type</strong><strong>)</strong><a name="a2554"></a><br />2554      <strong>{</strong><a name="a2555"></a><br />2555          <font color="green">/*</font><a name="a2556"></a><br />2556  <font color="green">         * Resource plugins are not quite like the other ones, so they are</font><a name="a2557"></a><br />2557  <font color="green">         * handled differently. The first element of plugin info is the array of</font><a name="a2558"></a><br />2558  <font color="green">         * functions provided by the plugin, the second one indicates whether</font><a name="a2559"></a><br />2559  <font color="green">         * all of them exist or not.</font><a name="a2560"></a><br />2560  <font color="green">         */</font><a name="a2561"></a><br />2561  <a name="a2562"></a><br />2562          <strong>$plugin</strong> = <strong>&amp;</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'resource'</font><strong>]</strong><strong>[</strong><strong>$type</strong><strong>]</strong>;<a name="a2563"></a><br />2563          <font color="blue">if</font> <strong>(</strong>isset<strong>(</strong><strong>$plugin</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2564"></a><br />2564              <font color="blue">if</font> <strong>(</strong><strong>!</strong><strong>$plugin</strong><strong>[</strong>1<strong>]</strong> &amp;&amp; <a href="http://www.php.net/count">count</a><strong>(</strong><strong>$plugin</strong><strong>[</strong>0<strong>]</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2565"></a><br />2565                  <strong>$plugin</strong><strong>[</strong>1<strong>]</strong> = true;<a name="a2566"></a><br />2566                  <font color="blue">foreach</font> <strong>(</strong><strong>$plugin</strong><strong>[</strong>0<strong>]</strong> as <strong>$plugin_func</strong><strong>)</strong> <strong>{</strong><a name="a2567"></a><br />2567                      <font color="blue">if</font> <strong>(</strong><strong>!</strong><a href="http://www.php.net/function_exists">function_exists</a><strong>(</strong><strong>$plugin_func</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2568"></a><br />2568                          <strong>$plugin</strong><strong>[</strong>1<strong>]</strong> = false;<a name="a2569"></a><br />2569                          break;<a name="a2570"></a><br />2570                      <strong>}</strong><a name="a2571"></a><br />2571                  <strong>}</strong><a name="a2572"></a><br />2572              <strong>}</strong><a name="a2573"></a><br />2573  <a name="a2574"></a><br />2574              <font color="blue">if</font> <strong>(</strong><strong>!</strong><strong>$plugin</strong><strong>[</strong>1<strong>]</strong><strong>)</strong> <strong>{</strong><a name="a2575"></a><br />2575                  <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_trigger_fatal_error">_trigger_fatal_error</a><strong>(</strong>&quot;<font color="#66cccc"><strong>[</strong>plugin<strong>]</strong> resource '<strong>$type</strong>' is not implemented</font>&quot;<strong>,</strong> null<strong>,</strong> null<strong>,</strong> __FILE__<strong>,</strong> __LINE__<strong>)</strong>;<a name="a2576"></a><br />2576              <strong>}</strong><a name="a2577"></a><br />2577  <a name="a2578"></a><br />2578              <font color="blue">return</font>;<a name="a2579"></a><br />2579          <strong>}</strong><a name="a2580"></a><br />2580  <a name="a2581"></a><br />2581          <strong>$plugin_file</strong> = <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_get_plugin_filepath">_get_plugin_filepath</a><strong>(</strong><font color="#66cccc">'resource'</font><strong>,</strong> <strong>$type</strong><strong>)</strong>;<a name="a2582"></a><br />2582          <strong>$found</strong> = <strong>(</strong><strong>$plugin_file</strong> != false<strong>)</strong>;<a name="a2583"></a><br />2583  <a name="a2584"></a><br />2584          <font color="blue">if</font> <strong>(</strong><strong>$found</strong><strong>)</strong> <strong>{</strong>            <font color="green">/*</font><a name="a2585"></a><br />2585  <font color="green">             * If the plugin file is found, it -must- provide the properly named</font><a name="a2586"></a><br />2586  <font color="green">             * plugin functions.</font><a name="a2587"></a><br />2587  <font color="green">             */</font><a name="a2588"></a><br />2588              <font color="blue">include_once</font> <strong>$plugin_file</strong>;<a name="a2589"></a><br />2589  <a name="a2590"></a><br />2590              <font color="green">/*</font><a name="a2591"></a><br />2591  <font color="green">             * Locate functions that we require the plugin to provide.</font><a name="a2592"></a><br />2592  <font color="green">             */</font><a name="a2593"></a><br />2593              <strong>$resource_ops</strong> = array<strong>(</strong><font color="#66cccc">'source'</font><strong>,</strong> <font color="#66cccc">'timestamp'</font><strong>,</strong> <font color="#66cccc">'secure'</font><strong>,</strong> <font color="#66cccc">'trusted'</font><strong>)</strong>;<a name="a2594"></a><br />2594              <strong>$resource_funcs</strong> = array<strong>(</strong><strong>)</strong>;<a name="a2595"></a><br />2595              <font color="blue">foreach</font> <strong>(</strong><strong>$resource_ops</strong> as <strong>$op</strong><strong>)</strong> <strong>{</strong><a name="a2596"></a><br />2596                  <strong>$plugin_func</strong> = <font color="#66cccc">'smarty_resource_'</font> . <strong>$type</strong> . <font color="#66cccc">'_'</font> . <strong>$op</strong>;<a name="a2597"></a><br />2597                  <font color="blue">if</font> <strong>(</strong><strong>!</strong><a href="http://www.php.net/function_exists">function_exists</a><strong>(</strong><strong>$plugin_func</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2598"></a><br />2598                      <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#method_trigger_fatal_error">_trigger_fatal_error</a><strong>(</strong>&quot;<font color="#66cccc"><strong>[</strong>plugin<strong>]</strong> function <strong>$plugin_func</strong>() not found in <strong>$plugin_file</strong></font>&quot;<strong>,</strong> null<strong>,</strong> null<strong>,</strong> __FILE__<strong>,</strong> __LINE__<strong>)</strong>;<a name="a2599"></a><br />2599                      <font color="blue">return</font>;<a name="a2600"></a><br />2600                  <strong>}</strong> else <strong>{</strong><a name="a2601"></a><br />2601                      <strong>$resource_funcs</strong><strong>[</strong><strong>]</strong> = <strong>$plugin_func</strong>;<a name="a2602"></a><br />2602                  <strong>}</strong><a name="a2603"></a><br />2603              <strong>}</strong><a name="a2604"></a><br />2604  <a name="a2605"></a><br />2605              <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$_plugins">_plugins</a><strong>[</strong><font color="#66cccc">'resource'</font><strong>]</strong><strong>[</strong><strong>$type</strong><strong>]</strong> = array<strong>(</strong><strong>$resource_funcs</strong><strong>,</strong> true<strong>)</strong>;<a name="a2606"></a><br />2606          <strong>}</strong><a name="a2607"></a><br />2607      <strong>}</strong><a name="a2608"></a><br />2608  <a name="a2609"></a><br />2609      <font color="#009999">/**</font><a name="a2610"></a><br />2610  <font color="#009999">     * automatically load a set of filters</font><a name="a2611"></a><br />2611  <font color="#009999">     */</font><a name="a2612"></a><br />2612      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_autoload_filters">_autoload_filters</a><strong>(</strong><strong>)</strong><a name="a2613"></a><br />2613      <strong>{</strong><a name="a2614"></a><br />2614          <font color="blue">foreach</font> <strong>(</strong><strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#var$autoload_filters">autoload_filters</a> as <strong>$filter_type</strong> =&gt; <strong>$filters</strong><strong>)</strong> <strong>{</strong><a name="a2615"></a><br />2615              <font color="blue">foreach</font> <strong>(</strong><strong>$filters</strong> as <strong>$filter</strong><strong>)</strong> <strong>{</strong><a name="a2616"></a><br />2616                  <strong>$this</strong><strong>-&gt;</strong><a href="../Smarty/Smarty.html#methodload_filter">load_filter</a><strong>(</strong><strong>$filter_type</strong><strong>,</strong> <strong>$filter</strong><strong>)</strong>;<a name="a2617"></a><br />2617              <strong>}</strong><a name="a2618"></a><br />2618          <strong>}</strong><a name="a2619"></a><br />2619      <strong>}</strong><a name="a2620"></a><br />2620  <a name="a2621"></a><br />2621      <font color="#009999">/**</font><a name="a2622"></a><br />2622  <font color="#009999">     * Quote subpattern references</font><a name="a2623"></a><br />2623  <font color="#009999">     *</font><a name="a2624"></a><br />2624  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$string </strong><a name="a2625"></a><br />2625  <font color="#009999">     */</font><a name="a2626"></a><br />2626      <font color="blue">function</font> <a href="../Smarty/Smarty.html#methodquote_replace">quote_replace</a><strong>(</strong><strong>$string</strong><strong>)</strong><a name="a2627"></a><br />2627      <strong>{</strong><a name="a2628"></a><br />2628          <font color="blue">return</font> <a href="http://www.php.net/preg_replace">preg_replace</a><strong>(</strong><font color="#66cccc">'![\\$]\d!'</font><strong>,</strong> <font color="#66cccc">'\\\\\\0'</font><strong>,</strong> <strong>$string</strong><strong>)</strong>;<a name="a2629"></a><br />2629      <strong>}</strong><a name="a2630"></a><br />2630  <a name="a2631"></a><br />2631  <a name="a2632"></a><br />2632      <font color="#009999">/**</font><a name="a2633"></a><br />2633  <font color="#009999">     * trigger Smarty plugin error</font><a name="a2634"></a><br />2634  <font color="#009999">     *</font><a name="a2635"></a><br />2635  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$error_msg </strong><a name="a2636"></a><br />2636  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$tpl_file </strong><a name="a2637"></a><br />2637  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>integer </em><font color="#009999"></font><strong>$tpl_line </strong><a name="a2638"></a><br />2638  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$file </strong><a name="a2639"></a><br />2639  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>integer </em><font color="#009999"></font><strong>$line </strong><a name="a2640"></a><br />2640  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>integer </em><font color="#009999"></font><strong>$error_type </strong><a name="a2641"></a><br />2641  <font color="#009999">     */</font>    <a name="a2642"></a><br />2642      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_trigger_fatal_error">_trigger_fatal_error</a><strong>(</strong><strong>$error_msg</strong><strong>,</strong> <strong>$tpl_file</strong> = null<strong>,</strong> <strong>$tpl_line</strong> = null<strong>,</strong><a name="a2643"></a><br />2643              <strong>$file</strong> = null<strong>,</strong> <strong>$line</strong> = null<strong>,</strong> <strong>$error_type</strong> = E_USER_ERROR<strong>)</strong><a name="a2644"></a><br />2644      <strong>{</strong><a name="a2645"></a><br />2645          <font color="blue">if</font><strong>(</strong>isset<strong>(</strong><strong>$file</strong><strong>)</strong> &amp;&amp; isset<strong>(</strong><strong>$line</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2646"></a><br />2646              <strong>$info</strong> = <font color="#66cccc">' ('</font>.<a href="http://www.php.net/basename">basename</a><strong>(</strong><strong>$file</strong><strong>)</strong>.&quot;<font color="#66cccc">, line <strong>$line</strong>)</font>&quot;;<a name="a2647"></a><br />2647          <strong>}</strong> else <strong>{</strong><a name="a2648"></a><br />2648              <strong>$info</strong> = null;<a name="a2649"></a><br />2649          <strong>}</strong><a name="a2650"></a><br />2650          <font color="blue">if</font> <strong>(</strong>isset<strong>(</strong><strong>$tpl_line</strong><strong>)</strong> &amp;&amp; isset<strong>(</strong><strong>$tpl_file</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2651"></a><br />2651              <a href="../Smarty/Smarty.html#methodtrigger_error">trigger_error</a><strong>(</strong><font color="#66cccc">&quot;Smarty error: [in &quot;</font> . <strong>$tpl_file</strong> . <font color="#66cccc">&quot; line &quot;</font> .<a name="a2652"></a><br />2652                            <strong>$tpl_line</strong> . &quot;<font color="#66cccc"><strong>]</strong>: <strong>$error_msg</strong><strong>$info</strong></font>&quot;<strong>,</strong> <strong>$error_type</strong><strong>)</strong>;<a name="a2653"></a><br />2653          <strong>}</strong> else <strong>{</strong><a name="a2654"></a><br />2654              <a href="../Smarty/Smarty.html#methodtrigger_error">trigger_error</a><strong>(</strong>&quot;<font color="#66cccc">Smarty error: <strong>$error_msg</strong><strong>$info</strong></font>&quot;<strong>,</strong> <strong>$error_type</strong><strong>)</strong>;<a name="a2655"></a><br />2655          <strong>}</strong><a name="a2656"></a><br />2656      <strong>}</strong><a name="a2657"></a><br />2657  <a name="a2658"></a><br />2658      <font color="#009999">/**</font><a name="a2659"></a><br />2659  <font color="#009999">     * Get seconds and microseconds</font><a name="a2660"></a><br />2660  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@return </font></strong><font color="#009999"></font><em>double </em><a name="a2661"></a><br />2661  <font color="#009999">     */</font>    <a name="a2662"></a><br />2662      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_get_microtime">_get_microtime</a><strong>(</strong><strong>)</strong><a name="a2663"></a><br />2663      <strong>{</strong><a name="a2664"></a><br />2664          <strong>$mtime</strong> = <a href="http://www.php.net/microtime">microtime</a><strong>(</strong><strong>)</strong>;<a name="a2665"></a><br />2665          <strong>$mtime</strong> = <a href="http://www.php.net/explode">explode</a><strong>(</strong><font color="#66cccc">&quot; &quot;</font><strong>,</strong> <strong>$mtime</strong><strong>)</strong>;<a name="a2666"></a><br />2666          <strong>$mtime</strong> = (double)<strong>(</strong><strong>$mtime</strong><strong>[</strong>1<strong>]</strong><strong>)</strong> + (double)<strong>(</strong><strong>$mtime</strong><strong>[</strong>0<strong>]</strong><strong>)</strong>;<a name="a2667"></a><br />2667          <font color="blue">return</font> <strong>(</strong><strong>$mtime</strong><strong>)</strong>;<a name="a2668"></a><br />2668      <strong>}</strong><a name="a2669"></a><br />2669  <a name="a2670"></a><br />2670      <font color="#009999">/**</font><a name="a2671"></a><br />2671  <font color="#009999">     * Get path to file from include_path</font><a name="a2672"></a><br />2672  <font color="#009999">     *</font><a name="a2673"></a><br />2673  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$file_path </strong><a name="a2674"></a><br />2674  <font color="#009999">     *</font><font color="#009999"> </font><strong><font color = "#0099FF">@param </font></strong><font color="#009999"></font><em>string </em><font color="#009999"></font><strong>$new_file_path </strong><a name="a2675"></a><br />2675  <font color="#009999">     */</font>    <a name="a2676"></a><br />2676      <font color="blue">function</font> <a href="../Smarty/Smarty.html#method_get_include_path">_get_include_path</a><strong>(</strong><strong>$file_path</strong><strong>,</strong> <strong>&amp;</strong><strong>$new_file_path</strong><strong>)</strong><a name="a2677"></a><br />2677      <strong>{</strong><a name="a2678"></a><br />2678          <font color="blue">static</font> <strong>$_path_array</strong> = null;<a name="a2679"></a><br />2679          <a name="a2680"></a><br />2680          <font color="blue">if</font><strong>(</strong><strong>!</strong>isset<strong>(</strong><strong>$_path_array</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2681"></a><br />2681              <strong>$_ini_include_path</strong> = ini_get<strong>(</strong><font color="#66cccc">'include_path'</font><strong>)</strong>;<a name="a2682"></a><br />2682  <a name="a2683"></a><br />2683              <font color="blue">if</font><strong>(</strong>strstr<strong>(</strong><strong>$_ini_include_path</strong><strong>,</strong><font color="#66cccc">';'</font><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2684"></a><br />2684                  <font color="green">// windows pathnames</font><a name="a2685"></a><br />2685                  <strong>$_path_array</strong> = explode<strong>(</strong><font color="#66cccc">';'</font><strong>,</strong><strong>$_ini_include_path</strong><strong>)</strong>;<a name="a2686"></a><br />2686              <strong>}</strong> else <strong>{</strong><a name="a2687"></a><br />2687                  <strong>$_path_array</strong> = <a href="http://www.php.net/explode">explode</a><strong>(</strong><font color="#66cccc">':'</font><strong>,</strong><strong>$_ini_include_path</strong><strong>)</strong>;<a name="a2688"></a><br />2688              <strong>}</strong><a name="a2689"></a><br />2689          <strong>}</strong><a name="a2690"></a><br />2690          <font color="blue">foreach</font> <strong>(</strong><strong>$_path_array</strong> as <strong>$_include_path</strong><strong>)</strong> <strong>{</strong><a name="a2691"></a><br />2691              <font color="blue">if</font> <strong>(</strong><a href="http://www.php.net/file_exists">file_exists</a><strong>(</strong><strong>$_include_path</strong> . <a href="../Smarty/_universibo2_framework_smarty_Smarty_class_php.html#defineDIR_SEP">DIR_SEP</a> . <strong>$file_path</strong><strong>)</strong><strong>)</strong> <strong>{</strong><a name="a2692"></a><br />2692                     <strong>$new_file_path</strong> = <strong>$_include_path</strong> . <a href="../Smarty/_universibo2_framework_smarty_Smarty_class_php.html#defineDIR_SEP">DIR_SEP</a> . <strong>$file_path</strong>;<a name="a2693"></a><br />2693                  <font color="blue">return</font> true;<a name="a2694"></a><br />2694              <strong>}</strong><a name="a2695"></a><br />2695          <strong>}</strong><a name="a2696"></a><br />2696          <font color="blue">return</font> false;<a name="a2697"></a><br />2697      <strong>}</strong>    <a name="a2698"></a><br />2698      <strong><font color="blue">/**#@-*/</font></strong><a name="a2699"></a><br />2699  <strong>}</strong><a name="a2700"></a><br />2700  <a name="a2701"></a><br />2701  <font color="green">/* vim: set expandtab: */</font><a name="a2702"></a><br />2702  <a name="a2703"></a><br />2703  <strong>?&gt;</strong></pre>
        <div class="credit">
		    <hr />
		    Documentation generated on Fri, 28 Nov 2003 13:11:41 +0100 by <a href="http://www.phpdoc.org">phpDocumentor 1.2.3</a>
	      </div>
      </td></tr></table>
    </td>
  </tr>
</table>

</body>
</html>